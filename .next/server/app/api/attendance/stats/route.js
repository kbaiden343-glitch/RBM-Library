"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
(() => {
var exports = {};
exports.id = "app/api/attendance/stats/route";
exports.ids = ["app/api/attendance/stats/route"];
exports.modules = {

/***/ "@prisma/client":
/*!*********************************!*\
  !*** external "@prisma/client" ***!
  \*********************************/
/***/ ((module) => {

module.exports = require("@prisma/client");

/***/ }),

/***/ "next/dist/compiled/next-server/app-page.runtime.dev.js":
/*!*************************************************************************!*\
  !*** external "next/dist/compiled/next-server/app-page.runtime.dev.js" ***!
  \*************************************************************************/
/***/ ((module) => {

module.exports = require("next/dist/compiled/next-server/app-page.runtime.dev.js");

/***/ }),

/***/ "next/dist/compiled/next-server/app-route.runtime.dev.js":
/*!**************************************************************************!*\
  !*** external "next/dist/compiled/next-server/app-route.runtime.dev.js" ***!
  \**************************************************************************/
/***/ ((module) => {

module.exports = require("next/dist/compiled/next-server/app-route.runtime.dev.js");

/***/ }),

/***/ "(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fattendance%2Fstats%2Froute&page=%2Fapi%2Fattendance%2Fstats%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fattendance%2Fstats%2Froute.ts&appDir=C%3A%5CUsers%5CUSER%5CDesktop%5CLibrary%20Project%5Capp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=C%3A%5CUsers%5CUSER%5CDesktop%5CLibrary%20Project&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!":
/*!************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fattendance%2Fstats%2Froute&page=%2Fapi%2Fattendance%2Fstats%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fattendance%2Fstats%2Froute.ts&appDir=C%3A%5CUsers%5CUSER%5CDesktop%5CLibrary%20Project%5Capp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=C%3A%5CUsers%5CUSER%5CDesktop%5CLibrary%20Project&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D! ***!
  \************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   originalPathname: () => (/* binding */ originalPathname),\n/* harmony export */   patchFetch: () => (/* binding */ patchFetch),\n/* harmony export */   requestAsyncStorage: () => (/* binding */ requestAsyncStorage),\n/* harmony export */   routeModule: () => (/* binding */ routeModule),\n/* harmony export */   serverHooks: () => (/* binding */ serverHooks),\n/* harmony export */   staticGenerationAsyncStorage: () => (/* binding */ staticGenerationAsyncStorage)\n/* harmony export */ });\n/* harmony import */ var next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/dist/server/future/route-modules/app-route/module.compiled */ \"(rsc)/./node_modules/next/dist/server/future/route-modules/app-route/module.compiled.js\");\n/* harmony import */ var next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! next/dist/server/future/route-kind */ \"(rsc)/./node_modules/next/dist/server/future/route-kind.js\");\n/* harmony import */ var next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! next/dist/server/lib/patch-fetch */ \"(rsc)/./node_modules/next/dist/server/lib/patch-fetch.js\");\n/* harmony import */ var next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var C_Users_USER_Desktop_Library_Project_app_api_attendance_stats_route_ts__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./app/api/attendance/stats/route.ts */ \"(rsc)/./app/api/attendance/stats/route.ts\");\n\n\n\n\n// We inject the nextConfigOutput here so that we can use them in the route\n// module.\nconst nextConfigOutput = \"\"\nconst routeModule = new next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__.AppRouteRouteModule({\n    definition: {\n        kind: next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__.RouteKind.APP_ROUTE,\n        page: \"/api/attendance/stats/route\",\n        pathname: \"/api/attendance/stats\",\n        filename: \"route\",\n        bundlePath: \"app/api/attendance/stats/route\"\n    },\n    resolvedPagePath: \"C:\\\\Users\\\\USER\\\\Desktop\\\\Library Project\\\\app\\\\api\\\\attendance\\\\stats\\\\route.ts\",\n    nextConfigOutput,\n    userland: C_Users_USER_Desktop_Library_Project_app_api_attendance_stats_route_ts__WEBPACK_IMPORTED_MODULE_3__\n});\n// Pull out the exports that we need to expose from the module. This should\n// be eliminated when we've moved the other routes to the new format. These\n// are used to hook into the route.\nconst { requestAsyncStorage, staticGenerationAsyncStorage, serverHooks } = routeModule;\nconst originalPathname = \"/api/attendance/stats/route\";\nfunction patchFetch() {\n    return (0,next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__.patchFetch)({\n        serverHooks,\n        staticGenerationAsyncStorage\n    });\n}\n\n\n//# sourceMappingURL=app-route.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvbmV4dC9kaXN0L2J1aWxkL3dlYnBhY2svbG9hZGVycy9uZXh0LWFwcC1sb2FkZXIuanM/bmFtZT1hcHAlMkZhcGklMkZhdHRlbmRhbmNlJTJGc3RhdHMlMkZyb3V0ZSZwYWdlPSUyRmFwaSUyRmF0dGVuZGFuY2UlMkZzdGF0cyUyRnJvdXRlJmFwcFBhdGhzPSZwYWdlUGF0aD1wcml2YXRlLW5leHQtYXBwLWRpciUyRmFwaSUyRmF0dGVuZGFuY2UlMkZzdGF0cyUyRnJvdXRlLnRzJmFwcERpcj1DJTNBJTVDVXNlcnMlNUNVU0VSJTVDRGVza3RvcCU1Q0xpYnJhcnklMjBQcm9qZWN0JTVDYXBwJnBhZ2VFeHRlbnNpb25zPXRzeCZwYWdlRXh0ZW5zaW9ucz10cyZwYWdlRXh0ZW5zaW9ucz1qc3gmcGFnZUV4dGVuc2lvbnM9anMmcm9vdERpcj1DJTNBJTVDVXNlcnMlNUNVU0VSJTVDRGVza3RvcCU1Q0xpYnJhcnklMjBQcm9qZWN0JmlzRGV2PXRydWUmdHNjb25maWdQYXRoPXRzY29uZmlnLmpzb24mYmFzZVBhdGg9JmFzc2V0UHJlZml4PSZuZXh0Q29uZmlnT3V0cHV0PSZwcmVmZXJyZWRSZWdpb249Jm1pZGRsZXdhcmVDb25maWc9ZTMwJTNEISIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7QUFBc0c7QUFDdkM7QUFDYztBQUNnQztBQUM3RztBQUNBO0FBQ0E7QUFDQSx3QkFBd0IsZ0hBQW1CO0FBQzNDO0FBQ0EsY0FBYyx5RUFBUztBQUN2QjtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0EsWUFBWTtBQUNaLENBQUM7QUFDRDtBQUNBO0FBQ0E7QUFDQSxRQUFRLGlFQUFpRTtBQUN6RTtBQUNBO0FBQ0EsV0FBVyw0RUFBVztBQUN0QjtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ3VIOztBQUV2SCIsInNvdXJjZXMiOlsid2VicGFjazovL3JvYmVydC1hYm9hZ3llLW1lbnNhaC1saWJyYXJ5Lz85ZTIxIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IEFwcFJvdXRlUm91dGVNb2R1bGUgfSBmcm9tIFwibmV4dC9kaXN0L3NlcnZlci9mdXR1cmUvcm91dGUtbW9kdWxlcy9hcHAtcm91dGUvbW9kdWxlLmNvbXBpbGVkXCI7XG5pbXBvcnQgeyBSb3V0ZUtpbmQgfSBmcm9tIFwibmV4dC9kaXN0L3NlcnZlci9mdXR1cmUvcm91dGUta2luZFwiO1xuaW1wb3J0IHsgcGF0Y2hGZXRjaCBhcyBfcGF0Y2hGZXRjaCB9IGZyb20gXCJuZXh0L2Rpc3Qvc2VydmVyL2xpYi9wYXRjaC1mZXRjaFwiO1xuaW1wb3J0ICogYXMgdXNlcmxhbmQgZnJvbSBcIkM6XFxcXFVzZXJzXFxcXFVTRVJcXFxcRGVza3RvcFxcXFxMaWJyYXJ5IFByb2plY3RcXFxcYXBwXFxcXGFwaVxcXFxhdHRlbmRhbmNlXFxcXHN0YXRzXFxcXHJvdXRlLnRzXCI7XG4vLyBXZSBpbmplY3QgdGhlIG5leHRDb25maWdPdXRwdXQgaGVyZSBzbyB0aGF0IHdlIGNhbiB1c2UgdGhlbSBpbiB0aGUgcm91dGVcbi8vIG1vZHVsZS5cbmNvbnN0IG5leHRDb25maWdPdXRwdXQgPSBcIlwiXG5jb25zdCByb3V0ZU1vZHVsZSA9IG5ldyBBcHBSb3V0ZVJvdXRlTW9kdWxlKHtcbiAgICBkZWZpbml0aW9uOiB7XG4gICAgICAgIGtpbmQ6IFJvdXRlS2luZC5BUFBfUk9VVEUsXG4gICAgICAgIHBhZ2U6IFwiL2FwaS9hdHRlbmRhbmNlL3N0YXRzL3JvdXRlXCIsXG4gICAgICAgIHBhdGhuYW1lOiBcIi9hcGkvYXR0ZW5kYW5jZS9zdGF0c1wiLFxuICAgICAgICBmaWxlbmFtZTogXCJyb3V0ZVwiLFxuICAgICAgICBidW5kbGVQYXRoOiBcImFwcC9hcGkvYXR0ZW5kYW5jZS9zdGF0cy9yb3V0ZVwiXG4gICAgfSxcbiAgICByZXNvbHZlZFBhZ2VQYXRoOiBcIkM6XFxcXFVzZXJzXFxcXFVTRVJcXFxcRGVza3RvcFxcXFxMaWJyYXJ5IFByb2plY3RcXFxcYXBwXFxcXGFwaVxcXFxhdHRlbmRhbmNlXFxcXHN0YXRzXFxcXHJvdXRlLnRzXCIsXG4gICAgbmV4dENvbmZpZ091dHB1dCxcbiAgICB1c2VybGFuZFxufSk7XG4vLyBQdWxsIG91dCB0aGUgZXhwb3J0cyB0aGF0IHdlIG5lZWQgdG8gZXhwb3NlIGZyb20gdGhlIG1vZHVsZS4gVGhpcyBzaG91bGRcbi8vIGJlIGVsaW1pbmF0ZWQgd2hlbiB3ZSd2ZSBtb3ZlZCB0aGUgb3RoZXIgcm91dGVzIHRvIHRoZSBuZXcgZm9ybWF0LiBUaGVzZVxuLy8gYXJlIHVzZWQgdG8gaG9vayBpbnRvIHRoZSByb3V0ZS5cbmNvbnN0IHsgcmVxdWVzdEFzeW5jU3RvcmFnZSwgc3RhdGljR2VuZXJhdGlvbkFzeW5jU3RvcmFnZSwgc2VydmVySG9va3MgfSA9IHJvdXRlTW9kdWxlO1xuY29uc3Qgb3JpZ2luYWxQYXRobmFtZSA9IFwiL2FwaS9hdHRlbmRhbmNlL3N0YXRzL3JvdXRlXCI7XG5mdW5jdGlvbiBwYXRjaEZldGNoKCkge1xuICAgIHJldHVybiBfcGF0Y2hGZXRjaCh7XG4gICAgICAgIHNlcnZlckhvb2tzLFxuICAgICAgICBzdGF0aWNHZW5lcmF0aW9uQXN5bmNTdG9yYWdlXG4gICAgfSk7XG59XG5leHBvcnQgeyByb3V0ZU1vZHVsZSwgcmVxdWVzdEFzeW5jU3RvcmFnZSwgc3RhdGljR2VuZXJhdGlvbkFzeW5jU3RvcmFnZSwgc2VydmVySG9va3MsIG9yaWdpbmFsUGF0aG5hbWUsIHBhdGNoRmV0Y2gsICB9O1xuXG4vLyMgc291cmNlTWFwcGluZ1VSTD1hcHAtcm91dGUuanMubWFwIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fattendance%2Fstats%2Froute&page=%2Fapi%2Fattendance%2Fstats%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fattendance%2Fstats%2Froute.ts&appDir=C%3A%5CUsers%5CUSER%5CDesktop%5CLibrary%20Project%5Capp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=C%3A%5CUsers%5CUSER%5CDesktop%5CLibrary%20Project&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!\n");

/***/ }),

/***/ "(rsc)/./app/api/attendance/stats/route.ts":
/*!*******************************************!*\
  !*** ./app/api/attendance/stats/route.ts ***!
  \*******************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   GET: () => (/* binding */ GET)\n/* harmony export */ });\n/* harmony import */ var next_server__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/server */ \"(rsc)/./node_modules/next/dist/api/server.js\");\n/* harmony import */ var _lib_db__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../../../lib/db */ \"(rsc)/./lib/db.ts\");\n\n\nasync function GET(request) {\n    try {\n        const { searchParams } = new URL(request.url);\n        const period = searchParams.get(\"period\") || \"week\" // week, month, year\n        ;\n        const startDate = searchParams.get(\"startDate\");\n        const endDate = searchParams.get(\"endDate\");\n        // Calculate date range based on period\n        let dateRange;\n        const now = new Date();\n        if (startDate && endDate) {\n            dateRange = {\n                gte: new Date(startDate),\n                lt: new Date(endDate)\n            };\n        } else {\n            switch(period){\n                case \"week\":\n                    const weekStart = new Date(now);\n                    weekStart.setDate(now.getDate() - 7);\n                    dateRange = {\n                        gte: weekStart,\n                        lt: now\n                    };\n                    break;\n                case \"month\":\n                    const monthStart = new Date(now);\n                    monthStart.setMonth(now.getMonth() - 1);\n                    dateRange = {\n                        gte: monthStart,\n                        lt: now\n                    };\n                    break;\n                case \"year\":\n                    const yearStart = new Date(now);\n                    yearStart.setFullYear(now.getFullYear() - 1);\n                    dateRange = {\n                        gte: yearStart,\n                        lt: now\n                    };\n                    break;\n                default:\n                    const defaultStart = new Date(now);\n                    defaultStart.setDate(now.getDate() - 7);\n                    dateRange = {\n                        gte: defaultStart,\n                        lt: now\n                    };\n            }\n        }\n        // Get total attendance count for the period\n        const totalAttendance = await _lib_db__WEBPACK_IMPORTED_MODULE_1__.prisma.attendance.count({\n            where: {\n                checkInTime: dateRange\n            }\n        });\n        // Get daily attendance breakdown\n        const dailyAttendance = await _lib_db__WEBPACK_IMPORTED_MODULE_1__.prisma.attendance.groupBy({\n            by: [\n                \"checkInTime\"\n            ],\n            where: {\n                checkInTime: dateRange\n            },\n            _count: {\n                id: true\n            },\n            orderBy: {\n                checkInTime: \"asc\"\n            }\n        });\n        // Process daily data\n        const dailyStats = dailyAttendance.reduce((acc, record)=>{\n            const date = new Date(record.checkInTime).toISOString().split(\"T\")[0];\n            if (!acc[date]) {\n                acc[date] = 0;\n            }\n            acc[date] += record._count.id;\n            return acc;\n        }, {});\n        // Get attendance by person type\n        const attendanceByType = await _lib_db__WEBPACK_IMPORTED_MODULE_1__.prisma.attendance.groupBy({\n            by: [\n                \"isVisitor\"\n            ],\n            where: {\n                checkInTime: dateRange\n            },\n            _count: {\n                id: true\n            }\n        });\n        // Get top visitors\n        const topVisitors = await _lib_db__WEBPACK_IMPORTED_MODULE_1__.prisma.attendance.groupBy({\n            by: [\n                \"personId\",\n                \"memberId\"\n            ],\n            where: {\n                checkInTime: dateRange,\n                OR: [\n                    {\n                        personId: {\n                            not: null\n                        }\n                    },\n                    {\n                        memberId: {\n                            not: null\n                        }\n                    }\n                ]\n            },\n            _count: {\n                id: true\n            },\n            orderBy: {\n                _count: {\n                    id: \"desc\"\n                }\n            },\n            take: 10\n        });\n        // Get detailed info for top visitors\n        const visitorIds = topVisitors.filter((v)=>v.personId).map((v)=>v.personId);\n        const memberIds = topVisitors.filter((v)=>v.memberId).map((v)=>v.memberId);\n        const [persons, members] = await Promise.all([\n            visitorIds.length > 0 ? _lib_db__WEBPACK_IMPORTED_MODULE_1__.prisma.person.findMany({\n                where: {\n                    id: {\n                        in: visitorIds\n                    }\n                },\n                select: {\n                    id: true,\n                    name: true,\n                    email: true,\n                    personType: true\n                }\n            }) : [],\n            memberIds.length > 0 ? _lib_db__WEBPACK_IMPORTED_MODULE_1__.prisma.member.findMany({\n                where: {\n                    id: {\n                        in: memberIds\n                    }\n                },\n                select: {\n                    id: true,\n                    name: true,\n                    email: true\n                }\n            }) : []\n        ]);\n        const topVisitorsWithDetails = topVisitors.map((visitor)=>{\n            const person = persons.find((p)=>p.id === visitor.personId);\n            const member = members.find((m)=>m.id === visitor.memberId);\n            return {\n                id: visitor.personId || visitor.memberId,\n                name: person?.name || member?.name || \"Unknown\",\n                email: person?.email || member?.email || \"Unknown\",\n                type: person?.personType || \"Member\",\n                visits: visitor._count.id\n            };\n        });\n        // Get hourly distribution\n        const hourlyAttendance = await _lib_db__WEBPACK_IMPORTED_MODULE_1__.prisma.attendance.findMany({\n            where: {\n                checkInTime: dateRange\n            },\n            select: {\n                checkInTime: true\n            }\n        });\n        const hourlyStats = hourlyAttendance.reduce((acc, record)=>{\n            const hour = new Date(record.checkInTime).getHours();\n            acc[hour] = (acc[hour] || 0) + 1;\n            return acc;\n        }, {});\n        // Calculate average visit duration\n        const completedVisits = await _lib_db__WEBPACK_IMPORTED_MODULE_1__.prisma.attendance.findMany({\n            where: {\n                checkInTime: dateRange,\n                checkOutTime: {\n                    not: null\n                }\n            },\n            select: {\n                checkInTime: true,\n                checkOutTime: true\n            }\n        });\n        const avgDuration = completedVisits.length > 0 ? completedVisits.reduce((sum, visit)=>{\n            const duration = new Date(visit.checkOutTime).getTime() - new Date(visit.checkInTime).getTime();\n            return sum + duration;\n        }, 0) / completedVisits.length : 0;\n        // Get current active visitors\n        const today = new Date();\n        const startOfDay = new Date(today.getFullYear(), today.getMonth(), today.getDate());\n        const endOfDay = new Date(today.getFullYear(), today.getMonth(), today.getDate() + 1);\n        const activeVisitors = await _lib_db__WEBPACK_IMPORTED_MODULE_1__.prisma.attendance.count({\n            where: {\n                checkInTime: {\n                    gte: startOfDay,\n                    lt: endOfDay\n                },\n                checkOutTime: null\n            }\n        });\n        return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n            period,\n            dateRange: {\n                start: dateRange.gte.toISOString(),\n                end: dateRange.lt.toISOString()\n            },\n            summary: {\n                totalVisits: totalAttendance,\n                activeVisitors,\n                averageDuration: Math.round(avgDuration / (1000 * 60)),\n                completedVisits: completedVisits.length\n            },\n            dailyStats,\n            hourlyStats,\n            typeBreakdown: attendanceByType.map((type)=>({\n                    type: type.isVisitor ? \"Visitor\" : \"Member\",\n                    count: type._count.id\n                })),\n            topVisitors: topVisitorsWithDetails\n        });\n    } catch (error) {\n        console.error(\"Get attendance stats error:\", error);\n        return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n            error: \"Failed to fetch attendance statistics\"\n        }, {\n            status: 500\n        });\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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O1lBQ0F3QztZQUNBc0IsZUFBZXZELGlCQUFpQlUsR0FBRyxDQUFDb0IsQ0FBQUEsT0FBUztvQkFDM0NBLE1BQU1BLEtBQUswQixTQUFTLEdBQUcsWUFBWTtvQkFDbkN4RSxPQUFPOEMsS0FBS3hDLE1BQU0sQ0FBQ0MsRUFBRTtnQkFDdkI7WUFDQVUsYUFBYXdCO1FBQ2Y7SUFDRixFQUFFLE9BQU9nQyxPQUFPO1FBQ2RDLFFBQVFELEtBQUssQ0FBQywrQkFBK0JBO1FBQzdDLE9BQU9yRyxxREFBWUEsQ0FBQzJGLElBQUksQ0FDdEI7WUFBRVUsT0FBTztRQUF3QyxHQUNqRDtZQUFFRSxRQUFRO1FBQUk7SUFFbEI7QUFDRiIsInNvdXJjZXMiOlsid2VicGFjazovL3JvYmVydC1hYm9hZ3llLW1lbnNhaC1saWJyYXJ5Ly4vYXBwL2FwaS9hdHRlbmRhbmNlL3N0YXRzL3JvdXRlLnRzPzQ3NDQiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgTmV4dFJlcXVlc3QsIE5leHRSZXNwb25zZSB9IGZyb20gJ25leHQvc2VydmVyJ1xyXG5pbXBvcnQgeyBwcmlzbWEgfSBmcm9tICcuLi8uLi8uLi8uLi9saWIvZGInXHJcblxyXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gR0VUKHJlcXVlc3Q6IE5leHRSZXF1ZXN0KSB7XHJcbiAgdHJ5IHtcclxuICAgIGNvbnN0IHsgc2VhcmNoUGFyYW1zIH0gPSBuZXcgVVJMKHJlcXVlc3QudXJsKVxyXG4gICAgY29uc3QgcGVyaW9kID0gc2VhcmNoUGFyYW1zLmdldCgncGVyaW9kJykgfHwgJ3dlZWsnIC8vIHdlZWssIG1vbnRoLCB5ZWFyXHJcbiAgICBjb25zdCBzdGFydERhdGUgPSBzZWFyY2hQYXJhbXMuZ2V0KCdzdGFydERhdGUnKVxyXG4gICAgY29uc3QgZW5kRGF0ZSA9IHNlYXJjaFBhcmFtcy5nZXQoJ2VuZERhdGUnKVxyXG5cclxuICAgIC8vIENhbGN1bGF0ZSBkYXRlIHJhbmdlIGJhc2VkIG9uIHBlcmlvZFxyXG4gICAgbGV0IGRhdGVSYW5nZTogeyBndGU6IERhdGU7IGx0OiBEYXRlIH1cclxuICAgIGNvbnN0IG5vdyA9IG5ldyBEYXRlKClcclxuXHJcbiAgICBpZiAoc3RhcnREYXRlICYmIGVuZERhdGUpIHtcclxuICAgICAgZGF0ZVJhbmdlID0ge1xyXG4gICAgICAgIGd0ZTogbmV3IERhdGUoc3RhcnREYXRlKSxcclxuICAgICAgICBsdDogbmV3IERhdGUoZW5kRGF0ZSlcclxuICAgICAgfVxyXG4gICAgfSBlbHNlIHtcclxuICAgICAgc3dpdGNoIChwZXJpb2QpIHtcclxuICAgICAgICBjYXNlICd3ZWVrJzpcclxuICAgICAgICAgIGNvbnN0IHdlZWtTdGFydCA9IG5ldyBEYXRlKG5vdylcclxuICAgICAgICAgIHdlZWtTdGFydC5zZXREYXRlKG5vdy5nZXREYXRlKCkgLSA3KVxyXG4gICAgICAgICAgZGF0ZVJhbmdlID0geyBndGU6IHdlZWtTdGFydCwgbHQ6IG5vdyB9XHJcbiAgICAgICAgICBicmVha1xyXG4gICAgICAgIGNhc2UgJ21vbnRoJzpcclxuICAgICAgICAgIGNvbnN0IG1vbnRoU3RhcnQgPSBuZXcgRGF0ZShub3cpXHJcbiAgICAgICAgICBtb250aFN0YXJ0LnNldE1vbnRoKG5vdy5nZXRNb250aCgpIC0gMSlcclxuICAgICAgICAgIGRhdGVSYW5nZSA9IHsgZ3RlOiBtb250aFN0YXJ0LCBsdDogbm93IH1cclxuICAgICAgICAgIGJyZWFrXHJcbiAgICAgICAgY2FzZSAneWVhcic6XHJcbiAgICAgICAgICBjb25zdCB5ZWFyU3RhcnQgPSBuZXcgRGF0ZShub3cpXHJcbiAgICAgICAgICB5ZWFyU3RhcnQuc2V0RnVsbFllYXIobm93LmdldEZ1bGxZZWFyKCkgLSAxKVxyXG4gICAgICAgICAgZGF0ZVJhbmdlID0geyBndGU6IHllYXJTdGFydCwgbHQ6IG5vdyB9XHJcbiAgICAgICAgICBicmVha1xyXG4gICAgICAgIGRlZmF1bHQ6XHJcbiAgICAgICAgICBjb25zdCBkZWZhdWx0U3RhcnQgPSBuZXcgRGF0ZShub3cpXHJcbiAgICAgICAgICBkZWZhdWx0U3RhcnQuc2V0RGF0ZShub3cuZ2V0RGF0ZSgpIC0gNylcclxuICAgICAgICAgIGRhdGVSYW5nZSA9IHsgZ3RlOiBkZWZhdWx0U3RhcnQsIGx0OiBub3cgfVxyXG4gICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgLy8gR2V0IHRvdGFsIGF0dGVuZGFuY2UgY291bnQgZm9yIHRoZSBwZXJpb2RcclxuICAgIGNvbnN0IHRvdGFsQXR0ZW5kYW5jZSA9IGF3YWl0IHByaXNtYS5hdHRlbmRhbmNlLmNvdW50KHtcclxuICAgICAgd2hlcmU6IHtcclxuICAgICAgICBjaGVja0luVGltZTogZGF0ZVJhbmdlXHJcbiAgICAgIH1cclxuICAgIH0pXHJcblxyXG4gICAgLy8gR2V0IGRhaWx5IGF0dGVuZGFuY2UgYnJlYWtkb3duXHJcbiAgICBjb25zdCBkYWlseUF0dGVuZGFuY2UgPSBhd2FpdCBwcmlzbWEuYXR0ZW5kYW5jZS5ncm91cEJ5KHtcclxuICAgICAgYnk6IFsnY2hlY2tJblRpbWUnXSxcclxuICAgICAgd2hlcmU6IHtcclxuICAgICAgICBjaGVja0luVGltZTogZGF0ZVJhbmdlXHJcbiAgICAgIH0sXHJcbiAgICAgIF9jb3VudDoge1xyXG4gICAgICAgIGlkOiB0cnVlXHJcbiAgICAgIH0sXHJcbiAgICAgIG9yZGVyQnk6IHtcclxuICAgICAgICBjaGVja0luVGltZTogJ2FzYydcclxuICAgICAgfVxyXG4gICAgfSlcclxuXHJcbiAgICAvLyBQcm9jZXNzIGRhaWx5IGRhdGFcclxuICAgIGNvbnN0IGRhaWx5U3RhdHMgPSBkYWlseUF0dGVuZGFuY2UucmVkdWNlKChhY2M6IGFueSwgcmVjb3JkKSA9PiB7XHJcbiAgICAgIGNvbnN0IGRhdGUgPSBuZXcgRGF0ZShyZWNvcmQuY2hlY2tJblRpbWUpLnRvSVNPU3RyaW5nKCkuc3BsaXQoJ1QnKVswXVxyXG4gICAgICBpZiAoIWFjY1tkYXRlXSkge1xyXG4gICAgICAgIGFjY1tkYXRlXSA9IDBcclxuICAgICAgfVxyXG4gICAgICBhY2NbZGF0ZV0gKz0gcmVjb3JkLl9jb3VudC5pZFxyXG4gICAgICByZXR1cm4gYWNjXHJcbiAgICB9LCB7fSlcclxuXHJcbiAgICAvLyBHZXQgYXR0ZW5kYW5jZSBieSBwZXJzb24gdHlwZVxyXG4gICAgY29uc3QgYXR0ZW5kYW5jZUJ5VHlwZSA9IGF3YWl0IHByaXNtYS5hdHRlbmRhbmNlLmdyb3VwQnkoe1xyXG4gICAgICBieTogWydpc1Zpc2l0b3InXSxcclxuICAgICAgd2hlcmU6IHtcclxuICAgICAgICBjaGVja0luVGltZTogZGF0ZVJhbmdlXHJcbiAgICAgIH0sXHJcbiAgICAgIF9jb3VudDoge1xyXG4gICAgICAgIGlkOiB0cnVlXHJcbiAgICAgIH1cclxuICAgIH0pXHJcblxyXG4gICAgLy8gR2V0IHRvcCB2aXNpdG9yc1xyXG4gICAgY29uc3QgdG9wVmlzaXRvcnMgPSBhd2FpdCBwcmlzbWEuYXR0ZW5kYW5jZS5ncm91cEJ5KHtcclxuICAgICAgYnk6IFsncGVyc29uSWQnLCAnbWVtYmVySWQnXSxcclxuICAgICAgd2hlcmU6IHtcclxuICAgICAgICBjaGVja0luVGltZTogZGF0ZVJhbmdlLFxyXG4gICAgICAgIE9SOiBbXHJcbiAgICAgICAgICB7IHBlcnNvbklkOiB7IG5vdDogbnVsbCB9IH0sXHJcbiAgICAgICAgICB7IG1lbWJlcklkOiB7IG5vdDogbnVsbCB9IH1cclxuICAgICAgICBdXHJcbiAgICAgIH0sXHJcbiAgICAgIF9jb3VudDoge1xyXG4gICAgICAgIGlkOiB0cnVlXHJcbiAgICAgIH0sXHJcbiAgICAgIG9yZGVyQnk6IHtcclxuICAgICAgICBfY291bnQ6IHtcclxuICAgICAgICAgIGlkOiAnZGVzYydcclxuICAgICAgICB9XHJcbiAgICAgIH0sXHJcbiAgICAgIHRha2U6IDEwXHJcbiAgICB9KVxyXG5cclxuICAgIC8vIEdldCBkZXRhaWxlZCBpbmZvIGZvciB0b3AgdmlzaXRvcnNcclxuICAgIGNvbnN0IHZpc2l0b3JJZHMgPSB0b3BWaXNpdG9yc1xyXG4gICAgICAuZmlsdGVyKHYgPT4gdi5wZXJzb25JZClcclxuICAgICAgLm1hcCh2ID0+IHYucGVyc29uSWQhKVxyXG4gICAgY29uc3QgbWVtYmVySWRzID0gdG9wVmlzaXRvcnNcclxuICAgICAgLmZpbHRlcih2ID0+IHYubWVtYmVySWQpXHJcbiAgICAgIC5tYXAodiA9PiB2Lm1lbWJlcklkISlcclxuXHJcbiAgICBjb25zdCBbcGVyc29ucywgbWVtYmVyc10gPSBhd2FpdCBQcm9taXNlLmFsbChbXHJcbiAgICAgIHZpc2l0b3JJZHMubGVuZ3RoID4gMCA/IHByaXNtYS5wZXJzb24uZmluZE1hbnkoe1xyXG4gICAgICAgIHdoZXJlOiB7IGlkOiB7IGluOiB2aXNpdG9ySWRzIH0gfSxcclxuICAgICAgICBzZWxlY3Q6IHsgaWQ6IHRydWUsIG5hbWU6IHRydWUsIGVtYWlsOiB0cnVlLCBwZXJzb25UeXBlOiB0cnVlIH1cclxuICAgICAgfSkgOiBbXSxcclxuICAgICAgbWVtYmVySWRzLmxlbmd0aCA+IDAgPyBwcmlzbWEubWVtYmVyLmZpbmRNYW55KHtcclxuICAgICAgICB3aGVyZTogeyBpZDogeyBpbjogbWVtYmVySWRzIH0gfSxcclxuICAgICAgICBzZWxlY3Q6IHsgaWQ6IHRydWUsIG5hbWU6IHRydWUsIGVtYWlsOiB0cnVlIH1cclxuICAgICAgfSkgOiBbXVxyXG4gICAgXSlcclxuXHJcbiAgICBjb25zdCB0b3BWaXNpdG9yc1dpdGhEZXRhaWxzID0gdG9wVmlzaXRvcnMubWFwKHZpc2l0b3IgPT4ge1xyXG4gICAgICBjb25zdCBwZXJzb24gPSBwZXJzb25zLmZpbmQocCA9PiBwLmlkID09PSB2aXNpdG9yLnBlcnNvbklkKVxyXG4gICAgICBjb25zdCBtZW1iZXIgPSBtZW1iZXJzLmZpbmQobSA9PiBtLmlkID09PSB2aXNpdG9yLm1lbWJlcklkKVxyXG4gICAgICBcclxuICAgICAgcmV0dXJuIHtcclxuICAgICAgICBpZDogdmlzaXRvci5wZXJzb25JZCB8fCB2aXNpdG9yLm1lbWJlcklkLFxyXG4gICAgICAgIG5hbWU6IHBlcnNvbj8ubmFtZSB8fCBtZW1iZXI/Lm5hbWUgfHwgJ1Vua25vd24nLFxyXG4gICAgICAgIGVtYWlsOiBwZXJzb24/LmVtYWlsIHx8IG1lbWJlcj8uZW1haWwgfHwgJ1Vua25vd24nLFxyXG4gICAgICAgIHR5cGU6IHBlcnNvbj8ucGVyc29uVHlwZSB8fCAnTWVtYmVyJyxcclxuICAgICAgICB2aXNpdHM6IHZpc2l0b3IuX2NvdW50LmlkXHJcbiAgICAgIH1cclxuICAgIH0pXHJcblxyXG4gICAgLy8gR2V0IGhvdXJseSBkaXN0cmlidXRpb25cclxuICAgIGNvbnN0IGhvdXJseUF0dGVuZGFuY2UgPSBhd2FpdCBwcmlzbWEuYXR0ZW5kYW5jZS5maW5kTWFueSh7XHJcbiAgICAgIHdoZXJlOiB7XHJcbiAgICAgICAgY2hlY2tJblRpbWU6IGRhdGVSYW5nZVxyXG4gICAgICB9LFxyXG4gICAgICBzZWxlY3Q6IHtcclxuICAgICAgICBjaGVja0luVGltZTogdHJ1ZVxyXG4gICAgICB9XHJcbiAgICB9KVxyXG5cclxuICAgIGNvbnN0IGhvdXJseVN0YXRzID0gaG91cmx5QXR0ZW5kYW5jZS5yZWR1Y2UoKGFjYzogYW55LCByZWNvcmQpID0+IHtcclxuICAgICAgY29uc3QgaG91ciA9IG5ldyBEYXRlKHJlY29yZC5jaGVja0luVGltZSkuZ2V0SG91cnMoKVxyXG4gICAgICBhY2NbaG91cl0gPSAoYWNjW2hvdXJdIHx8IDApICsgMVxyXG4gICAgICByZXR1cm4gYWNjXHJcbiAgICB9LCB7fSlcclxuXHJcbiAgICAvLyBDYWxjdWxhdGUgYXZlcmFnZSB2aXNpdCBkdXJhdGlvblxyXG4gICAgY29uc3QgY29tcGxldGVkVmlzaXRzID0gYXdhaXQgcHJpc21hLmF0dGVuZGFuY2UuZmluZE1hbnkoe1xyXG4gICAgICB3aGVyZToge1xyXG4gICAgICAgIGNoZWNrSW5UaW1lOiBkYXRlUmFuZ2UsXHJcbiAgICAgICAgY2hlY2tPdXRUaW1lOiB7IG5vdDogbnVsbCB9XHJcbiAgICAgIH0sXHJcbiAgICAgIHNlbGVjdDoge1xyXG4gICAgICAgIGNoZWNrSW5UaW1lOiB0cnVlLFxyXG4gICAgICAgIGNoZWNrT3V0VGltZTogdHJ1ZVxyXG4gICAgICB9XHJcbiAgICB9KVxyXG5cclxuICAgIGNvbnN0IGF2Z0R1cmF0aW9uID0gY29tcGxldGVkVmlzaXRzLmxlbmd0aCA+IDBcclxuICAgICAgPyBjb21wbGV0ZWRWaXNpdHMucmVkdWNlKChzdW0sIHZpc2l0KSA9PiB7XHJcbiAgICAgICAgICBjb25zdCBkdXJhdGlvbiA9IG5ldyBEYXRlKHZpc2l0LmNoZWNrT3V0VGltZSEpLmdldFRpbWUoKSAtIG5ldyBEYXRlKHZpc2l0LmNoZWNrSW5UaW1lKS5nZXRUaW1lKClcclxuICAgICAgICAgIHJldHVybiBzdW0gKyBkdXJhdGlvblxyXG4gICAgICAgIH0sIDApIC8gY29tcGxldGVkVmlzaXRzLmxlbmd0aFxyXG4gICAgICA6IDBcclxuXHJcbiAgICAvLyBHZXQgY3VycmVudCBhY3RpdmUgdmlzaXRvcnNcclxuICAgIGNvbnN0IHRvZGF5ID0gbmV3IERhdGUoKVxyXG4gICAgY29uc3Qgc3RhcnRPZkRheSA9IG5ldyBEYXRlKHRvZGF5LmdldEZ1bGxZZWFyKCksIHRvZGF5LmdldE1vbnRoKCksIHRvZGF5LmdldERhdGUoKSlcclxuICAgIGNvbnN0IGVuZE9mRGF5ID0gbmV3IERhdGUodG9kYXkuZ2V0RnVsbFllYXIoKSwgdG9kYXkuZ2V0TW9udGgoKSwgdG9kYXkuZ2V0RGF0ZSgpICsgMSlcclxuXHJcbiAgICBjb25zdCBhY3RpdmVWaXNpdG9ycyA9IGF3YWl0IHByaXNtYS5hdHRlbmRhbmNlLmNvdW50KHtcclxuICAgICAgd2hlcmU6IHtcclxuICAgICAgICBjaGVja0luVGltZToge1xyXG4gICAgICAgICAgZ3RlOiBzdGFydE9mRGF5LFxyXG4gICAgICAgICAgbHQ6IGVuZE9mRGF5XHJcbiAgICAgICAgfSxcclxuICAgICAgICBjaGVja091dFRpbWU6IG51bGxcclxuICAgICAgfVxyXG4gICAgfSlcclxuXHJcbiAgICByZXR1cm4gTmV4dFJlc3BvbnNlLmpzb24oe1xyXG4gICAgICBwZXJpb2QsXHJcbiAgICAgIGRhdGVSYW5nZToge1xyXG4gICAgICAgIHN0YXJ0OiBkYXRlUmFuZ2UuZ3RlLnRvSVNPU3RyaW5nKCksXHJcbiAgICAgICAgZW5kOiBkYXRlUmFuZ2UubHQudG9JU09TdHJpbmcoKVxyXG4gICAgICB9LFxyXG4gICAgICBzdW1tYXJ5OiB7XHJcbiAgICAgICAgdG90YWxWaXNpdHM6IHRvdGFsQXR0ZW5kYW5jZSxcclxuICAgICAgICBhY3RpdmVWaXNpdG9ycyxcclxuICAgICAgICBhdmVyYWdlRHVyYXRpb246IE1hdGgucm91bmQoYXZnRHVyYXRpb24gLyAoMTAwMCAqIDYwKSksIC8vIGluIG1pbnV0ZXNcclxuICAgICAgICBjb21wbGV0ZWRWaXNpdHM6IGNvbXBsZXRlZFZpc2l0cy5sZW5ndGhcclxuICAgICAgfSxcclxuICAgICAgZGFpbHlTdGF0cyxcclxuICAgICAgaG91cmx5U3RhdHMsXHJcbiAgICAgIHR5cGVCcmVha2Rvd246IGF0dGVuZGFuY2VCeVR5cGUubWFwKHR5cGUgPT4gKHtcclxuICAgICAgICB0eXBlOiB0eXBlLmlzVmlzaXRvciA/ICdWaXNpdG9yJyA6ICdNZW1iZXInLFxyXG4gICAgICAgIGNvdW50OiB0eXBlLl9jb3VudC5pZFxyXG4gICAgICB9KSksXHJcbiAgICAgIHRvcFZpc2l0b3JzOiB0b3BWaXNpdG9yc1dpdGhEZXRhaWxzXHJcbiAgICB9KVxyXG4gIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICBjb25zb2xlLmVycm9yKCdHZXQgYXR0ZW5kYW5jZSBzdGF0cyBlcnJvcjonLCBlcnJvcilcclxuICAgIHJldHVybiBOZXh0UmVzcG9uc2UuanNvbihcclxuICAgICAgeyBlcnJvcjogJ0ZhaWxlZCB0byBmZXRjaCBhdHRlbmRhbmNlIHN0YXRpc3RpY3MnIH0sXHJcbiAgICAgIHsgc3RhdHVzOiA1MDAgfVxyXG4gICAgKVxyXG4gIH1cclxufVxyXG4iXSwibmFtZXMiOlsiTmV4dFJlc3BvbnNlIiwicHJpc21hIiwiR0VUIiwicmVxdWVzdCIsInNlYXJjaFBhcmFtcyIsIlVSTCIsInVybCIsInBlcmlvZCIsImdldCIsInN0YXJ0RGF0ZSIsImVuZERhdGUiLCJkYXRlUmFuZ2UiLCJub3ciLCJEYXRlIiwiZ3RlIiwibHQiLCJ3ZWVrU3RhcnQiLCJzZXREYXRlIiwiZ2V0RGF0ZSIsIm1vbnRoU3RhcnQiLCJzZXRNb250aCIsImdldE1vbnRoIiwieWVhclN0YXJ0Iiwic2V0RnVsbFllYXIiLCJnZXRGdWxsWWVhciIsImRlZmF1bHRTdGFydCIsInRvdGFsQXR0ZW5kYW5jZSIsImF0dGVuZGFuY2UiLCJjb3VudCIsIndoZXJlIiwiY2hlY2tJblRpbWUiLCJkYWlseUF0dGVuZGFuY2UiLCJncm91cEJ5IiwiYnkiLCJfY291bnQiLCJpZCIsIm9yZGVyQnkiLCJkYWlseVN0YXRzIiwicmVkdWNlIiwiYWNjIiwicmVjb3JkIiwiZGF0ZSIsInRvSVNPU3RyaW5nIiwic3BsaXQiLCJhdHRlbmRhbmNlQnlUeXBlIiwidG9wVmlzaXRvcnMiLCJPUiIsInBlcnNvbklkIiwibm90IiwibWVtYmVySWQiLCJ0YWtlIiwidmlzaXRvcklkcyIsImZpbHRlciIsInYiLCJtYXAiLCJtZW1iZXJJZHMiLCJwZXJzb25zIiwibWVtYmVycyIsIlByb21pc2UiLCJhbGwiLCJsZW5ndGgiLCJwZXJzb24iLCJmaW5kTWFueSIsImluIiwic2VsZWN0IiwibmFtZSIsImVtYWlsIiwicGVyc29uVHlwZSIsIm1lbWJlciIsInRvcFZpc2l0b3JzV2l0aERldGFpbHMiLCJ2aXNpdG9yIiwiZmluZCIsInAiLCJtIiwidHlwZSIsInZpc2l0cyIsImhvdXJseUF0dGVuZGFuY2UiLCJob3VybHlTdGF0cyIsImhvdXIiLCJnZXRIb3VycyIsImNvbXBsZXRlZFZpc2l0cyIsImNoZWNrT3V0VGltZSIsImF2Z0R1cmF0aW9uIiwic3VtIiwidmlzaXQiLCJkdXJhdGlvbiIsImdldFRpbWUiLCJ0b2RheSIsInN0YXJ0T2ZEYXkiLCJlbmRPZkRheSIsImFjdGl2ZVZpc2l0b3JzIiwianNvbiIsInN0YXJ0IiwiZW5kIiwic3VtbWFyeSIsInRvdGFsVmlzaXRzIiwiYXZlcmFnZUR1cmF0aW9uIiwiTWF0aCIsInJvdW5kIiwidHlwZUJyZWFrZG93biIsImlzVmlzaXRvciIsImVycm9yIiwiY29uc29sZSIsInN0YXR1cyJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./app/api/attendance/stats/route.ts\n");

/***/ }),

/***/ "(rsc)/./lib/db.ts":
/*!*******************!*\
  !*** ./lib/db.ts ***!
  \*******************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__),\n/* harmony export */   prisma: () => (/* binding */ prisma)\n/* harmony export */ });\n/* harmony import */ var _prisma_client__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @prisma/client */ \"@prisma/client\");\n/* harmony import */ var _prisma_client__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_prisma_client__WEBPACK_IMPORTED_MODULE_0__);\n\nconst globalForPrisma = globalThis;\n// Configure database URL with connection pool parameters for Vercel\nconst databaseUrl = process.env.DATABASE_URL;\nconst optimizedDatabaseUrl = databaseUrl ? `${databaseUrl}?connection_limit=1&pool_timeout=20&connect_timeout=60&schema=public` : databaseUrl;\nconst prisma = globalForPrisma.prisma ?? new _prisma_client__WEBPACK_IMPORTED_MODULE_0__.PrismaClient({\n    log:  true ? [\n        \"error\",\n        \"warn\"\n    ] : 0,\n    datasources: {\n        db: {\n            url: optimizedDatabaseUrl\n        }\n    }\n});\n// Properly disconnect on process termination\nif (true) {\n    globalForPrisma.prisma = prisma;\n}\n// Graceful shutdown\nprocess.on(\"beforeExit\", async ()=>{\n    await prisma.$disconnect();\n});\nprocess.on(\"SIGINT\", async ()=>{\n    await prisma.$disconnect();\n    process.exit(0);\n});\nprocess.on(\"SIGTERM\", async ()=>{\n    await prisma.$disconnect();\n    process.exit(0);\n});\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (prisma);\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9saWIvZGIudHMiLCJtYXBwaW5ncyI6Ijs7Ozs7OztBQUE2QztBQUU3QyxNQUFNQyxrQkFBa0JDO0FBSXhCLG9FQUFvRTtBQUNwRSxNQUFNQyxjQUFjQyxRQUFRQyxHQUFHLENBQUNDLFlBQVk7QUFDNUMsTUFBTUMsdUJBQXVCSixjQUMzQixDQUFDLEVBQUVBLFlBQVksb0VBQW9FLENBQUMsR0FDcEZBO0FBRUssTUFBTUssU0FBU1AsZ0JBQWdCTyxNQUFNLElBQUksSUFBSVIsd0RBQVlBLENBQUM7SUFDL0RTLEtBQUtMLEtBQXlCLEdBQWdCO1FBQUM7UUFBUztLQUFPLEdBQUcsQ0FBUztJQUMzRU0sYUFBYTtRQUNYQyxJQUFJO1lBQ0ZDLEtBQUtMO1FBQ1A7SUFDRjtBQUNGLEdBQUU7QUFFRiw2Q0FBNkM7QUFDN0MsSUFBSUgsSUFBeUIsRUFBYztJQUN6Q0gsZ0JBQWdCTyxNQUFNLEdBQUdBO0FBQzNCO0FBRUEsb0JBQW9CO0FBQ3BCSixRQUFRUyxFQUFFLENBQUMsY0FBYztJQUN2QixNQUFNTCxPQUFPTSxXQUFXO0FBQzFCO0FBRUFWLFFBQVFTLEVBQUUsQ0FBQyxVQUFVO0lBQ25CLE1BQU1MLE9BQU9NLFdBQVc7SUFDeEJWLFFBQVFXLElBQUksQ0FBQztBQUNmO0FBRUFYLFFBQVFTLEVBQUUsQ0FBQyxXQUFXO0lBQ3BCLE1BQU1MLE9BQU9NLFdBQVc7SUFDeEJWLFFBQVFXLElBQUksQ0FBQztBQUNmO0FBRUEsaUVBQWVQLE1BQU1BLEVBQUEiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9yb2JlcnQtYWJvYWd5ZS1tZW5zYWgtbGlicmFyeS8uL2xpYi9kYi50cz8xZGYwIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IFByaXNtYUNsaWVudCB9IGZyb20gJ0BwcmlzbWEvY2xpZW50J1xyXG5cclxuY29uc3QgZ2xvYmFsRm9yUHJpc21hID0gZ2xvYmFsVGhpcyBhcyB1bmtub3duIGFzIHtcclxuICBwcmlzbWE6IFByaXNtYUNsaWVudCB8IHVuZGVmaW5lZFxyXG59XHJcblxyXG4vLyBDb25maWd1cmUgZGF0YWJhc2UgVVJMIHdpdGggY29ubmVjdGlvbiBwb29sIHBhcmFtZXRlcnMgZm9yIFZlcmNlbFxyXG5jb25zdCBkYXRhYmFzZVVybCA9IHByb2Nlc3MuZW52LkRBVEFCQVNFX1VSTFxyXG5jb25zdCBvcHRpbWl6ZWREYXRhYmFzZVVybCA9IGRhdGFiYXNlVXJsID8gXHJcbiAgYCR7ZGF0YWJhc2VVcmx9P2Nvbm5lY3Rpb25fbGltaXQ9MSZwb29sX3RpbWVvdXQ9MjAmY29ubmVjdF90aW1lb3V0PTYwJnNjaGVtYT1wdWJsaWNgIDogXHJcbiAgZGF0YWJhc2VVcmxcclxuXHJcbmV4cG9ydCBjb25zdCBwcmlzbWEgPSBnbG9iYWxGb3JQcmlzbWEucHJpc21hID8/IG5ldyBQcmlzbWFDbGllbnQoe1xyXG4gIGxvZzogcHJvY2Vzcy5lbnYuTk9ERV9FTlYgPT09ICdkZXZlbG9wbWVudCcgPyBbJ2Vycm9yJywgJ3dhcm4nXSA6IFsnZXJyb3InXSxcclxuICBkYXRhc291cmNlczoge1xyXG4gICAgZGI6IHtcclxuICAgICAgdXJsOiBvcHRpbWl6ZWREYXRhYmFzZVVybCxcclxuICAgIH0sXHJcbiAgfSxcclxufSlcclxuXHJcbi8vIFByb3Blcmx5IGRpc2Nvbm5lY3Qgb24gcHJvY2VzcyB0ZXJtaW5hdGlvblxyXG5pZiAocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJykge1xyXG4gIGdsb2JhbEZvclByaXNtYS5wcmlzbWEgPSBwcmlzbWFcclxufVxyXG5cclxuLy8gR3JhY2VmdWwgc2h1dGRvd25cclxucHJvY2Vzcy5vbignYmVmb3JlRXhpdCcsIGFzeW5jICgpID0+IHtcclxuICBhd2FpdCBwcmlzbWEuJGRpc2Nvbm5lY3QoKVxyXG59KVxyXG5cclxucHJvY2Vzcy5vbignU0lHSU5UJywgYXN5bmMgKCkgPT4ge1xyXG4gIGF3YWl0IHByaXNtYS4kZGlzY29ubmVjdCgpXHJcbiAgcHJvY2Vzcy5leGl0KDApXHJcbn0pXHJcblxyXG5wcm9jZXNzLm9uKCdTSUdURVJNJywgYXN5bmMgKCkgPT4ge1xyXG4gIGF3YWl0IHByaXNtYS4kZGlzY29ubmVjdCgpXHJcbiAgcHJvY2Vzcy5leGl0KDApXHJcbn0pXHJcblxyXG5leHBvcnQgZGVmYXVsdCBwcmlzbWFcclxuIl0sIm5hbWVzIjpbIlByaXNtYUNsaWVudCIsImdsb2JhbEZvclByaXNtYSIsImdsb2JhbFRoaXMiLCJkYXRhYmFzZVVybCIsInByb2Nlc3MiLCJlbnYiLCJEQVRBQkFTRV9VUkwiLCJvcHRpbWl6ZWREYXRhYmFzZVVybCIsInByaXNtYSIsImxvZyIsImRhdGFzb3VyY2VzIiwiZGIiLCJ1cmwiLCJvbiIsIiRkaXNjb25uZWN0IiwiZXhpdCJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./lib/db.ts\n");

/***/ })

};
;

// load runtime
var __webpack_require__ = require("../../../../webpack-runtime.js");
__webpack_require__.C(exports);
var __webpack_exec__ = (moduleId) => (__webpack_require__(__webpack_require__.s = moduleId))
var __webpack_exports__ = __webpack_require__.X(0, ["vendor-chunks/next"], () => (__webpack_exec__("(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fattendance%2Fstats%2Froute&page=%2Fapi%2Fattendance%2Fstats%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fattendance%2Fstats%2Froute.ts&appDir=C%3A%5CUsers%5CUSER%5CDesktop%5CLibrary%20Project%5Capp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=C%3A%5CUsers%5CUSER%5CDesktop%5CLibrary%20Project&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!")));
module.exports = __webpack_exports__;

})();