exports.id=850,exports.ids=[850],exports.modules={5812:(e,r,t)=>{Promise.resolve().then(t.bind(t,3819)),Promise.resolve().then(t.bind(t,8896)),Promise.resolve().then(t.bind(t,2807)),Promise.resolve().then(t.bind(t,381))},8781:(e,r,t)=>{Promise.resolve().then(t.t.bind(t,2994,23)),Promise.resolve().then(t.t.bind(t,6114,23)),Promise.resolve().then(t.t.bind(t,9727,23)),Promise.resolve().then(t.t.bind(t,9671,23)),Promise.resolve().then(t.t.bind(t,1868,23)),Promise.resolve().then(t.t.bind(t,4759,23))},3819:(e,r,t)=>{"use strict";t.d(r,{AuthProvider:()=>c,a:()=>y});var a=t(326),o=t(7577),s=t(381);let i=(0,o.createContext)(null),n={user:null,isAuthenticated:!1,loading:!1,error:null},d=(e,r)=>{switch(r.type){case"LOGIN_START":return{...e,loading:!0,error:null};case"LOGIN_SUCCESS":return{...e,user:r.payload,isAuthenticated:!0,loading:!1,error:null};case"LOGIN_FAILURE":return{...e,user:null,isAuthenticated:!1,loading:!1,error:r.payload};case"LOGOUT":return{...e,user:null,isAuthenticated:!1,loading:!1,error:null};case"CLEAR_ERROR":return{...e,error:null};case"SET_LOADING":return{...e,loading:r.payload};default:return e}},l=e=>{switch(e){case"ADMIN":return["all"];case"LIBRARIAN":return["books:read","books:create","books:update","books:delete","members:read","members:create","members:update","members:delete","borrowing:read","borrowing:create","borrowing:update","reservations:read","reservations:create","reservations:update","attendance:read","attendance:create","manage_attendance","reports:read","dashboard:read","settings:read"];case"MEMBER":return["books:read","borrowing:read","reservations:read","reservations:create","attendance:create"];default:return[]}},c=({children:e})=>{let[r,t]=(0,o.useReducer)(d,n);(0,o.useEffect)(()=>{let e=localStorage.getItem("library_user"),r=localStorage.getItem("token");if(e&&r)try{let r=JSON.parse(e);t({type:"LOGIN_SUCCESS",payload:r})}catch(e){localStorage.removeItem("library_user"),localStorage.removeItem("token")}},[]);let c=async(e,r)=>{t({type:"LOGIN_START"});try{let a=await fetch("/api/auth/login",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:e,password:r})}),o=await a.json();if(a.ok){let e={...o.user,permissions:l(o.user.role)};t({type:"LOGIN_SUCCESS",payload:e}),localStorage.setItem("library_user",JSON.stringify(e)),localStorage.setItem("token",o.token),s.ZP.success(`Welcome back, ${e.name}!`)}else t({type:"LOGIN_FAILURE",payload:o.error||"Login failed"}),s.ZP.error(o.error||"Login failed")}catch(e){t({type:"LOGIN_FAILURE",payload:"Login failed. Please try again."}),s.ZP.error("Login failed. Please try again.")}},y=async(e,r,a,o="MEMBER")=>{t({type:"LOGIN_START"});try{let i=await fetch("/api/auth/register",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:e,email:r,password:a,role:o})}),n=await i.json();if(i.ok){let e={...n.user,permissions:l(n.user.role)};t({type:"LOGIN_SUCCESS",payload:e}),localStorage.setItem("library_user",JSON.stringify(e)),localStorage.setItem("token",n.token),s.ZP.success(`Welcome, ${e.name}!`)}else t({type:"LOGIN_FAILURE",payload:n.error||"Registration failed"}),s.ZP.error(n.error||"Registration failed")}catch(e){t({type:"LOGIN_FAILURE",payload:"Registration failed. Please try again."}),s.ZP.error("Registration failed. Please try again.")}};return a.jsx(i.Provider,{value:{state:r,login:c,register:y,logout:()=>{t({type:"LOGOUT"}),localStorage.removeItem("library_user"),localStorage.removeItem("token"),s.ZP.success("Logged out successfully")},clearError:()=>{t({type:"CLEAR_ERROR"})},hasPermission:e=>!!r.user&&(!!r.user.permissions.includes("all")||r.user.permissions.includes(e))},children:e})},y=()=>{let e=(0,o.useContext)(i);if(!e)throw Error("useAuth must be used within an AuthProvider");return e}},8896:(e,r,t)=>{"use strict";t.d(r,{LibraryProvider:()=>y,y:()=>p});var a=t(326),o=t(7577),s=t(381),i=t(2807);let n=(0,o.createContext)(null),d={books:[],members:[],borrowings:[],reservations:[],attendance:[],currentUser:null,loading:!1,error:null},l=(e,r)=>{switch(r.type){case"SET_LOADING":return{...e,loading:r.payload};case"SET_ERROR":return{...e,error:r.payload};case"SET_BOOKS":return{...e,books:r.payload};case"ADD_BOOK":return{...e,books:[...e.books,r.payload]};case"UPDATE_BOOK":return{...e,books:e.books.map(e=>e.id===r.payload.id?r.payload:e)};case"DELETE_BOOK":return{...e,books:e.books.filter(e=>e.id!==r.payload)};case"SET_MEMBERS":return{...e,members:r.payload};case"ADD_MEMBER":return{...e,members:[...e.members,r.payload]};case"UPDATE_MEMBER":return{...e,members:e.members.map(e=>e.id===r.payload.id?r.payload:e)};case"DELETE_MEMBER":return{...e,members:e.members.filter(e=>e.id!==r.payload)};case"SET_BORROWINGS":return{...e,borrowings:r.payload};case"ADD_BORROWING":return{...e,borrowings:[...e.borrowings,r.payload]};case"RETURN_BOOK":return{...e,borrowings:e.borrowings.map(e=>e.id===r.payload.id?r.payload:e)};case"SET_RESERVATIONS":return{...e,reservations:r.payload};case"ADD_RESERVATION":return{...e,reservations:[...e.reservations,r.payload]};case"SET_ATTENDANCE":return{...e,attendance:r.payload};case"ADD_ATTENDANCE":return{...e,attendance:[...e.attendance,r.payload]};case"SET_CURRENT_USER":return{...e,currentUser:r.payload};default:return e}},c=async(e,r={})=>{let t=localStorage.getItem("token"),a=await fetch(e,{...r,headers:{"Content-Type":"application/json",...t&&{Authorization:`Bearer ${t}`},...r.headers}});if(!a.ok)throw Error((await a.json()).error||"API call failed");return a.json()},y=({children:e})=>{let[r,t]=(0,o.useReducer)(l,d),{addNotification:y}=(0,i.z)(),p=async()=>{try{t({type:"SET_LOADING",payload:!0});let e=await c("/api/books");t({type:"SET_BOOKS",payload:e.books||e})}catch(e){console.error("Error fetching books:",e),t({type:"SET_ERROR",payload:"Failed to fetch books"}),s.ZP.error("Failed to fetch books")}finally{t({type:"SET_LOADING",payload:!1})}},u=async()=>{try{t({type:"SET_LOADING",payload:!0});let e=await c("/api/persons?personType=MEMBER&limit=100"),r=e.persons?.map(e=>({id:e.id,name:e.name,email:e.email,phone:e.phone||"",address:e.address||"",membershipDate:e.membershipDate||e.createdAt,status:"ACTIVE"===e.status?"ACTIVE":"INACTIVE",createdAt:e.createdAt,updatedAt:e.updatedAt}))||[];t({type:"SET_MEMBERS",payload:r})}catch(e){console.error("Error fetching members:",e),t({type:"SET_ERROR",payload:"Failed to fetch members"}),s.ZP.error("Failed to fetch members")}finally{t({type:"SET_LOADING",payload:!1})}},m=async()=>{try{t({type:"SET_LOADING",payload:!0});let e=await c("/api/borrowings");t({type:"SET_BORROWINGS",payload:e.borrowings||e})}catch(e){console.error("Error fetching borrowings:",e),t({type:"SET_ERROR",payload:"Failed to fetch borrowings"}),s.ZP.error("Failed to fetch borrowings")}finally{t({type:"SET_LOADING",payload:!1})}},E=async()=>{try{t({type:"SET_LOADING",payload:!0});let e=await c("/api/reservations");t({type:"SET_RESERVATIONS",payload:e.reservations||e})}catch(e){console.error("Error fetching reservations:",e),t({type:"SET_ERROR",payload:"Failed to fetch reservations"}),s.ZP.error("Failed to fetch reservations")}finally{t({type:"SET_LOADING",payload:!1})}},b=async()=>{try{t({type:"SET_LOADING",payload:!0});let e=await c("/api/attendance");t({type:"SET_ATTENDANCE",payload:e.attendance||e})}catch(e){console.error("Error fetching attendance:",e),t({type:"SET_ERROR",payload:"Failed to fetch attendance"}),s.ZP.error("Failed to fetch attendance")}finally{t({type:"SET_LOADING",payload:!1})}};return(0,o.useEffect)(()=>{(async()=>{try{await Promise.all([p(),u(),m(),E(),b()])}catch(e){console.error("Error loading initial data:",e),s.ZP.error("Error loading library data")}})()},[]),a.jsx(n.Provider,{value:{state:r,dispatch:t,addBook:async e=>{try{t({type:"SET_LOADING",payload:!0});let r=await c("/api/books",{method:"POST",body:JSON.stringify(e)});t({type:"ADD_BOOK",payload:r}),s.ZP.success("Book added successfully!"),y({type:"success",title:"New Book Added",message:`"${e.title}" by ${e.author} has been added to the catalog.`})}catch(e){console.error("Error adding book:",e),s.ZP.error("Failed to add book")}finally{t({type:"SET_LOADING",payload:!1})}},updateBook:async e=>{try{t({type:"SET_LOADING",payload:!0});let r=await c(`/api/books/${e.id}`,{method:"PUT",body:JSON.stringify(e)});t({type:"UPDATE_BOOK",payload:r}),s.ZP.success("Book updated successfully!"),y({type:"info",title:"Book Updated",message:`"${e.title}" has been updated.`})}catch(e){console.error("Error updating book:",e),s.ZP.error("Failed to update book")}finally{t({type:"SET_LOADING",payload:!1})}},deleteBook:async e=>{try{t({type:"SET_LOADING",payload:!0}),await c(`/api/books/${e}`,{method:"DELETE"}),t({type:"DELETE_BOOK",payload:e}),s.ZP.success("Book deleted successfully!"),y({type:"warning",title:"Book Deleted",message:`A book with ID ${e} has been removed from the catalog.`})}catch(e){console.error("Error deleting book:",e),s.ZP.error("Failed to delete book")}finally{t({type:"SET_LOADING",payload:!1})}},addMember:async e=>{try{t({type:"SET_LOADING",payload:!0});let r={name:e.name,email:e.email,phone:e.phone,address:e.address,personType:"MEMBER",status:"ACTIVE"},a=await c("/api/persons",{method:"POST",body:JSON.stringify(r)}),o={id:a.id,name:a.name,email:a.email,phone:a.phone||"",address:a.address||"",membershipDate:a.membershipDate||a.createdAt,status:"ACTIVE"===a.status?"ACTIVE":"INACTIVE",createdAt:a.createdAt,updatedAt:a.updatedAt};t({type:"ADD_MEMBER",payload:o}),s.ZP.success("Member added successfully!"),y({type:"success",title:"New Member Added",message:`${e.name} has been added as a new member.`})}catch(e){console.error("Error adding member:",e),s.ZP.error("Failed to add member")}finally{t({type:"SET_LOADING",payload:!1})}},updateMember:async e=>{try{t({type:"SET_LOADING",payload:!0});let r={name:e.name,email:e.email,phone:e.phone,address:e.address,personType:"MEMBER",status:"ACTIVE"===e.status?"ACTIVE":"INACTIVE"},a=await c(`/api/persons/${e.id}`,{method:"PUT",body:JSON.stringify(r)}),o={id:a.id,name:a.name,email:a.email,phone:a.phone||"",address:a.address||"",membershipDate:a.membershipDate||a.createdAt,status:"ACTIVE"===a.status?"ACTIVE":"INACTIVE",createdAt:a.createdAt,updatedAt:a.updatedAt};t({type:"UPDATE_MEMBER",payload:o}),s.ZP.success("Member updated successfully!"),y({type:"info",title:"Member Updated",message:`${e.name}'s details have been updated.`})}catch(e){console.error("Error updating member:",e),s.ZP.error("Failed to update member")}finally{t({type:"SET_LOADING",payload:!1})}},deleteMember:async e=>{try{t({type:"SET_LOADING",payload:!0}),await c(`/api/persons/${e}`,{method:"DELETE"}),t({type:"DELETE_MEMBER",payload:e}),s.ZP.success("Member deleted successfully!"),y({type:"warning",title:"Member Deleted",message:"A member has been removed from the system."})}catch(e){console.error("Error deleting member:",e),s.ZP.error("Failed to delete member")}finally{t({type:"SET_LOADING",payload:!1})}},borrowBook:async e=>{try{t({type:"SET_LOADING",payload:!0});let r=await c("/api/borrowings",{method:"POST",body:JSON.stringify(e)});t({type:"ADD_BORROWING",payload:r}),s.ZP.success("Book borrowed successfully!"),y({type:"success",title:"Book Borrowed",message:`Book ID ${e.bookId} borrowed by Member ID ${e.memberId}.`})}catch(e){console.error("Error borrowing book:",e),s.ZP.error("Failed to borrow book")}finally{t({type:"SET_LOADING",payload:!1})}},returnBook:async e=>{try{t({type:"SET_LOADING",payload:!0});let r=await c(`/api/borrowings/${e}`,{method:"PUT",body:JSON.stringify({action:"return"})});t({type:"RETURN_BOOK",payload:r}),s.ZP.success("Book returned successfully!"),y({type:"info",title:"Book Returned",message:`Borrowing ID ${e} has been returned.`})}catch(e){console.error("Error returning book:",e),s.ZP.error("Failed to return book")}finally{t({type:"SET_LOADING",payload:!1})}},addReservation:async e=>{try{t({type:"SET_LOADING",payload:!0});let r=await c("/api/reservations",{method:"POST",body:JSON.stringify(e)});t({type:"ADD_RESERVATION",payload:r}),s.ZP.success("Book reserved successfully!"),y({type:"info",title:"Book Reserved",message:`Book ID ${e.bookId} reserved by Member ID ${e.memberId}.`})}catch(e){console.error("Error adding reservation:",e),s.ZP.error("Failed to reserve book")}finally{t({type:"SET_LOADING",payload:!1})}},addAttendance:async e=>{try{t({type:"SET_LOADING",payload:!0});let r=await c("/api/attendance",{method:"POST",body:JSON.stringify(e)});t({type:"ADD_ATTENDANCE",payload:r}),s.ZP.success("Attendance recorded successfully!"),y({type:"info",title:"Attendance Recorded",message:`Member ID ${e.memberId} checked in.`})}catch(e){console.error("Error adding attendance:",e),s.ZP.error("Failed to record attendance")}finally{t({type:"SET_LOADING",payload:!1})}},getRecommendations:e=>{let t=r.borrowings.filter(r=>r.memberId===e).map(e=>r.books.find(r=>r.id===e.bookId)).filter(Boolean),a=t.map(e=>e.category),o=a.sort((e,r)=>a.filter(r=>r===e).length-a.filter(e=>e===r).length).pop();return r.books.filter(e=>e.category===o&&!t.some(r=>r.id===e.id)&&"AVAILABLE"===e.status).slice(0,3)},fetchBooks:p,fetchMembers:u,fetchBorrowings:m,fetchReservations:E,fetchAttendance:b},children:e})},p=()=>{let e=(0,o.useContext)(n);if(!e)throw Error("useLibrary must be used within a LibraryProvider");return e}},2807:(e,r,t)=>{"use strict";t.d(r,{NotificationProvider:()=>l,z:()=>c});var a=t(326),o=t(7577),s=t(381);let i=(0,o.createContext)(null),n={notifications:[],unreadCount:0},d=(e,r)=>{switch(r.type){case"ADD_NOTIFICATION":let t={...r.payload,id:Date.now().toString(),timestamp:new Date,read:!1};return{...e,notifications:[t,...e.notifications],unreadCount:e.unreadCount+1};case"MARK_AS_READ":return{...e,notifications:e.notifications.map(e=>e.id===r.payload?{...e,read:!0}:e),unreadCount:Math.max(0,e.unreadCount-1)};case"MARK_ALL_AS_READ":return{...e,notifications:e.notifications.map(e=>({...e,read:!0})),unreadCount:0};case"REMOVE_NOTIFICATION":let a=e.notifications.find(e=>e.id===r.payload);return{...e,notifications:e.notifications.filter(e=>e.id!==r.payload),unreadCount:a&&!a.read?Math.max(0,e.unreadCount-1):e.unreadCount};case"CLEAR_ALL_NOTIFICATIONS":return{...e,notifications:[],unreadCount:0};default:return e}},l=({children:e})=>{let[r,t]=(0,o.useReducer)(d,n);return(0,o.useEffect)(()=>{let e=localStorage.getItem("library_notifications");if(e)try{JSON.parse(e).forEach(e=>{t({type:"ADD_NOTIFICATION",payload:e})})}catch(e){localStorage.removeItem("library_notifications")}},[]),(0,o.useEffect)(()=>{localStorage.setItem("library_notifications",JSON.stringify(r.notifications))},[r.notifications]),a.jsx(i.Provider,{value:{state:r,addNotification:e=>{switch(t({type:"ADD_NOTIFICATION",payload:e}),e.type){case"success":s.ZP.success(e.message);break;case"error":s.ZP.error(e.message);break;case"warning":(0,s.ZP)(e.message,{icon:"⚠️"});break;default:(0,s.ZP)(e.message)}},markAsRead:e=>{t({type:"MARK_AS_READ",payload:e})},markAllAsRead:()=>{t({type:"MARK_ALL_AS_READ"})},removeNotification:e=>{t({type:"REMOVE_NOTIFICATION",payload:e})},clearAllNotifications:()=>{t({type:"CLEAR_ALL_NOTIFICATIONS"})}},children:e})},c=()=>{let e=(0,o.useContext)(i);if(!e)throw Error("useNotifications must be used within a NotificationProvider");return e}},7438:(e,r,t)=>{"use strict";t.r(r),t.d(r,{default:()=>p,metadata:()=>y});var a=t(9510),o=t(7366),s=t.n(o);t(7272);var i=t(9125),n=t(8570);let d=(0,n.createProxy)(String.raw`C:\Users\USER\Desktop\Library Project\app\context\LibraryContext.tsx#LibraryProvider`);(0,n.createProxy)(String.raw`C:\Users\USER\Desktop\Library Project\app\context\LibraryContext.tsx#useLibrary`);let l=(0,n.createProxy)(String.raw`C:\Users\USER\Desktop\Library Project\app\context\AuthContext.tsx#AuthProvider`);(0,n.createProxy)(String.raw`C:\Users\USER\Desktop\Library Project\app\context\AuthContext.tsx#useAuth`);let c=(0,n.createProxy)(String.raw`C:\Users\USER\Desktop\Library Project\app\context\NotificationContext.tsx#NotificationProvider`);(0,n.createProxy)(String.raw`C:\Users\USER\Desktop\Library Project\app\context\NotificationContext.tsx#useNotifications`);let y={title:"Robert Aboagye Mensah Community Library",description:"Community Library Management System"};function p({children:e}){return a.jsx("html",{lang:"en",children:a.jsx("body",{className:s().className,children:a.jsx(l,{children:a.jsx(c,{children:(0,a.jsxs)(d,{children:[e,a.jsx(i.x7,{position:"top-right"})]})})})})})}},7272:()=>{}};