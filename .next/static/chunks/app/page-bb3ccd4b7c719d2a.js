(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[931],{350:function(e,s,t){Promise.resolve().then(t.bind(t,4005))},4005:function(e,s,t){"use strict";t.r(s),t.d(s,{default:function(){return eV}});var a=t(7437),r=t(2265),l=t(6501),n=t(6124),i=t(7367),c=t(5617),o=t(5048),d=()=>{let{login:e,state:s}=(0,l.a)(),[t,d]=(0,r.useState)({username:"",password:""}),[x,m]=(0,r.useState)(!1),u=async s=>{s.preventDefault(),await e(t.username,t.password)},h=e=>{d(s=>({...s,[e.target.name]:e.target.value}))};return(0,a.jsx)("div",{className:"min-h-screen flex items-center justify-center bg-gray-50 py-12 px-4 sm:px-6 lg:px-8",children:(0,a.jsxs)("div",{className:"max-w-md w-full space-y-8",children:[(0,a.jsxs)("div",{children:[(0,a.jsxs)("div",{className:"mx-auto h-20 w-20 relative",children:[(0,a.jsx)("img",{src:"/ST peter.png",alt:"Robert Aboagye Mensah Community Library",className:"h-20 w-20 rounded-full object-cover border-4 border-yellow-400 shadow-lg",onError:e=>{e.currentTarget.style.display="none";let s=e.currentTarget.nextElementSibling;s&&(s.style.display="flex")}}),(0,a.jsx)("div",{className:"h-20 w-20 rounded-full bg-gradient-to-br from-blue-800 to-blue-600 border-4 border-yellow-400 hidden items-center justify-center text-white shadow-lg",children:(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)("div",{className:"text-red-400 text-2xl font-bold",children:"✚"}),(0,a.jsx)("div",{className:"text-sm font-bold text-yellow-200",children:"MC"})]})})]}),(0,a.jsx)("h2",{className:"mt-6 text-center text-3xl font-extrabold text-gray-900",children:"Sign in to your account"}),(0,a.jsx)("p",{className:"mt-2 text-center text-lg font-semibold text-blue-800",children:"Robert Aboagye Mensah"}),(0,a.jsx)("p",{className:"text-center text-sm text-gray-600",children:"Community Library"})]}),(0,a.jsxs)("form",{className:"mt-8 space-y-6",onSubmit:u,children:[(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{htmlFor:"username",className:"block text-sm font-medium text-gray-700",children:"Username"}),(0,a.jsxs)("div",{className:"mt-1 relative",children:[(0,a.jsx)("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:(0,a.jsx)(n.Z,{className:"h-5 w-5 text-gray-400"})}),(0,a.jsx)("input",{id:"username",name:"username",type:"text",required:!0,value:t.username,onChange:h,className:"appearance-none rounded-lg relative block w-full pl-10 pr-3 py-3 border border-gray-300 placeholder-gray-500 text-gray-900 focus:outline-none focus:ring-blue-500 focus:border-blue-500 focus:z-10 sm:text-sm",placeholder:"Enter your username"})]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{htmlFor:"password",className:"block text-sm font-medium text-gray-700",children:"Password"}),(0,a.jsxs)("div",{className:"mt-1 relative",children:[(0,a.jsx)("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:(0,a.jsx)(i.Z,{className:"h-5 w-5 text-gray-400"})}),(0,a.jsx)("input",{id:"password",name:"password",type:x?"text":"password",required:!0,value:t.password,onChange:h,className:"appearance-none rounded-lg relative block w-full pl-10 pr-10 py-3 border border-gray-300 placeholder-gray-500 text-gray-900 focus:outline-none focus:ring-blue-500 focus:border-blue-500 focus:z-10 sm:text-sm",placeholder:"Enter your password"}),(0,a.jsx)("div",{className:"absolute inset-y-0 right-0 pr-3 flex items-center",children:(0,a.jsx)("button",{type:"button",onClick:()=>m(!x),className:"text-gray-400 hover:text-gray-600",children:x?(0,a.jsx)(c.Z,{className:"h-5 w-5"}):(0,a.jsx)(o.Z,{className:"h-5 w-5"})})})]})]})]}),s.error&&(0,a.jsx)("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4",children:(0,a.jsx)("p",{className:"text-sm text-red-600",children:s.error})}),(0,a.jsx)("div",{children:(0,a.jsx)("button",{type:"submit",disabled:s.loading,className:"group relative w-full flex justify-center py-3 px-4 border border-transparent text-sm font-medium rounded-lg text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 disabled:opacity-50 disabled:cursor-not-allowed",children:s.loading?(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsx)("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2"}),"Signing in..."]}):"Sign in"})}),(0,a.jsx)("div",{className:"mt-6",children:(0,a.jsxs)("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:[(0,a.jsx)("h3",{className:"text-sm font-medium text-blue-800 mb-2",children:"Demo Accounts:"}),(0,a.jsxs)("div",{className:"text-xs text-blue-700 space-y-1",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("strong",{children:"Admin:"})," username: admin, password: password"]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("strong",{children:"Librarian:"})," username: librarian, password: password"]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("strong",{children:"Member:"})," username: member, password: password"]})]})]})})]})]})})},x=e=>{let{children:s,requiredPermissions:t=[]}=e,{state:r,hasPermission:n}=(0,l.a)();return r.isAuthenticated?t.length>0&&!t.every(e=>n(e))?(0,a.jsx)("div",{className:"min-h-screen flex items-center justify-center bg-gray-50",children:(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)("div",{className:"mx-auto h-16 w-16 bg-red-100 rounded-full flex items-center justify-center mb-4",children:(0,a.jsx)("svg",{className:"h-8 w-8 text-red-600",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.964-.833-2.732 0L3.732 16.5c-.77.833.192 2.5 1.732 2.5z"})})}),(0,a.jsx)("h2",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Access Denied"}),(0,a.jsx)("p",{className:"text-gray-600",children:"You don't have permission to access this page."})]})}):(0,a.jsx)(a.Fragment,{children:s}):(0,a.jsx)(d,{})},m=t(4891),u=t(420),h=t(217),g=t(3883),p=t(6606),b=()=>{let{state:e,logout:s}=(0,l.a)(),[t,i]=(0,r.useState)(!1);return e.user?(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsxs)("button",{onClick:()=>i(!t),className:"flex items-center space-x-3 p-2 rounded-lg hover:bg-gray-100 transition-colors",children:[(0,a.jsx)("div",{className:"w-8 h-8 bg-blue-600 rounded-full flex items-center justify-center",children:(0,a.jsx)(n.Z,{className:"h-5 w-5 text-white"})}),(0,a.jsxs)("div",{className:"text-left",children:[(0,a.jsx)("p",{className:"text-sm font-medium text-gray-900",children:e.user.name}),(0,a.jsx)("p",{className:"text-xs text-gray-600 capitalize",children:e.user.role})]})]}),t&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("div",{className:"fixed inset-0 z-10",onClick:()=>i(!1)}),(0,a.jsxs)("div",{className:"absolute right-0 mt-2 w-64 bg-white rounded-lg shadow-lg border border-gray-200 z-20",children:[(0,a.jsx)("div",{className:"p-4 border-b border-gray-200",children:(0,a.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,a.jsx)("div",{className:"w-10 h-10 bg-blue-600 rounded-full flex items-center justify-center",children:(0,a.jsx)(n.Z,{className:"h-6 w-6 text-white"})}),(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"font-medium text-gray-900",children:e.user.name}),(0,a.jsx)("p",{className:"text-sm text-gray-600",children:e.user.email}),(0,a.jsx)("span",{className:"inline-flex px-2 py-1 text-xs font-medium rounded-full mt-1 ".concat((e=>{switch(e){case"admin":return"bg-red-100 text-red-800";case"librarian":return"bg-blue-100 text-blue-800";case"member":return"bg-green-100 text-green-800";default:return"bg-gray-100 text-gray-800"}})(e.user.role)),children:e.user.role})]})]})}),(0,a.jsxs)("div",{className:"py-2",children:[(0,a.jsxs)("button",{className:"w-full flex items-center space-x-3 px-4 py-2 text-sm text-gray-700 hover:bg-gray-100",children:[(0,a.jsx)(h.Z,{className:"h-4 w-4"}),(0,a.jsx)("span",{children:"Notifications"})]}),(0,a.jsxs)("button",{className:"w-full flex items-center space-x-3 px-4 py-2 text-sm text-gray-700 hover:bg-gray-100",children:[(0,a.jsx)(g.Z,{className:"h-4 w-4"}),(0,a.jsx)("span",{children:"Settings"})]}),(0,a.jsx)("hr",{className:"my-2"}),(0,a.jsxs)("button",{onClick:s,className:"w-full flex items-center space-x-3 px-4 py-2 text-sm text-red-600 hover:bg-red-50",children:[(0,a.jsx)(p.Z,{className:"h-4 w-4"}),(0,a.jsx)("span",{children:"Sign out"})]})]})]})]})]}):null},y=t(9124),j=t(1914),f=t(8279),N=t(3869),v=t(607),w=t(4754),k=()=>{let{state:e,markAsRead:s,markAllAsRead:t,removeNotification:l,clearAllNotifications:n}=(0,y.z)(),[i,c]=(0,r.useState)(!1),o=e=>{switch(e){case"success":return(0,a.jsx)(j.Z,{className:"h-5 w-5 text-green-600"});case"error":return(0,a.jsx)(f.Z,{className:"h-5 w-5 text-red-600"});case"warning":return(0,a.jsx)(N.Z,{className:"h-5 w-5 text-yellow-600"});default:return(0,a.jsx)(v.Z,{className:"h-5 w-5 text-blue-600"})}};return(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsxs)("button",{onClick:()=>c(!i),className:"relative p-2 text-gray-600 hover:text-gray-900 hover:bg-gray-100 rounded-lg transition-colors",children:[(0,a.jsx)(h.Z,{className:"h-5 w-5"}),e.unreadCount>0&&(0,a.jsx)("span",{className:"absolute top-1 right-1 h-2 w-2 bg-red-500 rounded-full"})]}),i&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("div",{className:"fixed inset-0 z-10",onClick:()=>c(!1)}),(0,a.jsxs)("div",{className:"absolute right-0 mt-2 w-80 bg-white rounded-lg shadow-lg border border-gray-200 z-20 max-h-96 overflow-hidden",children:[(0,a.jsx)("div",{className:"p-4 border-b border-gray-200",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsx)("h3",{className:"text-lg font-semibold text-gray-900",children:"Notifications"}),(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[e.unreadCount>0&&(0,a.jsx)("button",{onClick:t,className:"text-sm text-blue-600 hover:text-blue-700",children:"Mark all read"}),(0,a.jsx)("button",{onClick:n,className:"text-sm text-gray-500 hover:text-gray-700",children:"Clear all"})]})]})}),(0,a.jsx)("div",{className:"max-h-80 overflow-y-auto",children:0===e.notifications.length?(0,a.jsxs)("div",{className:"p-6 text-center text-gray-500",children:[(0,a.jsx)(h.Z,{className:"h-8 w-8 mx-auto mb-2 text-gray-400"}),(0,a.jsx)("p",{children:"No notifications"})]}):(0,a.jsx)("div",{className:"divide-y divide-gray-200",children:e.notifications.map(e=>(0,a.jsx)("div",{className:"p-4 hover:bg-gray-50 transition-colors ".concat(e.read?"":"bg-blue-50"),children:(0,a.jsxs)("div",{className:"flex items-start space-x-3",children:[(0,a.jsx)("div",{className:"flex-shrink-0",children:o(e.type)}),(0,a.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsx)("p",{className:"text-sm font-medium text-gray-900",children:e.title}),(0,a.jsxs)("div",{className:"flex items-center space-x-1",children:[!e.read&&(0,a.jsx)("div",{className:"h-2 w-2 bg-blue-600 rounded-full"}),(0,a.jsx)("button",{onClick:()=>l(e.id),className:"text-gray-400 hover:text-gray-600",children:(0,a.jsx)(m.Z,{className:"h-4 w-4"})})]})]}),(0,a.jsx)("p",{className:"text-sm text-gray-600 mt-1",children:e.message}),(0,a.jsxs)("div",{className:"flex items-center justify-between mt-2",children:[(0,a.jsx)("p",{className:"text-xs text-gray-500",children:e.timestamp.toLocaleString()}),!e.read&&(0,a.jsxs)("button",{onClick:()=>s(e.id),className:"text-xs text-blue-600 hover:text-blue-700 flex items-center space-x-1",children:[(0,a.jsx)(w.Z,{className:"h-3 w-3"}),(0,a.jsx)("span",{children:"Mark as read"})]})]}),e.action&&(0,a.jsx)("button",{onClick:e.action.onClick,className:"mt-2 text-xs bg-blue-600 text-white px-2 py-1 rounded hover:bg-blue-700",children:e.action.label})]})]})},e.id))})})]})]})]})},S=t(1338),C=t(4166),D=t(9150),A=t(8470),I=t(8399),Z=e=>{let{onNavigate:s}=e,{hasPermission:t}=(0,l.a)(),[i,c]=(0,r.useState)(!1),[o,d]=(0,r.useState)(""),[x,u]=(0,r.useState)([]),[h,g]=(0,r.useState)(!1),[p,b]=(0,r.useState)(-1),y=(0,r.useRef)(null),j=(0,r.useRef)(null);if(!t("members:read")&&!t("users:read"))return null;(0,r.useEffect)(()=>{let e=e=>{y.current&&!y.current.contains(e.target)&&(c(!1),b(-1))};return document.addEventListener("mousedown",e),()=>document.removeEventListener("mousedown",e)},[]),(0,r.useEffect)(()=>{let e=setTimeout(async()=>{if(o.trim().length<2){u([]);return}g(!0);try{let e=localStorage.getItem("token"),s=await fetch("/api/search?q=".concat(encodeURIComponent(o),"&limit=8"),{headers:{Authorization:"Bearer ".concat(e)}});if(s.ok){let e=await s.json();u(e.results||[])}else u([])}catch(e){console.error("Search error:",e),u([])}finally{g(!1)}},300);return()=>clearTimeout(e)},[o]);let f=e=>{c(!1),d(""),u([]),b(-1),s(e.navigateTo,e.id),sessionStorage.setItem("highlightPersonId",e.id)},N=e=>{switch(e){case"member":case"legacy_member":return(0,a.jsx)(n.Z,{className:"h-4 w-4 text-blue-600"});case"visitor":return(0,a.jsx)(S.Z,{className:"h-4 w-4 text-green-600"});case"user":return(0,a.jsx)(C.Z,{className:"h-4 w-4 text-purple-600"});default:return(0,a.jsx)(n.Z,{className:"h-4 w-4 text-gray-600"})}},v=e=>{switch(e){case"member":case"legacy_member":return"border-l-blue-500 bg-blue-50";case"visitor":return"border-l-green-500 bg-green-50";case"user":return"border-l-purple-500 bg-purple-50";default:return"border-l-gray-500 bg-gray-50"}},w=e=>e?new Date(e).toLocaleDateString():"";return(0,a.jsxs)("div",{className:"relative",ref:y,children:[(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsx)("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:(0,a.jsx)(D.Z,{className:"h-4 w-4 text-gray-400"})}),(0,a.jsx)("input",{ref:j,type:"text",placeholder:"Search people, members, visitors...",value:o,onChange:e=>{d(e.target.value),c(!0),b(-1)},onFocus:()=>c(!0),onKeyDown:e=>{if("ArrowDown"===e.key)e.preventDefault(),b(e=>Math.min(e+1,x.length-1));else if("ArrowUp"===e.key)e.preventDefault(),b(e=>Math.max(e-1,-1));else if("Enter"===e.key)e.preventDefault(),p>=0&&x[p]&&f(x[p]);else if("Escape"===e.key){var s;c(!1),b(-1),null===(s=j.current)||void 0===s||s.blur()}},className:"w-full pl-10 pr-10 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent"}),o&&(0,a.jsx)("button",{onClick:()=>{d(""),u([]),c(!1),b(-1)},className:"absolute inset-y-0 right-0 pr-3 flex items-center",children:(0,a.jsx)(m.Z,{className:"h-4 w-4 text-gray-400 hover:text-gray-600"})})]}),i&&(o.length>=2||x.length>0)&&(0,a.jsxs)("div",{className:"absolute top-full left-0 right-0 mt-1 bg-white border border-gray-200 rounded-lg shadow-lg z-50 max-h-96 overflow-y-auto",children:[h&&(0,a.jsxs)("div",{className:"px-4 py-3 text-center text-gray-500",children:[(0,a.jsx)("div",{className:"animate-spin rounded-full h-5 w-5 border-b-2 border-blue-600 mx-auto mb-2"}),"Searching..."]}),!h&&o.length>=2&&0===x.length&&(0,a.jsxs)("div",{className:"px-4 py-6 text-center text-gray-500",children:[(0,a.jsx)(D.Z,{className:"h-8 w-8 mx-auto mb-2 text-gray-300"}),(0,a.jsxs)("p",{className:"text-sm",children:['No people found for "',o,'"']}),(0,a.jsx)("p",{className:"text-xs text-gray-400 mt-1",children:"Try searching by name, email, phone, or library ID"})]}),!h&&x.length>0&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("div",{className:"px-3 py-2 bg-gray-50 border-b border-gray-200",children:(0,a.jsxs)("p",{className:"text-xs font-medium text-gray-600",children:["Found ",x.length," people • Click to navigate"]})}),x.map((e,s)=>(0,a.jsx)("div",{onClick:()=>f(e),className:"px-4 py-3 cursor-pointer border-l-4 transition-colors ".concat(s===p?"".concat(v(e.type)," border-l-4"):"hover:bg-gray-50 border-l-transparent"),children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-3 flex-1 min-w-0",children:[N(e.type),(0,a.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsx)("p",{className:"text-sm font-medium text-gray-900 truncate",children:e.name}),e.libraryId&&(0,a.jsx)("span",{className:"inline-flex items-center px-2 py-0.5 rounded text-xs font-medium bg-gray-100 text-gray-800",children:e.libraryId}),(0,a.jsx)("span",{className:"inline-flex items-center px-2 py-0.5 rounded-full text-xs font-medium ".concat("ACTIVE"===e.status?"bg-green-100 text-green-800":"bg-red-100 text-red-800"),children:e.status})]}),(0,a.jsx)("p",{className:"text-xs text-gray-500 truncate",children:e.subtitle}),e.membershipDate&&(0,a.jsxs)("div",{className:"flex items-center space-x-1 mt-1",children:[(0,a.jsx)(A.Z,{className:"h-3 w-3 text-gray-400"}),(0,a.jsxs)("p",{className:"text-xs text-gray-400",children:["Member since ",w(e.membershipDate)]})]})]})]}),(0,a.jsx)(I.Z,{className:"h-4 w-4 text-gray-400"})]})},"".concat(e.type,"-").concat(e.id))),x.length>=8&&(0,a.jsx)("div",{className:"px-4 py-2 bg-gray-50 border-t border-gray-200",children:(0,a.jsx)("p",{className:"text-xs text-gray-500 text-center",children:"Showing first 8 results. Be more specific to narrow down."})})]}),o.length<2&&o.length>0&&(0,a.jsx)("div",{className:"px-4 py-3 text-center text-gray-500",children:(0,a.jsx)("p",{className:"text-sm",children:"Type at least 2 characters to search"})})]})]})},E=e=>{let{onNavigate:s}=e,{state:t}=(0,l.a)(),[n,i]=(0,r.useState)(!1);return(0,a.jsxs)("nav",{className:"bg-white shadow-sm border-b border-gray-200 px-6 py-4",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsx)("div",{className:"flex items-center space-x-4",children:(0,a.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsx)("img",{src:"/ST peter.png",alt:"Robert Aboagye Mensah Community Library",className:"h-12 w-12 rounded-full object-cover border-2 border-yellow-400",onError:e=>{e.currentTarget.style.display="none";let s=e.currentTarget.nextElementSibling;s&&(s.style.display="flex")}}),(0,a.jsx)("div",{className:"h-12 w-12 rounded-full bg-gradient-to-br from-blue-800 to-blue-600 border-2 border-yellow-400 hidden items-center justify-center text-white shadow-lg",children:(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)("div",{className:"text-red-400 text-lg font-bold",children:"✚"}),(0,a.jsx)("div",{className:"text-xs font-bold text-yellow-200",children:"MC"})]})})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h1",{className:"text-xl font-bold text-gray-900",children:"Robert Aboagye Mensah"}),(0,a.jsx)("p",{className:"text-sm text-gray-600",children:"Community Library"})]})]})}),(0,a.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,a.jsx)("div",{className:"hidden md:block w-80",children:(0,a.jsx)(Z,{onNavigate:s})}),(0,a.jsx)(k,{}),t.user&&(0,a.jsx)(b,{}),(0,a.jsx)("button",{onClick:()=>i(!n),className:"md:hidden p-2 text-gray-600 hover:text-gray-900 hover:bg-gray-100 rounded-lg transition-colors",children:n?(0,a.jsx)(m.Z,{className:"h-5 w-5"}):(0,a.jsx)(u.Z,{className:"h-5 w-5"})})]})]}),n&&(0,a.jsx)("div",{className:"md:hidden mt-4",children:(0,a.jsx)(Z,{onNavigate:s})})]})},T=t(2009),B=t(1451),L=t(9778),R=t(4923),P=t(5809),M=t(7941),V=t(7189),F=e=>{let{activePage:s,setActivePage:t}=e,{state:r,hasPermission:n}=(0,l.a)(),i=[{key:"dashboard",icon:T.Z,label:"Dashboard",permission:"dashboard:read"},{key:"catalog",icon:B.Z,label:"Book Catalog",permission:"books:read"},{key:"members",icon:S.Z,label:"Member Management",permission:"members:read"},{key:"visitors",icon:L.Z,label:"People Management",permission:"members:read"},{key:"borrowing",icon:R.Z,label:"Borrowing System",permission:"borrowing:read"},{key:"attendance",icon:P.Z,label:"Attendance (Unified)",permission:"manage_attendance"},{key:"users",icon:C.Z,label:"User Management",permission:"all"},{key:"reports",icon:M.Z,label:"Reports & Analytics",permission:"reports:read"},{key:"settings",icon:g.Z,label:"Settings",permission:"settings:read"}],c=[{icon:V.Z,label:"Attendance Analytics",action:()=>t("tracking"),permission:"attendance:read"}],o=i.filter(e=>n(e.permission)),d=c.filter(e=>n(e.permission));return(0,a.jsx)("aside",{className:"w-64 bg-white shadow-sm border-r border-gray-200 min-h-screen",children:(0,a.jsxs)("div",{className:"p-6",children:[(0,a.jsx)("nav",{className:"space-y-2",children:o.map(e=>{let r=e.icon,l=s===e.key;return(0,a.jsxs)("button",{onClick:()=>t(e.key),className:"flex items-center space-x-3 px-3 py-2 rounded-lg transition-colors w-full text-left ".concat(l?"bg-blue-600 text-white":"text-gray-700 hover:bg-gray-100"),children:[(0,a.jsx)(r,{className:"h-5 w-5"}),(0,a.jsx)("span",{className:"font-medium",children:e.label})]},e.key)})}),d.length>0&&(0,a.jsxs)("div",{className:"mt-8 pt-6 border-t border-gray-200",children:[(0,a.jsx)("h3",{className:"text-xs font-semibold text-gray-500 uppercase tracking-wider mb-3",children:"Quick Actions"}),(0,a.jsx)("div",{className:"space-y-2",children:d.map((e,s)=>{let t=e.icon;return(0,a.jsxs)("button",{onClick:e.action,className:"flex items-center space-x-3 px-3 py-2 text-gray-700 hover:bg-gray-100 rounded-lg transition-colors w-full text-left",children:[(0,a.jsx)(t,{className:"h-5 w-5"}),(0,a.jsx)("span",{className:"font-medium",children:e.label})]},s)})})]}),r.user&&(0,a.jsxs)("div",{className:"mt-8 pt-6 border-t border-gray-200",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-2 mb-3",children:[(0,a.jsx)(C.Z,{className:"h-4 w-4 text-gray-500"}),(0,a.jsx)("h3",{className:"text-xs font-semibold text-gray-500 uppercase tracking-wider",children:"Your Role"})]}),(0,a.jsxs)("div",{className:"bg-blue-50 rounded-lg p-3",children:[(0,a.jsx)("p",{className:"text-sm font-medium text-blue-900 capitalize",children:r.user.role}),(0,a.jsx)("p",{className:"text-xs text-blue-700",children:r.user.name})]})]}),(0,a.jsxs)("div",{className:"mt-8 pt-6 border-t border-gray-200",children:[(0,a.jsx)("h3",{className:"text-xs font-semibold text-gray-500 uppercase tracking-wider mb-3",children:"Library Stats"}),(0,a.jsxs)("div",{className:"space-y-2 text-sm",children:[(0,a.jsxs)("div",{className:"flex justify-between",children:[(0,a.jsx)("span",{className:"text-gray-600",children:"Total Books:"}),(0,a.jsx)("span",{className:"font-medium text-gray-900",children:"1,247"})]}),(0,a.jsxs)("div",{className:"flex justify-between",children:[(0,a.jsx)("span",{className:"text-gray-600",children:"Members:"}),(0,a.jsx)("span",{className:"font-medium text-gray-900",children:"342"})]}),(0,a.jsxs)("div",{className:"flex justify-between",children:[(0,a.jsx)("span",{className:"text-gray-600",children:"Borrowed:"}),(0,a.jsx)("span",{className:"font-medium text-red-600",children:"89"})]}),(0,a.jsxs)("div",{className:"flex justify-between",children:[(0,a.jsx)("span",{className:"text-gray-600",children:"Available:"}),(0,a.jsx)("span",{className:"font-medium text-green-600",children:"1,158"})]})]})]})]})})},O=()=>{let{addNotification:e}=(0,y.z)();return(0,r.useEffect)(()=>{localStorage.getItem("library_welcome_shown")||(setTimeout(()=>{e({type:"info",title:"Welcome to the Library System!",message:"You can now manage books, members, and borrowing activities. Explore the different sections using the sidebar.",action:{label:"Get Started",onClick:()=>console.log("Getting started...")}})},2e3),setTimeout(()=>{e({type:"warning",title:"System Maintenance",message:"Scheduled maintenance will occur tonight from 2 AM to 4 AM. Some features may be temporarily unavailable."})},5e3),setTimeout(()=>{e({type:"success",title:"New Features Available",message:"Check out the new QR code scanner and enhanced reporting features in the latest update!"})},8e3),localStorage.setItem("library_welcome_shown","true"))},[e]),null},U=t(700),z=t(6325),Y=t(2782),q=t(1359),G=t(5972),J=t(9421),W=()=>{let{state:e,addBook:s,addMember:t,borrowBook:n,addAttendance:i}=(0,U.y)(),{hasPermission:c}=(0,l.a)(),{addNotification:o}=(0,y.z)(),{books:d,members:x,borrowings:m,reservations:u,attendance:h}=e,[g,p]=(0,r.useState)({totalBooks:0,totalMembers:0,borrowedBooks:0,overdueBooks:0,todayAttendance:0,pendingReservations:0,availableBooks:0,totalBorrowings:0,monthlyBorrowings:0,popularCategories:[]}),[b,j]=(0,r.useState)([]),[f,v]=(0,r.useState)(!1),[w,k]=(0,r.useState)("7days");(0,r.useEffect)(()=>{C(),D()},[d,x,m,u,h]);let C=()=>{let e=m.filter(e=>"BORROWED"===e.status),s=e.filter(e=>new Date(e.dueDate)<new Date),t=new Date().toDateString(),a=h.filter(e=>new Date(e.checkInTime).toDateString()===t),r=new Date;r.setDate(r.getDate()-30);let l=m.filter(e=>new Date(e.borrowDate)>=r).length,n=Object.entries(d.reduce((e,s)=>(e[s.category]=(e[s.category]||0)+1,e),{})).map(e=>{let[s,t]=e;return{category:s,count:t}}).sort((e,s)=>s.count-e.count).slice(0,5);p({totalBooks:d.length,totalMembers:x.length,borrowedBooks:e.length,overdueBooks:s.length,todayAttendance:a.length,pendingReservations:u.filter(e=>"WAITING"===e.status).length,availableBooks:d.filter(e=>"AVAILABLE"===e.status).length,totalBorrowings:m.length,monthlyBorrowings:l,popularCategories:n})},D=()=>{let e=[];e.push(...m.sort((e,s)=>new Date(s.borrowDate).getTime()-new Date(e.borrowDate).getTime()).slice(0,5).map(e=>{let s=d.find(s=>s.id===e.bookId),t=x.find(s=>s.id===(e.memberId||e.personId));return{type:"borrow",message:"".concat((null==t?void 0:t.name)||"Unknown",' borrowed "').concat((null==s?void 0:s.title)||"Unknown Book",'"'),time:new Date(e.borrowDate).toLocaleString(),icon:R.Z,color:"text-blue-600"}}),...m.filter(e=>"RETURNED"===e.status&&e.returnDate).sort((e,s)=>new Date(s.returnDate).getTime()-new Date(e.returnDate).getTime()).slice(0,3).map(e=>{let s=d.find(s=>s.id===e.bookId),t=x.find(s=>s.id===(e.memberId||e.personId));return{type:"return",message:"".concat((null==t?void 0:t.name)||"Unknown",' returned "').concat((null==s?void 0:s.title)||"Unknown Book",'"'),time:new Date(e.returnDate).toLocaleString(),icon:B.Z,color:"text-green-600"}}),...h.sort((e,s)=>new Date(s.checkInTime).getTime()-new Date(e.checkInTime).getTime()).slice(0,3).map(e=>{let s=x.find(s=>s.id===e.memberId);return{type:"attendance",message:"".concat((null==s?void 0:s.name)||"Unknown"," checked in"),time:new Date(e.checkInTime).toLocaleString(),icon:S.Z,color:"text-purple-600"}})),j(e.sort((e,s)=>new Date(s.time).getTime()-new Date(e.time).getTime()).slice(0,8))},I=async()=>{v(!0),await new Promise(e=>setTimeout(e,1e3)),C(),D(),v(!1),o({type:"success",title:"Dashboard Refreshed",message:"All statistics have been updated."})},Z=[{title:"Add New Book",description:"Add a new book to the catalog",icon:z.Z,action:()=>{o({type:"info",title:"Quick Action",message:"Navigate to Book Catalog to add a new book."})},color:"bg-blue-500",permission:"books:write"},{title:"Scan QR Code",description:"Quick book checkout/return",icon:Y.Z,action:()=>{o({type:"info",title:"Quick Action",message:"Navigate to QR Scanner for quick operations."})},color:"bg-green-500",permission:"scanner:use"},{title:"Record Attendance",description:"Log member library visit",icon:V.Z,action:()=>{let e=x[0];e&&i({personId:e.id,memberId:e.id})},color:"bg-purple-500",permission:"attendance:write"},{title:"View Reports",description:"Generate library reports",icon:q.Z,action:()=>{o({type:"info",title:"Quick Action",message:"Navigate to Reports for detailed analytics."})},color:"bg-orange-500",permission:"reports:read"}].filter(e=>c(e.permission));return(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)("div",{className:"flex flex-col lg:flex-row lg:items-center lg:justify-between gap-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h1",{className:"text-3xl font-bold text-gray-900",children:"Dashboard"}),(0,a.jsx)("p",{className:"text-gray-600 mt-2",children:"Welcome to Robert Aboagye Mensah Community Library"})]}),(0,a.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,a.jsxs)("select",{value:w,onChange:e=>k(e.target.value),className:"px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-600",children:[(0,a.jsx)("option",{value:"7days",children:"Last 7 days"}),(0,a.jsx)("option",{value:"30days",children:"Last 30 days"}),(0,a.jsx)("option",{value:"90days",children:"Last 90 days"})]}),(0,a.jsxs)("button",{onClick:I,disabled:f,className:"flex items-center space-x-2 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:opacity-50",children:[(0,a.jsx)(G.Z,{className:"h-4 w-4 ".concat(f?"animate-spin":"")}),(0,a.jsx)("span",{children:"Refresh"})]})]})]}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[(0,a.jsx)("div",{className:"bg-white p-6 rounded-lg shadow-sm border border-gray-200",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-sm font-medium text-gray-600",children:"Total Books"}),(0,a.jsx)("p",{className:"text-2xl font-bold text-gray-900",children:g.totalBooks}),(0,a.jsxs)("p",{className:"text-xs text-gray-500 mt-1",children:[g.availableBooks," available"]})]}),(0,a.jsx)("div",{className:"p-3 bg-blue-100 rounded-lg",children:(0,a.jsx)(B.Z,{className:"h-6 w-6 text-blue-600"})})]})}),(0,a.jsx)("div",{className:"bg-white p-6 rounded-lg shadow-sm border border-gray-200",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-sm font-medium text-gray-600",children:"Total Members"}),(0,a.jsx)("p",{className:"text-2xl font-bold text-gray-900",children:g.totalMembers}),(0,a.jsxs)("p",{className:"text-xs text-gray-500 mt-1",children:[g.todayAttendance," visited today"]})]}),(0,a.jsx)("div",{className:"p-3 bg-green-100 rounded-lg",children:(0,a.jsx)(S.Z,{className:"h-6 w-6 text-green-600"})})]})}),(0,a.jsx)("div",{className:"bg-white p-6 rounded-lg shadow-sm border border-gray-200",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-sm font-medium text-gray-600",children:"Active Loans"}),(0,a.jsx)("p",{className:"text-2xl font-bold text-gray-900",children:g.borrowedBooks}),(0,a.jsxs)("p",{className:"text-xs text-gray-500 mt-1",children:[g.overdueBooks," overdue"]})]}),(0,a.jsx)("div",{className:"p-3 bg-yellow-100 rounded-lg",children:(0,a.jsx)(R.Z,{className:"h-6 w-6 text-yellow-600"})})]})}),(0,a.jsx)("div",{className:"bg-white p-6 rounded-lg shadow-sm border border-gray-200",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-sm font-medium text-gray-600",children:"Monthly Activity"}),(0,a.jsx)("p",{className:"text-2xl font-bold text-gray-900",children:g.monthlyBorrowings}),(0,a.jsx)("p",{className:"text-xs text-gray-500 mt-1",children:"borrowings this month"})]}),(0,a.jsx)("div",{className:"p-3 bg-purple-100 rounded-lg",children:(0,a.jsx)(J.Z,{className:"h-6 w-6 text-purple-600"})})]})})]}),(0,a.jsxs)("div",{className:"bg-white p-6 rounded-lg shadow-sm border border-gray-200",children:[(0,a.jsx)("h2",{className:"text-xl font-semibold text-gray-900 mb-4",children:"Quick Actions"}),(0,a.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:Z.map((e,s)=>{let t=e.icon;return(0,a.jsxs)("button",{onClick:e.action,className:"p-4 border border-gray-200 rounded-lg hover:shadow-md transition-shadow text-left group",children:[(0,a.jsx)("div",{className:"p-3 ".concat(e.color," rounded-lg inline-block mb-3 group-hover:scale-110 transition-transform"),children:(0,a.jsx)(t,{className:"h-6 w-6 text-white"})}),(0,a.jsx)("h3",{className:"font-medium text-gray-900 mb-1",children:e.title}),(0,a.jsx)("p",{className:"text-sm text-gray-600",children:e.description})]},s)})})]}),(0,a.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[(0,a.jsxs)("div",{className:"bg-white p-6 rounded-lg shadow-sm border border-gray-200",children:[(0,a.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Popular Categories"}),(0,a.jsx)("div",{className:"space-y-3",children:g.popularCategories.map((e,s)=>{let t=e.count/g.totalBooks*100;return(0,a.jsxs)("div",{className:"space-y-1",children:[(0,a.jsxs)("div",{className:"flex justify-between text-sm",children:[(0,a.jsx)("span",{className:"text-gray-600 capitalize",children:e.category}),(0,a.jsxs)("span",{className:"font-medium text-gray-900",children:[e.count," books"]})]}),(0,a.jsx)("div",{className:"w-full bg-gray-200 rounded-full h-2",children:(0,a.jsx)("div",{className:"bg-blue-600 h-2 rounded-full transition-all duration-500",style:{width:"".concat(t,"%")}})})]},s)})})]}),(0,a.jsxs)("div",{className:"bg-white p-6 rounded-lg shadow-sm border border-gray-200",children:[(0,a.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Recent Activities"}),(0,a.jsx)("div",{className:"space-y-3",children:b.length>0?b.map((e,s)=>{let t=e.icon;return(0,a.jsxs)("div",{className:"flex items-center space-x-3 p-3 bg-gray-50 rounded-lg",children:[(0,a.jsx)("div",{className:"p-2 rounded-lg ".concat(e.color.replace("text-","bg-").replace("-600","-100")),children:(0,a.jsx)(t,{className:"h-4 w-4 ".concat(e.color)})}),(0,a.jsxs)("div",{className:"flex-1",children:[(0,a.jsx)("p",{className:"text-sm text-gray-900",children:e.message}),(0,a.jsx)("p",{className:"text-xs text-gray-500",children:e.time})]})]},s)}):(0,a.jsxs)("div",{className:"text-center py-8 text-gray-500",children:[(0,a.jsx)(J.Z,{className:"h-8 w-8 mx-auto mb-2 text-gray-400"}),(0,a.jsx)("p",{children:"No recent activities"})]})})]})]}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[(0,a.jsx)("div",{className:"bg-white p-6 rounded-lg shadow-sm border border-gray-200",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-sm font-medium text-gray-600",children:"Overdue Books"}),(0,a.jsx)("p",{className:"text-2xl font-bold text-red-600",children:g.overdueBooks})]}),(0,a.jsx)(N.Z,{className:"h-8 w-8 text-red-600"})]})}),(0,a.jsx)("div",{className:"bg-white p-6 rounded-lg shadow-sm border border-gray-200",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-sm font-medium text-gray-600",children:"Pending Reservations"}),(0,a.jsx)("p",{className:"text-2xl font-bold text-yellow-600",children:g.pendingReservations})]}),(0,a.jsx)(A.Z,{className:"h-8 w-8 text-yellow-600"})]})}),(0,a.jsx)("div",{className:"bg-white p-6 rounded-lg shadow-sm border border-gray-200",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-sm font-medium text-gray-600",children:"Total Borrowings"}),(0,a.jsx)("p",{className:"text-2xl font-bold text-blue-600",children:g.totalBorrowings})]}),(0,a.jsx)(q.Z,{className:"h-8 w-8 text-blue-600"})]})})]})]})},_=t(3922),Q=t(2095),K=t(7089),H=t(5964),$=t(2478),X=t(6850),ee=t(3739),es=t(2643),et=t(1340);let ea=e=>["Title,Author,ISBN,Category,Published Year,Status,Description",...e.map(e=>['"'.concat(e.title.replace(/"/g,'""'),'"'),'"'.concat(e.author.replace(/"/g,'""'),'"'),'"'.concat(e.isbn,'"'),'"'.concat(e.category,'"'),e.publishedYear,'"'.concat(e.status,'"'),'"'.concat((e.description||"").replace(/"/g,'""'),'"')].join(","))].join("\n"),er=e=>JSON.stringify(e,null,2),el=(e,s,t)=>{let a=new Blob([e],{type:t}),r=URL.createObjectURL(a),l=document.createElement("a");l.href=r,l.download=s,document.body.appendChild(l),l.click(),document.body.removeChild(l),URL.revokeObjectURL(r)},en=e=>{if(e)switch(e.toLowerCase()){case"available":return"AVAILABLE";case"borrowed":return"BORROWED";case"reserved":return"RESERVED";default:return}},ei=e=>{let s=e.split("\n").filter(e=>e.trim());if(s.length<2)return[];let t=s[0].split(",").map(e=>e.replace(/"/g,"").trim()),a=[];for(let e=1;e<s.length;e++){let r=ec(s[e]);if(r.length!==t.length)continue;let l={title:r[0]||"",author:r[1]||"",isbn:r[2]||"",category:r[3]||"fiction",publishedYear:parseInt(r[4])||new Date().getFullYear(),description:r[6]||"",status:en(r[5])||"AVAILABLE"};a.push(l)}return a},ec=e=>{let s=[],t="",a=!1;for(let r=0;r<e.length;r++){let l=e[r];'"'===l?a&&'"'===e[r+1]?(t+='"',r++):a=!a:","!==l||a?t+=l:(s.push(t.trim()),t="")}return s.push(t.trim()),s},eo=e=>{let s=[];return e.title&&0!==e.title.trim().length||s.push("Title is required"),e.author&&0!==e.author.trim().length||s.push("Author is required"),e.category&&0!==e.category.trim().length||s.push("Category is required"),(!e.publishedYear||e.publishedYear<1e3||e.publishedYear>new Date().getFullYear()+1)&&s.push("Published year must be between 1000 and "+(new Date().getFullYear()+1)),e.isbn&&e.isbn.length>0&&!ed(e.isbn)&&s.push("Invalid ISBN format"),s},ed=e=>{let s=e.replace(/[-\s]/g,"");return/^(978|979)?\d{9}[\dX]$/.test(s)},ex=e=>{let s={success:!0,imported:0,errors:[],warnings:[]};return e.forEach((e,t)=>{let a=eo(e);a.length>0?(s.errors.push("Row ".concat(t+2,": ").concat(a.join(", "))),s.success=!1):s.imported++}),0===s.imported&&e.length>0&&(s.success=!1),s},em=()=>"Title,Author,ISBN,Category,Published Year,Status,Description\nThe Great Gatsby,F. Scott Fitzgerald,9780743273565,fiction,1925,available,A classic American novel\n1984,George Orwell,9780451524935,fiction,1949,available,A dystopian social science fiction novel\nTo Kill a Mockingbird,Harper Lee,9780061120084,fiction,1960,available,A novel about racial injustice";var eu=e=>{let{isOpen:s,onClose:t,mode:l}=e,{state:n,addBook:i}=(0,U.y)(),{addNotification:c}=(0,y.z)(),[o,d]=(0,r.useState)([]),[x,u]=(0,r.useState)(null),[h,g]=(0,r.useState)(!1),p=(0,r.useRef)(null),b=async()=>{if(0===o.length)return;g(!0);let e=ex(o);if(u(e),e.success){let s=0;for(let t of o)0===e.errors.filter(e=>e.includes("Row ".concat(o.indexOf(t)+2))).length&&(i({...t,status:t.status||"AVAILABLE"}),s++);c({type:"success",title:"Import Successful",message:"Successfully imported ".concat(s," books.")})}else c({type:"error",title:"Import Failed",message:"Found ".concat(e.errors.length," errors. Please fix them and try again.")});g(!1)},N=e=>{let s=n.books,t=new Date().toISOString().split("T")[0];"csv"===e?el(ea(s),"books-export-".concat(t,".csv"),"text/csv"):el(er(s),"books-export-".concat(t,".json"),"application/json"),c({type:"success",title:"Export Successful",message:"Books exported as ".concat(e.toUpperCase()," file.")})};return s?(0,a.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:(0,a.jsx)("div",{className:"bg-white rounded-lg w-full max-w-2xl max-h-[90vh] overflow-y-auto",children:(0,a.jsxs)("div",{className:"p-6",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[(0,a.jsx)("h2",{className:"text-2xl font-semibold text-gray-900",children:"import"===l?"Import Books":"Export Books"}),(0,a.jsx)("button",{onClick:t,className:"text-gray-400 hover:text-gray-600",children:(0,a.jsx)(m.Z,{className:"h-6 w-6"})})]}),"import"===l?(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Upload File"}),(0,a.jsxs)("div",{className:"border-2 border-dashed border-gray-300 rounded-lg p-6 text-center",children:[(0,a.jsx)(_.Z,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),(0,a.jsx)("p",{className:"text-gray-600 mb-4",children:"Upload a CSV or JSON file to import books"}),(0,a.jsx)("input",{ref:p,type:"file",accept:".csv,.json",onChange:e=>{var s;let t=null===(s=e.target.files)||void 0===s?void 0:s[0];if(!t)return;let a=new FileReader;a.onload=e=>{var s;let a=null===(s=e.target)||void 0===s?void 0:s.result;try{if(t.name.endsWith(".csv")){let e=ei(a);d(e),u(null)}else if(t.name.endsWith(".json")){let e=JSON.parse(a);d(e),u(null)}else c({type:"error",title:"Invalid File Format",message:"Please upload a CSV or JSON file."})}catch(e){c({type:"error",title:"File Parse Error",message:"Could not parse the uploaded file. Please check the format."})}},a.readAsText(t)},className:"hidden"}),(0,a.jsx)("button",{onClick:()=>{var e;return null===(e=p.current)||void 0===e?void 0:e.click()},className:"bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700",children:"Choose File"})]})]}),(0,a.jsxs)("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-2 mb-2",children:[(0,a.jsx)(v.Z,{className:"h-5 w-5 text-blue-600"}),(0,a.jsx)("h3",{className:"font-medium text-blue-900",children:"Need a Template?"})]}),(0,a.jsx)("p",{className:"text-sm text-blue-700 mb-3",children:"Download our CSV template to see the correct format for importing books."}),(0,a.jsxs)("button",{onClick:()=>{el(em(),"books-import-template.csv","text/csv"),c({type:"info",title:"Template Downloaded",message:"Import template downloaded. Use this format for importing books."})},className:"flex items-center space-x-2 text-blue-600 hover:text-blue-700 text-sm",children:[(0,a.jsx)(Q.Z,{className:"h-4 w-4"}),(0,a.jsx)("span",{children:"Download Template"})]})]}),o.length>0&&(0,a.jsxs)("div",{children:[(0,a.jsxs)("h3",{className:"text-lg font-medium text-gray-900 mb-3",children:["Import Preview (",o.length," books)"]}),(0,a.jsx)("div",{className:"border border-gray-200 rounded-lg overflow-hidden",children:(0,a.jsxs)("div",{className:"max-h-60 overflow-y-auto",children:[(0,a.jsxs)("table",{className:"min-w-full divide-y divide-gray-200",children:[(0,a.jsx)("thead",{className:"bg-gray-50",children:(0,a.jsxs)("tr",{children:[(0,a.jsx)("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase",children:"Title"}),(0,a.jsx)("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase",children:"Author"}),(0,a.jsx)("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase",children:"Category"}),(0,a.jsx)("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase",children:"Year"})]})}),(0,a.jsx)("tbody",{className:"bg-white divide-y divide-gray-200",children:o.slice(0,10).map((e,s)=>(0,a.jsxs)("tr",{children:[(0,a.jsx)("td",{className:"px-4 py-2 text-sm text-gray-900",children:e.title}),(0,a.jsx)("td",{className:"px-4 py-2 text-sm text-gray-900",children:e.author}),(0,a.jsx)("td",{className:"px-4 py-2 text-sm text-gray-900 capitalize",children:e.category}),(0,a.jsx)("td",{className:"px-4 py-2 text-sm text-gray-900",children:e.publishedYear})]},s))})]}),o.length>10&&(0,a.jsxs)("div",{className:"px-4 py-2 text-sm text-gray-500 text-center",children:["... and ",o.length-10," more books"]})]})})]}),x&&(0,a.jsxs)("div",{className:"border rounded-lg p-4 ".concat(x.success?"border-green-200 bg-green-50":"border-red-200 bg-red-50"),children:[(0,a.jsxs)("div",{className:"flex items-center space-x-2 mb-2",children:[x.success?(0,a.jsx)(j.Z,{className:"h-5 w-5 text-green-600"}):(0,a.jsx)(f.Z,{className:"h-5 w-5 text-red-600"}),(0,a.jsxs)("h3",{className:"font-medium ".concat(x.success?"text-green-900":"text-red-900"),children:["Import ",x.success?"Successful":"Failed"]})]}),(0,a.jsxs)("p",{className:"text-sm ".concat(x.success?"text-green-700":"text-red-700"),children:[x.imported," books imported successfully"]}),x.errors.length>0&&(0,a.jsxs)("div",{className:"mt-2",children:[(0,a.jsx)("p",{className:"text-sm font-medium text-red-700 mb-1",children:"Errors:"}),(0,a.jsxs)("ul",{className:"text-sm text-red-600 space-y-1",children:[x.errors.slice(0,5).map((e,s)=>(0,a.jsxs)("li",{children:["• ",e]},s)),x.errors.length>5&&(0,a.jsxs)("li",{children:["• ... and ",x.errors.length-5," more errors"]})]})]})]}),(0,a.jsxs)("div",{className:"flex justify-end space-x-3",children:[(0,a.jsx)("button",{onClick:t,className:"px-4 py-2 text-gray-600 hover:text-gray-800",children:"Cancel"}),(0,a.jsx)("button",{onClick:b,disabled:0===o.length||h,className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed",children:h?"Importing...":"Import ".concat(o.length," Books")})]})]}):(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Choose Export Format"}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,a.jsxs)("button",{onClick:()=>N("csv"),className:"flex items-center space-x-3 p-4 border border-gray-200 rounded-lg hover:bg-gray-50",children:[(0,a.jsx)(es.Z,{className:"h-8 w-8 text-green-600"}),(0,a.jsxs)("div",{className:"text-left",children:[(0,a.jsx)("p",{className:"font-medium text-gray-900",children:"CSV Format"}),(0,a.jsx)("p",{className:"text-sm text-gray-500",children:"Compatible with Excel, Google Sheets"})]})]}),(0,a.jsxs)("button",{onClick:()=>N("json"),className:"flex items-center space-x-3 p-4 border border-gray-200 rounded-lg hover:bg-gray-50",children:[(0,a.jsx)(et.Z,{className:"h-8 w-8 text-blue-600"}),(0,a.jsxs)("div",{className:"text-left",children:[(0,a.jsx)("p",{className:"font-medium text-gray-900",children:"JSON Format"}),(0,a.jsx)("p",{className:"text-sm text-gray-500",children:"Machine-readable format"})]})]})]})]}),(0,a.jsxs)("div",{className:"bg-gray-50 border border-gray-200 rounded-lg p-4",children:[(0,a.jsx)("h4",{className:"font-medium text-gray-900 mb-2",children:"Export Information"}),(0,a.jsxs)("ul",{className:"text-sm text-gray-600 space-y-1",children:[(0,a.jsxs)("li",{children:["• Total books to export: ",n.books.length]}),(0,a.jsxs)("li",{children:["• Available books: ",n.books.filter(e=>"AVAILABLE"===e.status).length]}),(0,a.jsxs)("li",{children:["• Borrowed books: ",n.books.filter(e=>"BORROWED"===e.status).length]}),(0,a.jsxs)("li",{children:["• Reserved books: ",n.books.filter(e=>"RESERVED"===e.status).length]})]})]}),(0,a.jsx)("div",{className:"flex justify-end space-x-3",children:(0,a.jsx)("button",{onClick:t,className:"px-4 py-2 text-gray-600 hover:text-gray-800",children:"Close"})})]})]})})}):null},eh=()=>{let{state:e,addBook:s,updateBook:t,deleteBook:n}=(0,U.y)(),{hasPermission:i}=(0,l.a)(),{books:c,borrowings:d}=e,[x,m]=(0,r.useState)(""),[u,h]=(0,r.useState)("all"),[g,p]=(0,r.useState)("all"),[b,y]=(0,r.useState)("title"),[j,f]=(0,r.useState)(!1),[N,v]=(0,r.useState)(null),[w,k]=(0,r.useState)("grid"),[S,C]=(0,r.useState)([]),[A,I]=(0,r.useState)(!1),[Z,E]=(0,r.useState)(!1),T=["all","fiction","non-fiction","science","history","biography","children","technology","art","philosophy"],L=c.filter(e=>{let s=e.title.toLowerCase().includes(x.toLowerCase())||e.author.toLowerCase().includes(x.toLowerCase())||e.isbn.toLowerCase().includes(x.toLowerCase()),t="all"===u||e.category===u,a="all"===g||e.status===g;return s&&t&&a}).sort((e,s)=>{switch(b){case"title":return e.title.localeCompare(s.title);case"author":return e.author.localeCompare(s.author);case"publishedYear":return s.publishedYear-e.publishedYear;case"category":return e.category.localeCompare(s.category);default:return 0}}),R=async e=>{try{await s(e),f(!1)}catch(e){console.error("Failed to add book:",e)}},P=async e=>{await t(e),v(null)},M=async e=>{confirm("Are you sure you want to delete this book?")&&await n(e)},V=async()=>{if(0!==S.length&&confirm("Are you sure you want to delete ".concat(S.length," books?"))){for(let e of S)await n(e);C([])}},F=e=>{C(s=>s.includes(e)?s.filter(s=>s!==e):[...s,e])},O=()=>{S.length===L.length?C([]):C(L.map(e=>e.id))},Y=e=>d.filter(s=>s.bookId===e).length;return(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)("div",{className:"flex flex-col lg:flex-row lg:items-center lg:justify-between gap-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h1",{className:"text-3xl font-bold text-gray-900",children:"Book Catalog"}),(0,a.jsxs)("p",{className:"text-gray-600 mt-2",children:["Manage your library's book collection (",L.length," books)"]})]}),(0,a.jsxs)("div",{className:"flex flex-wrap gap-2",children:[i("books:write")&&(0,a.jsxs)("button",{onClick:()=>f(!0),className:"bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 flex items-center space-x-2",children:[(0,a.jsx)(z.Z,{className:"h-5 w-5"}),(0,a.jsx)("span",{children:"Add Book"})]}),(0,a.jsxs)("button",{onClick:()=>I(!0),className:"bg-green-600 text-white px-4 py-2 rounded-lg hover:bg-green-700 flex items-center space-x-2",children:[(0,a.jsx)(_.Z,{className:"h-5 w-5"}),(0,a.jsx)("span",{children:"Import"})]}),(0,a.jsxs)("button",{onClick:()=>E(!0),className:"bg-gray-600 text-white px-4 py-2 rounded-lg hover:bg-gray-700 flex items-center space-x-2",children:[(0,a.jsx)(Q.Z,{className:"h-5 w-5"}),(0,a.jsx)("span",{children:"Export"})]})]})]}),(0,a.jsxs)("div",{className:"bg-white p-6 rounded-lg shadow-sm border border-gray-200",children:[(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4 mb-4",children:[(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsx)(D.Z,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400"}),(0,a.jsx)("input",{type:"text",placeholder:"Search books...",value:x,onChange:e=>m(e.target.value),className:"pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-600 focus:border-transparent w-full"})]}),(0,a.jsx)("select",{value:u,onChange:e=>h(e.target.value),className:"border border-gray-300 rounded-lg px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-600",children:T.map(e=>(0,a.jsx)("option",{value:e,children:e.charAt(0).toUpperCase()+e.slice(1)},e))}),(0,a.jsx)("select",{value:g,onChange:e=>p(e.target.value),className:"border border-gray-300 rounded-lg px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-600",children:["all","AVAILABLE","BORROWED","RESERVED"].map(e=>(0,a.jsx)("option",{value:e,children:e.charAt(0).toUpperCase()+e.slice(1)},e))}),(0,a.jsxs)("select",{value:b,onChange:e=>y(e.target.value),className:"border border-gray-300 rounded-lg px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-600",children:[(0,a.jsx)("option",{value:"title",children:"Sort by Title"}),(0,a.jsx)("option",{value:"author",children:"Sort by Author"}),(0,a.jsx)("option",{value:"publishedYear",children:"Sort by Year"}),(0,a.jsx)("option",{value:"category",children:"Sort by Category"})]})]}),(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsx)("button",{onClick:()=>k("grid"),className:"p-2 rounded-lg ".concat("grid"===w?"bg-blue-100 text-blue-600":"text-gray-400 hover:text-gray-600"),children:(0,a.jsx)(K.Z,{className:"h-5 w-5"})}),(0,a.jsx)("button",{onClick:()=>k("list"),className:"p-2 rounded-lg ".concat("list"===w?"bg-blue-100 text-blue-600":"text-gray-400 hover:text-gray-600"),children:(0,a.jsx)(H.Z,{className:"h-5 w-5"})})]}),i("books:write")&&(0,a.jsx)("div",{className:"flex items-center space-x-2",children:(0,a.jsxs)("button",{onClick:O,className:"flex items-center space-x-2 px-3 py-2 text-sm text-gray-600 hover:text-gray-800",children:[(0,a.jsx)($.Z,{className:"h-4 w-4"}),(0,a.jsx)("span",{children:"Select All"})]})})]}),S.length>0&&i("books:delete")&&(0,a.jsxs)("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4 flex items-center justify-between mt-4",children:[(0,a.jsxs)("span",{className:"text-blue-800 font-medium",children:[S.length," book",S.length>1?"s":""," selected"]}),(0,a.jsxs)("div",{className:"flex space-x-2",children:[(0,a.jsx)("button",{onClick:V,className:"bg-red-600 text-white px-3 py-1 rounded text-sm hover:bg-red-700",children:"Delete Selected"}),(0,a.jsx)("button",{onClick:()=>C([]),className:"bg-gray-600 text-white px-3 py-1 rounded text-sm hover:bg-gray-700",children:"Clear Selection"})]})]})]}),"grid"===w?(0,a.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6",children:L.map(e=>(0,a.jsx)("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 overflow-hidden hover:shadow-md transition-shadow",children:(0,a.jsxs)("div",{className:"p-6",children:[(0,a.jsxs)("div",{className:"flex items-start justify-between mb-4",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[i("books:delete")&&(0,a.jsx)("input",{type:"checkbox",checked:S.includes(e.id),onChange:()=>F(e.id),className:"rounded border-gray-300 text-blue-600 focus:ring-blue-500"}),(0,a.jsx)("div",{className:"p-2 bg-blue-100 rounded-lg",children:(0,a.jsx)(B.Z,{className:"h-6 w-6 text-blue-600"})})]}),i("books:delete")&&(0,a.jsxs)("div",{className:"flex space-x-1",children:[(0,a.jsx)("button",{onClick:()=>v(e),className:"p-1 text-gray-400 hover:text-blue-600",children:(0,a.jsx)(X.Z,{className:"h-4 w-4"})}),(0,a.jsx)("button",{onClick:()=>M(e.id),className:"p-1 text-gray-400 hover:text-red-600",children:(0,a.jsx)(ee.Z,{className:"h-4 w-4"})})]})]}),(0,a.jsx)("h3",{className:"font-semibold text-gray-900 mb-2 line-clamp-2",children:e.title}),(0,a.jsxs)("p",{className:"text-sm text-gray-600 mb-2",children:["by ",e.author]}),(0,a.jsx)("p",{className:"text-xs text-gray-500 mb-3 capitalize",children:e.category}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between text-xs",children:[(0,a.jsx)("span",{className:"text-gray-500",children:"Published:"}),(0,a.jsx)("span",{className:"font-medium",children:e.publishedYear})]}),(0,a.jsxs)("div",{className:"flex items-center justify-between text-xs",children:[(0,a.jsx)("span",{className:"text-gray-500",children:"Borrowed:"}),(0,a.jsxs)("span",{className:"font-medium",children:[Y(e.id)," times"]})]})]}),(0,a.jsxs)("div",{className:"flex items-center justify-between mt-4",children:[(0,a.jsx)("span",{className:"px-2 py-1 rounded-full text-xs font-medium ".concat("AVAILABLE"===e.status?"bg-green-100 text-green-800":"BORROWED"===e.status?"bg-yellow-100 text-yellow-800":"bg-red-100 text-red-800"),children:e.status.charAt(0)+e.status.slice(1).toLowerCase()}),(0,a.jsxs)("button",{className:"flex items-center space-x-1 text-blue-600 hover:text-blue-700 text-sm",children:[(0,a.jsx)(o.Z,{className:"h-4 w-4"}),(0,a.jsx)("span",{children:"View"})]})]})]})},e.id))}):(0,a.jsx)("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 overflow-hidden",children:(0,a.jsx)("div",{className:"overflow-x-auto",children:(0,a.jsxs)("table",{className:"min-w-full divide-y divide-gray-200",children:[(0,a.jsx)("thead",{className:"bg-gray-50",children:(0,a.jsxs)("tr",{children:[i("books:delete")&&(0,a.jsx)("th",{className:"px-6 py-3 text-left",children:(0,a.jsx)("input",{type:"checkbox",checked:S.length===L.length&&L.length>0,onChange:O,className:"rounded border-gray-300 text-blue-600 focus:ring-blue-500"})}),(0,a.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Book"}),(0,a.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Author"}),(0,a.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Category"}),(0,a.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Year"}),(0,a.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"}),(0,a.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Borrowed"}),i("books:delete")&&(0,a.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),(0,a.jsx)("tbody",{className:"bg-white divide-y divide-gray-200",children:L.map(e=>(0,a.jsxs)("tr",{className:"hover:bg-gray-50",children:[i("books:delete")&&(0,a.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,a.jsx)("input",{type:"checkbox",checked:S.includes(e.id),onChange:()=>F(e.id),className:"rounded border-gray-300 text-blue-600 focus:ring-blue-500"})}),(0,a.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsx)("div",{className:"flex-shrink-0 h-10 w-10",children:(0,a.jsx)("div",{className:"h-10 w-10 rounded-lg bg-blue-100 flex items-center justify-center",children:(0,a.jsx)(B.Z,{className:"h-5 w-5 text-blue-600"})})}),(0,a.jsxs)("div",{className:"ml-4",children:[(0,a.jsx)("div",{className:"text-sm font-medium text-gray-900",children:e.title}),(0,a.jsxs)("div",{className:"text-sm text-gray-500",children:["ISBN: ",e.isbn]})]})]})}),(0,a.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:e.author}),(0,a.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500 capitalize",children:e.category}),(0,a.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:e.publishedYear}),(0,a.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,a.jsx)("span",{className:"inline-flex px-2 py-1 text-xs font-semibold rounded-full ".concat("AVAILABLE"===e.status?"bg-green-100 text-green-800":"BORROWED"===e.status?"bg-yellow-100 text-yellow-800":"bg-red-100 text-red-800"),children:e.status.charAt(0)+e.status.slice(1).toLowerCase()})}),(0,a.jsxs)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:[Y(e.id)," times"]}),i("books:delete")&&(0,a.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium",children:(0,a.jsxs)("div",{className:"flex space-x-2",children:[(0,a.jsx)("button",{onClick:()=>v(e),className:"text-blue-600 hover:text-blue-900",children:(0,a.jsx)(X.Z,{className:"h-4 w-4"})}),(0,a.jsx)("button",{onClick:()=>M(e.id),className:"text-red-600 hover:text-red-900",children:(0,a.jsx)(ee.Z,{className:"h-4 w-4"})})]})})]},e.id))})]})})}),0===L.length&&(0,a.jsxs)("div",{className:"text-center py-12",children:[(0,a.jsx)(B.Z,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),(0,a.jsx)("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No books found"}),(0,a.jsx)("p",{className:"text-gray-600",children:"Try adjusting your search or filter criteria"})]}),j&&(0,a.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:(0,a.jsxs)("div",{className:"bg-white rounded-lg p-6 w-full max-w-md max-h-[90vh] overflow-y-auto",children:[(0,a.jsx)("h2",{className:"text-xl font-semibold mb-4",children:"Add New Book"}),(0,a.jsxs)("form",{onSubmit:e=>{var s,t,a,r,l,n,i;e.preventDefault();let c=new FormData(e.target);R({title:(null===(s=c.get("title"))||void 0===s?void 0:s.toString())||"",author:(null===(t=c.get("author"))||void 0===t?void 0:t.toString())||"",isbn:(null===(a=c.get("isbn"))||void 0===a?void 0:a.toString())||"",category:(null===(r=c.get("category"))||void 0===r?void 0:r.toString())||"",publishedYear:parseInt((null===(l=c.get("publishedYear"))||void 0===l?void 0:l.toString())||"0")||new Date().getFullYear(),description:(null===(n=c.get("description"))||void 0===n?void 0:n.toString())||null,coverImage:(null===(i=c.get("coverImage"))||void 0===i?void 0:i.toString())||null})},children:[(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsx)("input",{name:"title",placeholder:"Book Title",required:!0,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-600"}),(0,a.jsx)("input",{name:"author",placeholder:"Author",required:!0,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-600"}),(0,a.jsx)("input",{name:"isbn",placeholder:"ISBN (e.g., 978-0-123456-78-9)",required:!0,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-600"}),(0,a.jsxs)("select",{name:"category",required:!0,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-600",children:[(0,a.jsx)("option",{value:"",children:"Select Category"}),T.slice(1).map(e=>(0,a.jsx)("option",{value:e,children:e.charAt(0).toUpperCase()+e.slice(1)},e))]}),(0,a.jsx)("input",{name:"publishedYear",type:"number",placeholder:"Published Year",min:"1000",max:new Date().getFullYear()+1,required:!0,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-600"}),(0,a.jsx)("textarea",{name:"description",placeholder:"Description",rows:3,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-600"}),(0,a.jsx)("input",{name:"coverImage",placeholder:"Cover Image URL (optional)",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-600"})]}),(0,a.jsxs)("div",{className:"flex justify-end space-x-3 mt-6",children:[(0,a.jsx)("button",{type:"button",onClick:()=>f(!1),className:"px-4 py-2 text-gray-600 hover:text-gray-800",children:"Cancel"}),(0,a.jsx)("button",{type:"submit",className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700",children:"Add Book"})]})]})]})}),N&&(0,a.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:(0,a.jsxs)("div",{className:"bg-white rounded-lg p-6 w-full max-w-md max-h-[90vh] overflow-y-auto",children:[(0,a.jsx)("h2",{className:"text-xl font-semibold mb-4",children:"Edit Book"}),(0,a.jsxs)("form",{onSubmit:e=>{var s,t,a,r,l,n,i,c;e.preventDefault();let o=new FormData(e.target);P({...N,title:(null===(s=o.get("title"))||void 0===s?void 0:s.toString())||"",author:(null===(t=o.get("author"))||void 0===t?void 0:t.toString())||"",isbn:(null===(a=o.get("isbn"))||void 0===a?void 0:a.toString())||"",category:(null===(r=o.get("category"))||void 0===r?void 0:r.toString())||"",publishedYear:parseInt((null===(l=o.get("publishedYear"))||void 0===l?void 0:l.toString())||"")||new Date().getFullYear(),description:(null===(n=o.get("description"))||void 0===n?void 0:n.toString())||null,coverImage:(null===(i=o.get("coverImage"))||void 0===i?void 0:i.toString())||null,status:(null===(c=o.get("status"))||void 0===c?void 0:c.toString())||"AVAILABLE"})},children:[(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsx)("input",{name:"title",defaultValue:N.title,placeholder:"Book Title",required:!0,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-600"}),(0,a.jsx)("input",{name:"author",defaultValue:N.author,placeholder:"Author",required:!0,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-600"}),(0,a.jsx)("input",{name:"isbn",defaultValue:N.isbn,placeholder:"ISBN (e.g., 978-0-123456-78-9)",required:!0,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-600"}),(0,a.jsx)("select",{name:"category",defaultValue:N.category,required:!0,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-600",children:T.slice(1).map(e=>(0,a.jsx)("option",{value:e,children:e.charAt(0).toUpperCase()+e.slice(1)},e))}),(0,a.jsx)("input",{name:"publishedYear",type:"number",defaultValue:N.publishedYear,placeholder:"Published Year",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-600"}),(0,a.jsxs)("select",{name:"status",defaultValue:N.status,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-600",children:[(0,a.jsx)("option",{value:"AVAILABLE",children:"Available"}),(0,a.jsx)("option",{value:"BORROWED",children:"Borrowed"}),(0,a.jsx)("option",{value:"RESERVED",children:"Reserved"})]}),(0,a.jsx)("textarea",{name:"description",defaultValue:N.description||"",placeholder:"Description",rows:3,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-600"}),(0,a.jsx)("input",{name:"coverImage",defaultValue:N.coverImage||"",placeholder:"Cover Image URL (optional)",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-600"})]}),(0,a.jsxs)("div",{className:"flex justify-end space-x-3 mt-6",children:[(0,a.jsx)("button",{type:"button",onClick:()=>v(null),className:"px-4 py-2 text-gray-600 hover:text-gray-800",children:"Cancel"}),(0,a.jsx)("button",{type:"submit",className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700",children:"Update Book"})]})]})]})}),(0,a.jsx)(eu,{isOpen:A,onClose:()=>I(!1),mode:"import"}),(0,a.jsx)(eu,{isOpen:Z,onClose:()=>E(!1),mode:"export"})]})},eg=t(9811),ep=()=>{let{state:e,addMember:s,updateMember:t,deleteMember:l,fetchMembers:n}=(0,U.y)(),{members:i}=e,[c,o]=(0,r.useState)(""),[d,x]=(0,r.useState)(!1),[m,u]=(0,r.useState)(null);(0,r.useEffect)(()=>{n()},[]);let h=i.filter(e=>e.name.toLowerCase().includes(c.toLowerCase())||e.email.toLowerCase().includes(c.toLowerCase())),g=async e=>{await s(e),x(!1),setTimeout(()=>n(),500)},p=async e=>{confirm("Are you sure you want to delete this member? This action cannot be undone.")&&await l(e)};return(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)("div",{className:"flex justify-between items-center",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h1",{className:"text-3xl font-bold text-gray-900",children:"Member Management"}),(0,a.jsx)("p",{className:"text-gray-600 mt-2",children:"Manage library members and their information"})]}),(0,a.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,a.jsxs)("button",{onClick:n,className:"bg-gray-600 text-white px-4 py-2 rounded-lg hover:bg-gray-700 flex items-center space-x-2",children:[(0,a.jsx)(G.Z,{className:"h-5 w-5"}),(0,a.jsx)("span",{children:"Refresh"})]}),(0,a.jsxs)("button",{onClick:()=>x(!0),className:"bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 flex items-center space-x-2",children:[(0,a.jsx)(z.Z,{className:"h-5 w-5"}),(0,a.jsx)("span",{children:"Add Member"})]})]})]}),(0,a.jsx)("div",{className:"bg-white p-6 rounded-lg shadow-sm border border-gray-200",children:(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsx)(D.Z,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400"}),(0,a.jsx)("input",{type:"text",placeholder:"Search members by name or email...",value:c,onChange:e=>o(e.target.value),className:"pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-600 focus:border-transparent w-full"})]})}),(0,a.jsx)("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 overflow-hidden",children:(0,a.jsx)("div",{className:"overflow-x-auto",children:(0,a.jsxs)("table",{className:"min-w-full divide-y divide-gray-200",children:[(0,a.jsx)("thead",{className:"bg-gray-50",children:(0,a.jsxs)("tr",{children:[(0,a.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Member"}),(0,a.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Contact"}),(0,a.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Membership"}),(0,a.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"}),(0,a.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),(0,a.jsx)("tbody",{className:"bg-white divide-y divide-gray-200",children:h.map(e=>(0,a.jsxs)("tr",{className:"hover:bg-gray-50",children:[(0,a.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsx)("div",{className:"flex-shrink-0 h-10 w-10",children:(0,a.jsx)("div",{className:"h-10 w-10 rounded-full bg-blue-100 flex items-center justify-center",children:(0,a.jsx)(S.Z,{className:"h-5 w-5 text-blue-600"})})}),(0,a.jsxs)("div",{className:"ml-4",children:[(0,a.jsx)("div",{className:"text-sm font-medium text-gray-900",children:e.name}),(0,a.jsxs)("div",{className:"text-sm text-gray-500",children:["ID: ",e.id]})]})]})}),(0,a.jsxs)("td",{className:"px-6 py-4 whitespace-nowrap",children:[(0,a.jsx)("div",{className:"text-sm text-gray-900",children:e.email}),(0,a.jsxs)("div",{className:"text-sm text-gray-500 flex items-center",children:[(0,a.jsx)(eg.Z,{className:"h-3 w-3 mr-1"}),e.phone]})]}),(0,a.jsxs)("td",{className:"px-6 py-4 whitespace-nowrap",children:[(0,a.jsx)("div",{className:"text-sm text-gray-900 capitalize",children:"Member"}),(0,a.jsxs)("div",{className:"text-sm text-gray-500 flex items-center",children:[(0,a.jsx)(V.Z,{className:"h-3 w-3 mr-1"}),"Joined ",e.membershipDate?new Date(e.membershipDate).toLocaleDateString():"Unknown"]})]}),(0,a.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,a.jsx)("span",{className:"inline-flex px-2 py-1 text-xs font-semibold rounded-full ".concat("ACTIVE"===e.status?"bg-green-100 text-green-800":"bg-red-100 text-red-800"),children:e.status})}),(0,a.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium",children:(0,a.jsxs)("div",{className:"flex space-x-2",children:[(0,a.jsx)("button",{onClick:()=>u(e),className:"text-blue-600 hover:text-blue-900",children:(0,a.jsx)(X.Z,{className:"h-4 w-4"})}),(0,a.jsx)("button",{onClick:()=>p(e.id),className:"text-red-600 hover:text-red-900",children:(0,a.jsx)(ee.Z,{className:"h-4 w-4"})})]})})]},e.id))})]})})}),0===h.length&&(0,a.jsxs)("div",{className:"text-center py-12",children:[(0,a.jsx)(S.Z,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),(0,a.jsx)("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No members found"}),(0,a.jsx)("p",{className:"text-gray-600",children:"Try adjusting your search criteria"})]}),d&&(0,a.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:(0,a.jsxs)("div",{className:"bg-white rounded-lg p-6 w-full max-w-md",children:[(0,a.jsx)("h2",{className:"text-xl font-semibold mb-4",children:"Add New Member"}),(0,a.jsxs)("form",{onSubmit:e=>{e.preventDefault();let s=new FormData(e.target);g({name:s.get("name"),email:s.get("email"),phone:s.get("phone"),address:s.get("address"),personType:s.get("personType")||"MEMBER",membershipDate:new Date().toISOString(),status:"ACTIVE"})},children:[(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsx)("input",{name:"name",placeholder:"Full Name",required:!0,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-600"}),(0,a.jsx)("input",{name:"email",type:"email",placeholder:"Email Address",required:!0,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-600"}),(0,a.jsx)("input",{name:"phone",placeholder:"Phone Number",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-600"}),(0,a.jsx)("textarea",{name:"address",placeholder:"Address",rows:3,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-600"}),(0,a.jsxs)("select",{name:"personType",defaultValue:"MEMBER",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-600",children:[(0,a.jsx)("option",{value:"MEMBER",children:"Regular Member"}),(0,a.jsx)("option",{value:"STUDENT",children:"Student Member"}),(0,a.jsx)("option",{value:"VIP",children:"VIP Member"})]})]}),(0,a.jsxs)("div",{className:"flex justify-end space-x-3 mt-6",children:[(0,a.jsx)("button",{type:"button",onClick:()=>x(!1),className:"px-4 py-2 text-gray-600 hover:text-gray-800",children:"Cancel"}),(0,a.jsx)("button",{type:"submit",className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700",children:"Add Member"})]})]})]})})]})},eb=t(3669),ey=t(5763),ej=t(9064);let ef=e=>{let{title:s,person:t,onSubmit:r,onClose:l}=e;return(0,a.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:(0,a.jsxs)("div",{className:"bg-white rounded-lg p-6 w-full max-w-md max-h-[90vh] overflow-y-auto",children:[(0,a.jsx)("h2",{className:"text-xl font-semibold mb-4",children:s}),(0,a.jsxs)("form",{onSubmit:e=>{var s,t,a,l,n,i,c,o;e.preventDefault();let d=new FormData(e.target),x={name:(null===(s=d.get("name"))||void 0===s?void 0:s.toString())||"",email:(null===(t=d.get("email"))||void 0===t?void 0:t.toString())||"",phone:(null===(a=d.get("phone"))||void 0===a?void 0:a.toString())||"",address:(null===(l=d.get("address"))||void 0===l?void 0:l.toString())||"",personType:(null===(n=d.get("personType"))||void 0===n?void 0:n.toString())||"VISITOR",status:(null===(i=d.get("status"))||void 0===i?void 0:i.toString())||"ACTIVE",notes:(null===(c=d.get("notes"))||void 0===c?void 0:c.toString())||"",emergencyContact:(null===(o=d.get("emergencyContact"))||void 0===o?void 0:o.toString())||""};if(!x.name||!x.email){ej.ZP.error("Name and email are required");return}r(x)},children:[(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Name *"}),(0,a.jsx)("input",{name:"name",defaultValue:(null==t?void 0:t.name)||"",placeholder:"Full Name",required:!0,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-600"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Email *"}),(0,a.jsx)("input",{name:"email",type:"email",defaultValue:(null==t?void 0:t.email)||"",placeholder:"Email Address",required:!0,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-600"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Phone"}),(0,a.jsx)("input",{name:"phone",type:"tel",defaultValue:(null==t?void 0:t.phone)||"",placeholder:"Phone Number",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-600"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Address"}),(0,a.jsx)("textarea",{name:"address",defaultValue:(null==t?void 0:t.address)||"",placeholder:"Full Address",rows:2,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-600"})]}),(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Type"}),(0,a.jsxs)("select",{name:"personType",defaultValue:(null==t?void 0:t.personType)||"VISITOR",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-600",children:[(0,a.jsx)("option",{value:"VISITOR",children:"Visitor"}),(0,a.jsx)("option",{value:"MEMBER",children:"Member"}),(0,a.jsx)("option",{value:"STUDENT",children:"Student"}),(0,a.jsx)("option",{value:"VIP",children:"VIP"}),(0,a.jsx)("option",{value:"STAFF",children:"Staff"})]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Status"}),(0,a.jsxs)("select",{name:"status",defaultValue:(null==t?void 0:t.status)||"ACTIVE",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-600",children:[(0,a.jsx)("option",{value:"ACTIVE",children:"Active"}),(0,a.jsx)("option",{value:"INACTIVE",children:"Inactive"}),(0,a.jsx)("option",{value:"SUSPENDED",children:"Suspended"}),(0,a.jsx)("option",{value:"BANNED",children:"Banned"})]})]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Emergency Contact"}),(0,a.jsx)("input",{name:"emergencyContact",defaultValue:(null==t?void 0:t.emergencyContact)||"",placeholder:"Emergency Contact Information",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-600"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Notes"}),(0,a.jsx)("textarea",{name:"notes",defaultValue:(null==t?void 0:t.notes)||"",placeholder:"Additional notes...",rows:3,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-600"})]})]}),(0,a.jsxs)("div",{className:"flex justify-end space-x-3 mt-6",children:[(0,a.jsx)("button",{type:"button",onClick:l,className:"px-4 py-2 text-gray-600 hover:text-gray-800",children:"Cancel"}),(0,a.jsx)("button",{type:"submit",className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700",children:t?"Update Person":"Add Person"})]})]})]})})},eN=e=>{let{person:s,onClose:t}=e;return(0,a.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:(0,a.jsxs)("div",{className:"bg-white rounded-lg p-6 w-full max-w-md max-h-[90vh] overflow-y-auto",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,a.jsx)("h2",{className:"text-xl font-semibold",children:"Person Details"}),(0,a.jsx)("button",{onClick:t,className:"text-gray-400 hover:text-gray-600",children:(0,a.jsx)(z.Z,{className:"h-6 w-6 transform rotate-45"})})]}),(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Name"}),(0,a.jsx)("p",{className:"text-gray-900",children:s.name})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Email"}),(0,a.jsx)("p",{className:"text-gray-900",children:s.email})]}),s.phone&&(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Phone"}),(0,a.jsx)("p",{className:"text-gray-900",children:s.phone})]}),s.address&&(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Address"}),(0,a.jsx)("p",{className:"text-gray-900",children:s.address})]}),(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Type"}),(0,a.jsx)("span",{className:"inline-flex px-2 py-1 text-xs font-semibold rounded-full ".concat("MEMBER"===s.personType?"bg-blue-100 text-blue-800":"VISITOR"===s.personType?"bg-green-100 text-green-800":"VIP"===s.personType?"bg-purple-100 text-purple-800":"STUDENT"===s.personType?"bg-yellow-100 text-yellow-800":"bg-red-100 text-red-800"),children:s.personType})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Status"}),(0,a.jsx)("span",{className:"inline-flex px-2 py-1 text-xs font-semibold rounded-full ".concat("ACTIVE"===s.status?"bg-green-100 text-green-800":"INACTIVE"===s.status?"bg-gray-100 text-gray-800":"BANNED"===s.status?"bg-red-100 text-red-800":"bg-orange-100 text-orange-800"),children:s.status})]})]}),s.emergencyContact&&(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Emergency Contact"}),(0,a.jsx)("p",{className:"text-gray-900",children:s.emergencyContact})]}),s.notes&&(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Notes"}),(0,a.jsx)("p",{className:"text-gray-900",children:s.notes})]}),(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-4 pt-4 border-t",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Added"}),(0,a.jsx)("p",{className:"text-gray-900 text-sm",children:new Date(s.createdAt).toLocaleDateString()})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Updated"}),(0,a.jsx)("p",{className:"text-gray-900 text-sm",children:new Date(s.updatedAt).toLocaleDateString()})]})]})]})]})})};var ev=()=>{let{hasPermission:e}=(0,l.a)(),[s,t]=(0,r.useState)([]),[n,i]=(0,r.useState)(!1),[c,d]=(0,r.useState)(""),[x,m]=(0,r.useState)("all"),[u,h]=(0,r.useState)("all"),[g,p]=(0,r.useState)(!1),[b,y]=(0,r.useState)(null),[j,N]=(0,r.useState)(null);if(!e("members:read"))return(0,a.jsx)("div",{className:"flex items-center justify-center min-h-screen",children:(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)(f.Z,{className:"h-12 w-12 text-red-500 mx-auto mb-4"}),(0,a.jsx)("h2",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Access Denied"}),(0,a.jsx)("p",{className:"text-gray-600",children:"You need appropriate privileges to access visitor management."})]})});(0,r.useEffect)(()=>{v()},[x,u]);let v=async()=>{try{i(!0);let e=localStorage.getItem("token"),s=new URLSearchParams({limit:"100",...c&&{search:c},..."all"!==x&&{personType:x},..."all"!==u&&{status:u}}),a=await fetch("/api/persons?".concat(s),{headers:{Authorization:"Bearer ".concat(e)}});if(a.ok){let e=await a.json();t(e.persons||[])}else ej.ZP.error("Failed to fetch persons")}catch(e){console.error("Error fetching persons:",e),ej.ZP.error("Failed to fetch persons")}finally{i(!1)}},w=()=>{v()},k=async e=>{try{let a=localStorage.getItem("token"),r=await fetch("/api/persons",{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(a)},body:JSON.stringify(e)});if(r.ok){let e=await r.json();t([e,...s]),p(!1),ej.ZP.success("Person added successfully!")}else{let e=await r.json();ej.ZP.error(e.error||"Failed to add person")}}catch(e){console.error("Error adding person:",e),ej.ZP.error("Failed to add person")}},C=async e=>{if(b)try{let a=localStorage.getItem("token"),r=await fetch("/api/persons/".concat(b.id),{method:"PUT",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(a)},body:JSON.stringify(e)});if(r.ok){let e=await r.json();t(s.map(s=>s.id===e.id?e:s)),y(null),ej.ZP.success("Person updated successfully!")}else{let e=await r.json();ej.ZP.error(e.error||"Failed to update person")}}catch(e){console.error("Error updating person:",e),ej.ZP.error("Failed to update person")}},A=async e=>{if(confirm("Are you sure you want to delete this person? This action cannot be undone."))try{let a=localStorage.getItem("token"),r=await fetch("/api/persons/".concat(e),{method:"DELETE",headers:{Authorization:"Bearer ".concat(a)}});if(r.ok)t(s.filter(s=>s.id!==e)),ej.ZP.success("Person deleted successfully!");else{let e=await r.json();ej.ZP.error(e.error||"Failed to delete person")}}catch(e){console.error("Error deleting person:",e),ej.ZP.error("Failed to delete person")}},I=e=>{switch(e){case"MEMBER":return"bg-blue-100 text-blue-800";case"VISITOR":return"bg-green-100 text-green-800";case"VIP":return"bg-purple-100 text-purple-800";case"STUDENT":return"bg-yellow-100 text-yellow-800";case"STAFF":return"bg-red-100 text-red-800";default:return"bg-gray-100 text-gray-800"}},Z=e=>{switch(e){case"ACTIVE":return"bg-green-100 text-green-800";case"INACTIVE":default:return"bg-gray-100 text-gray-800";case"BANNED":return"bg-red-100 text-red-800";case"SUSPENDED":return"bg-orange-100 text-orange-800"}},E=s.filter(e=>e.name.toLowerCase().includes(c.toLowerCase())||e.email.toLowerCase().includes(c.toLowerCase())||e.phone&&e.phone.includes(c));return(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h1",{className:"text-3xl font-bold text-gray-900",children:"People Management"}),(0,a.jsx)("p",{className:"text-gray-600 mt-1",children:"Manage all library visitors, members, and staff"})]}),(0,a.jsxs)("button",{onClick:()=>p(!0),className:"flex items-center space-x-2 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700",children:[(0,a.jsx)(z.Z,{className:"h-4 w-4"}),(0,a.jsx)("span",{children:"Add Person"})]})]}),(0,a.jsxs)("div",{className:"flex flex-col sm:flex-row gap-4",children:[(0,a.jsxs)("div",{className:"flex-1 relative",children:[(0,a.jsx)(D.Z,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 h-4 w-4"}),(0,a.jsx)("input",{type:"text",placeholder:"Search by name, email, or phone...",value:c,onChange:e=>d(e.target.value),onKeyPress:e=>"Enter"===e.key&&w(),className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-600"})]}),(0,a.jsx)("select",{value:x,onChange:e=>m(e.target.value),className:"px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-600",children:["all","MEMBER","VISITOR","VIP","STUDENT","STAFF"].map(e=>(0,a.jsx)("option",{value:e,children:"all"===e?"All Types":e},e))}),(0,a.jsx)("select",{value:u,onChange:e=>h(e.target.value),className:"px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-600",children:["all","ACTIVE","INACTIVE","BANNED","SUSPENDED"].map(e=>(0,a.jsx)("option",{value:e,children:"all"===e?"All Statuses":e},e))}),(0,a.jsx)("button",{onClick:w,className:"px-4 py-2 bg-gray-600 text-white rounded-lg hover:bg-gray-700",children:(0,a.jsx)(eb.Z,{className:"h-4 w-4"})})]}),n?(0,a.jsxs)("div",{className:"text-center py-12",children:[(0,a.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto"}),(0,a.jsx)("p",{className:"text-gray-600 mt-4",children:"Loading persons..."})]}):(0,a.jsx)("div",{className:"bg-white rounded-lg shadow overflow-hidden",children:(0,a.jsxs)("table",{className:"min-w-full divide-y divide-gray-200",children:[(0,a.jsx)("thead",{className:"bg-gray-50",children:(0,a.jsxs)("tr",{children:[(0,a.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Person"}),(0,a.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Type"}),(0,a.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"}),(0,a.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Contact"}),(0,a.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Added"}),(0,a.jsx)("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),(0,a.jsx)("tbody",{className:"bg-white divide-y divide-gray-200",children:E.map(e=>(0,a.jsxs)("tr",{className:"hover:bg-gray-50",children:[(0,a.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsx)("div",{className:"flex-shrink-0 h-10 w-10",children:(0,a.jsx)("div",{className:"h-10 w-10 rounded-full bg-gray-300 flex items-center justify-center",children:(0,a.jsx)(S.Z,{className:"h-5 w-5 text-gray-600"})})}),(0,a.jsxs)("div",{className:"ml-4",children:[(0,a.jsx)("div",{className:"text-sm font-medium text-gray-900",children:e.name}),(0,a.jsx)("div",{className:"text-sm text-gray-500",children:e.email})]})]})}),(0,a.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,a.jsx)("span",{className:"inline-flex px-2 py-1 text-xs font-semibold rounded-full ".concat(I(e.personType)),children:e.personType})}),(0,a.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,a.jsx)("span",{className:"inline-flex px-2 py-1 text-xs font-semibold rounded-full ".concat(Z(e.status)),children:e.status})}),(0,a.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:(0,a.jsxs)("div",{className:"space-y-1",children:[e.phone&&(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsx)(eg.Z,{className:"h-3 w-3 mr-1"}),e.phone]}),e.address&&(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsx)(ey.Z,{className:"h-3 w-3 mr-1"}),e.address.length>20?"".concat(e.address.substring(0,20),"..."):e.address]})]})}),(0,a.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:new Date(e.createdAt).toLocaleDateString()}),(0,a.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium",children:(0,a.jsxs)("div",{className:"flex items-center justify-end space-x-2",children:[(0,a.jsx)("button",{onClick:()=>N(e),className:"text-blue-600 hover:text-blue-900",title:"View Details",children:(0,a.jsx)(o.Z,{className:"h-4 w-4"})}),(0,a.jsx)("button",{onClick:()=>y(e),className:"text-green-600 hover:text-green-900",title:"Edit",children:(0,a.jsx)(X.Z,{className:"h-4 w-4"})}),(0,a.jsx)("button",{onClick:()=>A(e.id),className:"text-red-600 hover:text-red-900",title:"Delete",children:(0,a.jsx)(ee.Z,{className:"h-4 w-4"})})]})})]},e.id))})]})}),0===E.length&&!n&&(0,a.jsxs)("div",{className:"text-center py-12",children:[(0,a.jsx)(L.Z,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),(0,a.jsx)("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No persons found"}),(0,a.jsx)("p",{className:"text-gray-600",children:"Try adjusting your search or filter criteria"})]}),g&&(0,a.jsx)(ef,{title:"Add New Person",onSubmit:k,onClose:()=>p(!1)}),b&&(0,a.jsx)(ef,{title:"Edit Person",person:b,onSubmit:C,onClose:()=>y(null)}),j&&(0,a.jsx)(eN,{person:j,onClose:()=>N(null)})]})},ew=()=>{let{state:e,borrowBook:s,returnBook:t,fetchBooks:l,fetchMembers:n,fetchBorrowings:i}=(0,U.y)(),{books:c,members:o,borrowings:d}=e,[x,m]=(0,r.useState)(""),[u,h]=(0,r.useState)(!1);(0,r.useEffect)(()=>{l(),n(),i()},[]);let g=d.filter(e=>"BORROWED"===e.status),p=g.filter(e=>new Date(e.dueDate)<new Date),b=g.filter(e=>{let s=c.find(s=>s.id===e.bookId),t=o.find(s=>s.id===(e.memberId||e.personId));if(!x)return!0;let a=x.toLowerCase();return(null==s?void 0:s.title.toLowerCase().includes(a))||(null==s?void 0:s.author.toLowerCase().includes(a))||(null==t?void 0:t.name.toLowerCase().includes(a))||(null==t?void 0:t.email.toLowerCase().includes(a))||e.id.toLowerCase().includes(a)}),y=e=>{let t=new Date;t.setDate(t.getDate()+14),console.log("Borrowing data:",e);let a={bookId:e.bookId,personId:e.personId,memberId:e.memberId,dueDate:t.toISOString()};console.log("Borrowing payload:",a),s(a),h(!1)},f=e=>{t(e)};return(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)("div",{className:"flex justify-between items-center",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h1",{className:"text-3xl font-bold text-gray-900",children:"Borrowing System"}),(0,a.jsx)("p",{className:"text-gray-600 mt-2",children:"Manage book loans and returns"})]}),(0,a.jsxs)("button",{onClick:()=>h(!0),className:"bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 flex items-center space-x-2",children:[(0,a.jsx)(z.Z,{className:"h-5 w-5"}),(0,a.jsx)("span",{children:"New Loan"})]})]}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[(0,a.jsx)("div",{className:"bg-white p-6 rounded-lg shadow-sm border border-gray-200",children:(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsx)("div",{className:"p-3 bg-blue-100 rounded-lg",children:(0,a.jsx)(R.Z,{className:"h-6 w-6 text-blue-600"})}),(0,a.jsxs)("div",{className:"ml-4",children:[(0,a.jsx)("p",{className:"text-sm font-medium text-gray-600",children:"Active Loans"}),(0,a.jsx)("p",{className:"text-2xl font-bold text-gray-900",children:g.length})]})]})}),(0,a.jsx)("div",{className:"bg-white p-6 rounded-lg shadow-sm border border-gray-200",children:(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsx)("div",{className:"p-3 bg-red-100 rounded-lg",children:(0,a.jsx)(N.Z,{className:"h-6 w-6 text-red-600"})}),(0,a.jsxs)("div",{className:"ml-4",children:[(0,a.jsx)("p",{className:"text-sm font-medium text-gray-600",children:"Overdue"}),(0,a.jsx)("p",{className:"text-2xl font-bold text-gray-900",children:p.length})]})]})}),(0,a.jsx)("div",{className:"bg-white p-6 rounded-lg shadow-sm border border-gray-200",children:(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsx)("div",{className:"p-3 bg-green-100 rounded-lg",children:(0,a.jsx)(j.Z,{className:"h-6 w-6 text-green-600"})}),(0,a.jsxs)("div",{className:"ml-4",children:[(0,a.jsx)("p",{className:"text-sm font-medium text-gray-600",children:"Available Books"}),(0,a.jsx)("p",{className:"text-2xl font-bold text-gray-900",children:c.filter(e=>"AVAILABLE"===e.status).length})]})]})})]}),(0,a.jsx)("div",{className:"bg-white p-6 rounded-lg shadow-sm border border-gray-200",children:(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsx)(D.Z,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400"}),(0,a.jsx)("input",{type:"text",placeholder:"Search by book title, member name, or loan ID...",value:x,onChange:e=>m(e.target.value),className:"pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-600 focus:border-transparent w-full"})]})}),(0,a.jsx)("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 overflow-hidden",children:(0,a.jsx)("div",{className:"overflow-x-auto",children:(0,a.jsxs)("table",{className:"min-w-full divide-y divide-gray-200",children:[(0,a.jsx)("thead",{className:"bg-gray-50",children:(0,a.jsxs)("tr",{children:[(0,a.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Book"}),(0,a.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Member"}),(0,a.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Borrow Date"}),(0,a.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Due Date"}),(0,a.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"}),(0,a.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),(0,a.jsx)("tbody",{className:"bg-white divide-y divide-gray-200",children:b.map(e=>{let s=c.find(s=>s.id===e.bookId),t=o.find(s=>s.id===(e.memberId||e.personId)),r=new Date(e.dueDate)<new Date;return(0,a.jsxs)("tr",{className:"hover:bg-gray-50",children:[(0,a.jsxs)("td",{className:"px-6 py-4 whitespace-nowrap",children:[(0,a.jsx)("div",{className:"text-sm font-medium text-gray-900",children:null==s?void 0:s.title}),(0,a.jsxs)("div",{className:"text-sm text-gray-500",children:["by ",null==s?void 0:s.author]})]}),(0,a.jsxs)("td",{className:"px-6 py-4 whitespace-nowrap",children:[(0,a.jsx)("div",{className:"text-sm text-gray-900",children:null==t?void 0:t.name}),(0,a.jsx)("div",{className:"text-sm text-gray-500",children:null==t?void 0:t.email})]}),(0,a.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:new Date(e.borrowDate).toLocaleDateString()}),(0,a.jsxs)("td",{className:"px-6 py-4 whitespace-nowrap",children:[(0,a.jsx)("div",{className:"text-sm ".concat(r?"text-red-600 font-medium":"text-gray-900"),children:new Date(e.dueDate).toLocaleDateString()}),r&&(0,a.jsxs)("div",{className:"text-xs text-red-500 flex items-center",children:[(0,a.jsx)(A.Z,{className:"h-3 w-3 mr-1"}),"Overdue"]})]}),(0,a.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,a.jsx)("span",{className:"inline-flex px-2 py-1 text-xs font-semibold rounded-full ".concat(r?"bg-red-100 text-red-800":"bg-yellow-100 text-yellow-800"),children:r?"Overdue":"Borrowed"})}),(0,a.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium",children:(0,a.jsx)("button",{onClick:()=>f(e.id),className:"text-green-600 hover:text-green-900",children:"Return"})})]},e.id)})})]})})}),0===g.length&&(0,a.jsxs)("div",{className:"text-center py-12",children:[(0,a.jsx)(R.Z,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),(0,a.jsx)("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No active loans"}),(0,a.jsx)("p",{className:"text-gray-600",children:"All books are currently available"})]}),g.length>0&&0===b.length&&x&&(0,a.jsxs)("div",{className:"text-center py-12",children:[(0,a.jsx)(D.Z,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),(0,a.jsx)("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No loans found"}),(0,a.jsx)("p",{className:"text-gray-600",children:"Try adjusting your search criteria"})]}),u&&(0,a.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:(0,a.jsxs)("div",{className:"bg-white rounded-lg p-6 w-full max-w-md",children:[(0,a.jsx)("h2",{className:"text-xl font-semibold mb-4",children:"Borrow Book"}),(0,a.jsxs)("form",{onSubmit:e=>{e.preventDefault();let s=new FormData(e.target);y({bookId:s.get("bookId"),personId:s.get("personId")})},children:[(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("select",{name:"bookId",required:!0,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-600",children:[(0,a.jsx)("option",{value:"",children:"Select Book"}),c.filter(e=>"AVAILABLE"===e.status).map(e=>(0,a.jsxs)("option",{value:e.id,children:[e.title," by ",e.author]},e.id))]}),(0,a.jsxs)("select",{name:"personId",required:!0,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-600",children:[(0,a.jsx)("option",{value:"",children:"Select Member"}),o.filter(e=>"ACTIVE"===e.status).map(e=>(0,a.jsxs)("option",{value:e.id,children:[e.name," (",e.email,")"]},e.id))]})]}),(0,a.jsxs)("div",{className:"flex justify-end space-x-3 mt-6",children:[(0,a.jsx)("button",{type:"button",onClick:()=>h(!1),className:"px-4 py-2 text-gray-600 hover:text-gray-800",children:"Cancel"}),(0,a.jsx)("button",{type:"submit",className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700",children:"Borrow Book"})]})]})]})})]})},ek=t(5043);let eS=e=>{let{onSubmit:s,onClose:t}=e;return(0,a.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:(0,a.jsxs)("div",{className:"bg-white rounded-lg p-6 w-full max-w-md",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,a.jsx)("h2",{className:"text-xl font-semibold",children:"Add Person & Check In"}),(0,a.jsx)("button",{onClick:t,className:"text-gray-400 hover:text-gray-600",children:(0,a.jsx)(z.Z,{className:"h-6 w-6 transform rotate-45"})})]}),(0,a.jsxs)("form",{onSubmit:e=>{var t,a,r,l,n,i;e.preventDefault();let c=new FormData(e.target),o={name:(null===(t=c.get("name"))||void 0===t?void 0:t.toString())||"",email:(null===(a=c.get("email"))||void 0===a?void 0:a.toString())||"",phone:(null===(r=c.get("phone"))||void 0===r?void 0:r.toString())||"",address:(null===(l=c.get("address"))||void 0===l?void 0:l.toString())||"",personType:(null===(n=c.get("personType"))||void 0===n?void 0:n.toString())||"VISITOR",notes:(null===(i=c.get("notes"))||void 0===i?void 0:i.toString())||""};if(!o.name||!o.email){ej.ZP.error("Name and email are required");return}s(o)},children:[(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Full Name *"}),(0,a.jsx)("input",{name:"name",type:"text",required:!0,placeholder:"Enter person's full name",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-600"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Email Address *"}),(0,a.jsx)("input",{name:"email",type:"email",required:!0,placeholder:"Enter person's email",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-600"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Phone Number"}),(0,a.jsx)("input",{name:"phone",type:"tel",placeholder:"Enter phone number (optional)",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-600"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Person Type"}),(0,a.jsxs)("select",{name:"personType",defaultValue:"VISITOR",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-600",children:[(0,a.jsx)("option",{value:"VISITOR",children:"Visitor"}),(0,a.jsx)("option",{value:"MEMBER",children:"Member"}),(0,a.jsx)("option",{value:"STUDENT",children:"Student"}),(0,a.jsx)("option",{value:"VIP",children:"VIP"}),(0,a.jsx)("option",{value:"STAFF",children:"Staff"})]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Address"}),(0,a.jsx)("textarea",{name:"address",placeholder:"Enter address (optional)",rows:2,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-600"})]})]}),(0,a.jsxs)("div",{className:"flex justify-end space-x-3 mt-6",children:[(0,a.jsx)("button",{type:"button",onClick:t,className:"px-4 py-2 text-gray-600 hover:text-gray-800",children:"Cancel"}),(0,a.jsxs)("button",{type:"submit",className:"flex items-center space-x-2 px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700",children:[(0,a.jsx)(ek.Z,{className:"h-4 w-4"}),(0,a.jsx)("span",{children:"Add & Check In"})]})]})]})]})})};var eC=()=>{let{hasPermission:e}=(0,l.a)(),[s,t]=(0,r.useState)([]),[n,i]=(0,r.useState)([]),[c,o]=(0,r.useState)(!1),[d,x]=(0,r.useState)(""),[m,u]=(0,r.useState)(new Date().toISOString().split("T")[0]),[h,g]=(0,r.useState)(!1);if(!e("manage_attendance"))return(0,a.jsx)("div",{className:"flex items-center justify-center min-h-screen",children:(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)(f.Z,{className:"h-12 w-12 text-red-500 mx-auto mb-4"}),(0,a.jsx)("h2",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Access Denied"}),(0,a.jsx)("p",{className:"text-gray-600",children:"You need librarian privileges to access attendance management."})]})});(0,r.useEffect)(()=>{b(),y()},[m]);let b=async()=>{try{o(!0);let e=localStorage.getItem("token"),s=await fetch("/api/persons?limit=100",{headers:{Authorization:"Bearer ".concat(e)}});if(s.ok){let e=await s.json();t(e.persons||[])}else ej.ZP.error("Failed to fetch persons")}catch(e){console.error("Error fetching persons:",e),ej.ZP.error("Failed to fetch persons")}finally{o(!1)}},y=async()=>{try{let e=localStorage.getItem("token"),s=await fetch("/api/attendance?date=".concat(m,"&limit=100"),{headers:{Authorization:"Bearer ".concat(e)}});if(s.ok){let e=await s.json();i(e.attendance||[])}else ej.ZP.error("Failed to fetch attendance records")}catch(e){console.error("Error fetching attendance:",e),ej.ZP.error("Failed to fetch attendance records")}},j=async e=>{try{let s=localStorage.getItem("token"),t=await fetch("/api/attendance",{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(s)},body:JSON.stringify({action:"check-in",personId:e})});if(t.ok)ej.ZP.success("Person checked in successfully!"),y();else{let e=await t.json();ej.ZP.error(e.error||"Failed to check in person")}}catch(e){console.error("Error checking in person:",e),ej.ZP.error("Failed to check in person")}},N=async e=>{try{let s=localStorage.getItem("token"),t=await fetch("/api/attendance",{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(s)},body:JSON.stringify({action:"check-out",personId:e.personId})});if(t.ok)ej.ZP.success("Check-out successful!"),y();else{let e=await t.json();ej.ZP.error(e.error||"Failed to check out")}}catch(e){console.error("Error checking out:",e),ej.ZP.error("Failed to check out")}},v=async e=>{try{let a=localStorage.getItem("token"),r=await fetch("/api/persons",{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(a)},body:JSON.stringify(e)});if(r.ok){let e=await r.json();t([e,...s]),g(!1),ej.ZP.success("Person added successfully!"),j(e.id)}else{let e=await r.json();ej.ZP.error(e.error||"Failed to add person")}}catch(e){console.error("Error adding person:",e),ej.ZP.error("Failed to add person")}},w=s.filter(e=>e.name.toLowerCase().includes(d.toLowerCase())||e.email.toLowerCase().includes(d.toLowerCase())||e.phone&&e.phone.includes(d)),k=e=>n.find(s=>s.personId===e&&!s.checkOutTime),C=e=>new Date(e).toLocaleTimeString("en-US",{hour:"2-digit",minute:"2-digit"}),I=(e,s)=>{let t=new Date(e),a=(s?new Date(s):new Date).getTime()-t.getTime();return"".concat(Math.floor(a/36e5),"h ").concat(Math.floor(a%36e5/6e4),"m")},Z=e=>{switch(e){case"MEMBER":return"bg-blue-100 text-blue-800";case"VISITOR":return"bg-green-100 text-green-800";case"VIP":return"bg-purple-100 text-purple-800";case"STUDENT":return"bg-yellow-100 text-yellow-800";case"STAFF":return"bg-red-100 text-red-800";default:return"bg-gray-100 text-gray-800"}};return(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h1",{className:"text-4xl font-bold text-gray-900",children:"\uD83D\uDCCB Daily Attendance System"}),(0,a.jsx)("p",{className:"text-lg text-gray-600 mt-2",children:"Search, Sign In & Sign Out Library Visitors"})]}),(0,a.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,a.jsx)("input",{type:"date",value:m,onChange:e=>u(e.target.value),className:"px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-600"}),(0,a.jsxs)("button",{onClick:()=>g(!0),className:"flex items-center space-x-2 px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700",children:[(0,a.jsx)(L.Z,{className:"h-4 w-4"}),(0,a.jsx)("span",{children:"Add Person"})]})]})]}),(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)("div",{className:"bg-white rounded-lg shadow",children:[(0,a.jsxs)("div",{className:"p-6 border-b border-gray-200",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,a.jsx)("h2",{className:"text-2xl font-bold text-gray-900",children:"\uD83D\uDC65 Search & Sign In People"}),(0,a.jsxs)("div",{className:"flex items-center space-x-2 text-sm font-semibold text-blue-600 bg-blue-50 px-3 py-1 rounded-lg",children:[(0,a.jsx)(S.Z,{className:"h-4 w-4"}),(0,a.jsxs)("span",{children:[w.length," registered people"]})]})]}),(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsx)(D.Z,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 h-4 w-4"}),(0,a.jsx)("input",{type:"text",placeholder:"Search by name, email, or phone...",value:d,onChange:e=>x(e.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-600"})]})]}),(0,a.jsx)("div",{className:"max-h-80 overflow-y-auto border-t border-gray-100 scrollbar-thin scrollbar-thumb-gray-300 scrollbar-track-gray-100",children:c?(0,a.jsxs)("div",{className:"text-center py-8",children:[(0,a.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600 mx-auto"}),(0,a.jsx)("p",{className:"text-gray-600 mt-2",children:"Loading people..."})]}):0===d.length?(0,a.jsxs)("div",{className:"text-center py-12",children:[(0,a.jsx)(D.Z,{className:"h-16 w-16 text-gray-300 mx-auto mb-4"}),(0,a.jsx)("h3",{className:"text-xl font-semibold text-gray-700 mb-2",children:"Start typing to search for people"}),(0,a.jsx)("p",{className:"text-gray-500",children:"Type a person's name, email, or phone number to find them and sign them in"})]}):(0,a.jsxs)("div",{children:[w.length>5&&(0,a.jsxs)("div",{className:"bg-blue-50 px-4 py-2 text-sm text-blue-700 font-medium border-b border-blue-100",children:["\uD83D\uDCDD Found ",w.length," people - scroll to see all results"]}),(0,a.jsxs)("div",{className:"divide-y divide-gray-200",children:[w.map(e=>{let s=k(e.id),t=!!s;return(0,a.jsx)("div",{className:"p-4 hover:bg-gray-50",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,a.jsx)("div",{className:"flex-shrink-0 h-10 w-10",children:(0,a.jsx)("div",{className:"h-10 w-10 rounded-full bg-blue-100 flex items-center justify-center",children:(0,a.jsx)(S.Z,{className:"h-5 w-5 text-blue-600"})})}),(0,a.jsxs)("div",{children:[(0,a.jsx)("div",{className:"text-lg font-bold text-gray-900 mb-1",children:e.name}),(0,a.jsx)("div",{className:"text-sm text-gray-600 mb-1",children:e.email}),(0,a.jsxs)("div",{className:"flex items-center space-x-2 mb-2",children:[(0,a.jsx)("span",{className:"inline-flex items-center px-3 py-1 rounded-lg text-xs font-semibold ".concat(Z(e.personType)," border"),children:e.personType}),e.libraryId&&(0,a.jsxs)("span",{className:"inline-flex items-center px-2 py-1 rounded-md text-xs font-mono font-semibold bg-gray-100 text-gray-800 border",children:["ID: ",e.libraryId]})]})]})]}),(0,a.jsx)("div",{className:"flex items-center space-x-3",children:t?(0,a.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,a.jsx)("div",{className:"text-center",children:(0,a.jsxs)("div",{className:"inline-flex items-center px-3 py-2 rounded-lg text-sm font-semibold bg-green-100 text-green-800 border border-green-200",children:[(0,a.jsx)(A.Z,{className:"h-4 w-4 mr-2"}),(0,a.jsxs)("div",{children:[(0,a.jsx)("div",{className:"font-bold",children:"CHECKED IN"}),(0,a.jsxs)("div",{className:"text-xs",children:["at ",C(s.checkInTime)]})]})]})}),(0,a.jsxs)("button",{onClick:()=>N(s),className:"flex items-center space-x-2 px-4 py-3 bg-red-600 text-white rounded-lg hover:bg-red-700 text-sm font-semibold shadow-md transition-all duration-200 hover:shadow-lg",children:[(0,a.jsx)(p.Z,{className:"h-4 w-4"}),(0,a.jsx)("span",{children:"SIGN OUT"})]})]}):(0,a.jsxs)("button",{onClick:()=>j(e.id),className:"flex items-center space-x-2 px-4 py-3 bg-blue-600 text-white rounded-lg hover:bg-blue-700 text-sm font-semibold shadow-md transition-all duration-200 hover:shadow-lg",children:[(0,a.jsx)(ek.Z,{className:"h-4 w-4"}),(0,a.jsx)("span",{children:"SIGN IN"})]})})]})},e.id)}),d.length>0&&0===w.length&&(0,a.jsxs)("div",{className:"text-center py-8",children:[(0,a.jsx)(S.Z,{className:"h-12 w-12 text-gray-300 mx-auto mb-4"}),(0,a.jsx)("h3",{className:"text-lg font-medium text-gray-700 mb-2",children:"No people found"}),(0,a.jsxs)("p",{className:"text-gray-500 mb-4",children:['No one matches "',d,'"']}),(0,a.jsxs)("button",{onClick:()=>g(!0),className:"inline-flex items-center space-x-2 px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 text-sm font-semibold",children:[(0,a.jsx)(L.Z,{className:"h-4 w-4"}),(0,a.jsx)("span",{children:"Add New Person"})]})]})]})]})})]}),(0,a.jsxs)("div",{className:"bg-white rounded-lg shadow",children:[(0,a.jsx)("div",{className:"p-6 border-b border-gray-200",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("h2",{className:"text-2xl font-bold text-gray-900",children:["\uD83D\uDD50 ",m===new Date().toISOString().split("T")[0]?"Today's Attendance":"Daily Attendance"]}),(0,a.jsxs)("div",{className:"flex items-center space-x-2 text-sm font-semibold text-green-600 bg-green-50 px-3 py-1 rounded-lg",children:[(0,a.jsx)(P.Z,{className:"h-4 w-4"}),(0,a.jsxs)("span",{children:[n.length," total visits"]})]})]})}),(0,a.jsx)("div",{className:"max-h-96 overflow-y-auto scrollbar-thin scrollbar-thumb-gray-300 scrollbar-track-gray-100",children:0===n.length?(0,a.jsxs)("div",{className:"text-center py-8",children:[(0,a.jsx)(V.Z,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),(0,a.jsx)("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No attendance records"}),(0,a.jsx)("p",{className:"text-gray-600",children:"No one has visited the library on this date"})]}):(0,a.jsxs)("div",{children:[n.length>5&&(0,a.jsxs)("div",{className:"bg-green-50 px-4 py-2 text-sm text-green-700 font-medium border-b border-green-100",children:["\uD83D\uDCCB ",n.length," total visits today - scroll to see all records"]}),(0,a.jsx)("div",{className:"divide-y divide-gray-200",children:n.map(e=>{var s,t,r;return(0,a.jsx)("div",{className:"p-4 hover:bg-gray-50",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,a.jsx)("div",{className:"flex-shrink-0 h-10 w-10",children:(0,a.jsx)("div",{className:"h-10 w-10 rounded-full bg-blue-100 flex items-center justify-center",children:(0,a.jsx)(S.Z,{className:"h-5 w-5 text-blue-600"})})}),(0,a.jsxs)("div",{children:[(0,a.jsx)("div",{className:"text-lg font-bold text-gray-900 mb-1",children:(null===(s=e.person)||void 0===s?void 0:s.name)||"Unknown Person"}),(0,a.jsx)("div",{className:"text-sm text-gray-600 mb-1",children:(null===(t=e.person)||void 0===t?void 0:t.email)||"No email"}),(null===(r=e.person)||void 0===r?void 0:r.libraryId)&&(0,a.jsxs)("div",{className:"text-xs font-mono font-semibold text-blue-600 mb-2",children:["Library ID: ",e.person.libraryId]}),(0,a.jsxs)("div",{className:"flex items-center space-x-4 text-sm font-medium text-gray-700 bg-gray-50 px-3 py-2 rounded-lg",children:[(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsx)("span",{className:"text-green-600 font-semibold",children:"IN:"}),(0,a.jsx)("span",{className:"ml-1",children:C(e.checkInTime)})]}),e.checkOutTime&&(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsx)("span",{className:"text-red-600 font-semibold",children:"OUT:"}),(0,a.jsx)("span",{className:"ml-1",children:C(e.checkOutTime)})]}),(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsx)("span",{className:"text-blue-600 font-semibold",children:"TIME:"}),(0,a.jsx)("span",{className:"ml-1",children:I(e.checkInTime,e.checkOutTime)})]})]})]})]}),(0,a.jsxs)("div",{className:"flex items-center space-x-3",children:[e.person&&(0,a.jsx)("span",{className:"inline-flex items-center px-3 py-1 rounded-lg text-xs font-semibold ".concat(Z(e.person.personType)," border"),children:e.person.personType}),!e.checkOutTime&&(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsx)("span",{className:"inline-flex items-center px-3 py-1 rounded-lg text-xs font-semibold bg-green-100 text-green-800 border border-green-200",children:"✓ CURRENTLY IN LIBRARY"}),(0,a.jsxs)("button",{onClick:()=>N(e),className:"flex items-center space-x-2 px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700 text-sm font-semibold shadow-md transition-all duration-200 hover:shadow-lg",children:[(0,a.jsx)(p.Z,{className:"h-4 w-4"}),(0,a.jsx)("span",{children:"SIGN OUT"})]})]}),e.checkOutTime&&(0,a.jsx)("span",{className:"inline-flex items-center px-3 py-2 rounded-lg text-sm font-semibold bg-gray-100 text-gray-800 border border-gray-200",children:"✓ VISIT COMPLETED"})]})]})},e.id)})})]})})]})]}),h&&(0,a.jsx)(eS,{onSubmit:v,onClose:()=>g(!1)})]})},eD=t(65),eA=t(512),eI=t(5534),eZ=()=>{var e,s,t;let{hasPermission:n}=(0,l.a)(),[i,c]=(0,r.useState)(null),[o,d]=(0,r.useState)(!1),[x,m]=(0,r.useState)("week"),[u,h]=(0,r.useState)(""),[g,p]=(0,r.useState)("");if(!n("attendance:read"))return(0,a.jsx)("div",{className:"flex items-center justify-center min-h-screen",children:(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)(f.Z,{className:"h-12 w-12 text-red-500 mx-auto mb-4"}),(0,a.jsx)("h2",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Access Denied"}),(0,a.jsx)("p",{className:"text-gray-600",children:"You need appropriate privileges to view attendance analytics."})]})});(0,r.useEffect)(()=>{b()},[x]);let b=async()=>{try{d(!0);let e=localStorage.getItem("token"),s="/api/attendance/stats?period=".concat(x);u&&g&&(s+="&startDate=".concat(u,"&endDate=").concat(g));let t=await fetch(s,{headers:{Authorization:"Bearer ".concat(e)}});if(t.ok){let e=await t.json();c(e)}else ej.ZP.error("Failed to fetch attendance statistics")}catch(e){console.error("Error fetching attendance stats:",e),ej.ZP.error("Failed to fetch attendance statistics")}finally{d(!1)}},y=async e=>{ej.ZP.success("Exporting ".concat(e.toUpperCase()," report..."))},j=e=>{let s=Math.floor(e/60),t=e%60;return s>0?"".concat(s,"h ").concat(t,"m"):"".concat(t,"m")},N=()=>(null==i?void 0:i.hourlyStats)?Object.entries(i.hourlyStats).map(e=>{let[s,t]=e;return{hour:parseInt(s),count:t,timeSlot:"".concat(s,":00 - ").concat(parseInt(s)+1,":00")}}).sort((e,s)=>s.count-e.count).slice(0,5):[],v=()=>(null==i?void 0:i.dailyStats)?Object.entries(i.dailyStats).map(e=>{let[s,t]=e;return{date:new Date(s).toLocaleDateString("en-US",{month:"short",day:"numeric"}),visits:t}}).sort((e,s)=>new Date(e.date).getTime()-new Date(s.date).getTime()):[];return(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h1",{className:"text-4xl font-bold text-gray-900",children:"\uD83D\uDCCA Attendance Analytics"}),(0,a.jsx)("p",{className:"text-lg text-gray-600 mt-2",children:"Track patterns, insights, and generate reports"})]}),(0,a.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,a.jsxs)("select",{value:x,onChange:e=>m(e.target.value),className:"px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-600",children:[(0,a.jsx)("option",{value:"week",children:"Last 7 Days"}),(0,a.jsx)("option",{value:"month",children:"Last 30 Days"}),(0,a.jsx)("option",{value:"year",children:"Last Year"}),(0,a.jsx)("option",{value:"custom",children:"Custom Range"})]}),"custom"===x&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("input",{type:"date",value:u,onChange:e=>h(e.target.value),className:"px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-600"}),(0,a.jsx)("input",{type:"date",value:g,onChange:e=>p(e.target.value),className:"px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-600"})]}),(0,a.jsxs)("button",{onClick:b,className:"flex items-center space-x-2 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700",children:[(0,a.jsx)(G.Z,{className:"h-4 w-4"}),(0,a.jsx)("span",{children:"Refresh"})]})]})]}),o?(0,a.jsxs)("div",{className:"text-center py-12",children:[(0,a.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto"}),(0,a.jsx)("p",{className:"text-gray-600 mt-4",children:"Loading analytics..."})]}):i?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[(0,a.jsxs)("div",{className:"bg-white rounded-lg shadow p-6",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-sm font-medium text-gray-600",children:"Total Visits"}),(0,a.jsx)("p",{className:"text-3xl font-bold text-gray-900",children:i.summary.totalVisits})]}),(0,a.jsx)("div",{className:"bg-blue-100 rounded-full p-3",children:(0,a.jsx)(S.Z,{className:"h-6 w-6 text-blue-600"})})]}),(0,a.jsx)("div",{className:"mt-4",children:(0,a.jsx)("span",{className:"text-sm text-gray-500",children:"week"===x?"Past 7 days":"month"===x?"Past 30 days":"year"===x?"Past year":"Custom period"})})]}),(0,a.jsxs)("div",{className:"bg-white rounded-lg shadow p-6",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-sm font-medium text-gray-600",children:"Currently In Library"}),(0,a.jsx)("p",{className:"text-3xl font-bold text-green-600",children:i.summary.activeVisitors})]}),(0,a.jsx)("div",{className:"bg-green-100 rounded-full p-3",children:(0,a.jsx)(eD.Z,{className:"h-6 w-6 text-green-600"})})]}),(0,a.jsx)("div",{className:"mt-4",children:(0,a.jsx)("span",{className:"text-sm text-gray-500",children:"Right now"})})]}),(0,a.jsxs)("div",{className:"bg-white rounded-lg shadow p-6",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-sm font-medium text-gray-600",children:"Avg. Visit Duration"}),(0,a.jsx)("p",{className:"text-3xl font-bold text-purple-600",children:j(i.summary.averageDuration)})]}),(0,a.jsx)("div",{className:"bg-purple-100 rounded-full p-3",children:(0,a.jsx)(A.Z,{className:"h-6 w-6 text-purple-600"})})]}),(0,a.jsx)("div",{className:"mt-4",children:(0,a.jsx)("span",{className:"text-sm text-gray-500",children:"Completed visits only"})})]}),(0,a.jsxs)("div",{className:"bg-white rounded-lg shadow p-6",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-sm font-medium text-gray-600",children:"Completed Visits"}),(0,a.jsx)("p",{className:"text-3xl font-bold text-orange-600",children:i.summary.completedVisits})]}),(0,a.jsx)("div",{className:"bg-orange-100 rounded-full p-3",children:(0,a.jsx)(eA.Z,{className:"h-6 w-6 text-orange-600"})})]}),(0,a.jsx)("div",{className:"mt-4",children:(0,a.jsxs)("span",{className:"text-sm text-gray-500",children:[Math.round(i.summary.completedVisits/i.summary.totalVisits*100),"% completion rate"]})})]})]}),(0,a.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[(0,a.jsxs)("div",{className:"bg-white rounded-lg shadow p-6",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[(0,a.jsx)("h2",{className:"text-xl font-semibold text-gray-900",children:"\uD83D\uDCC8 Daily Attendance Trend"}),(0,a.jsx)(M.Z,{className:"h-5 w-5 text-gray-400"})]}),(0,a.jsx)("div",{className:"space-y-4",children:v().slice(-7).map((e,s)=>(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsx)("span",{className:"text-sm font-medium text-gray-700 w-20",children:e.date}),(0,a.jsx)("div",{className:"flex-1 mx-4",children:(0,a.jsx)("div",{className:"bg-gray-200 rounded-full h-4 relative overflow-hidden",children:(0,a.jsx)("div",{className:"bg-blue-600 h-full rounded-full transition-all duration-500",style:{width:"".concat(Math.max(e.visits/Math.max(...v().map(e=>e.visits))*100,5),"%")}})})}),(0,a.jsx)("span",{className:"text-sm font-bold text-gray-900 w-12 text-right",children:e.visits})]},e.date))})]}),(0,a.jsxs)("div",{className:"bg-white rounded-lg shadow p-6",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[(0,a.jsx)("h2",{className:"text-xl font-semibold text-gray-900",children:"\uD83C\uDFC6 Most Frequent Visitors"}),(0,a.jsx)(eA.Z,{className:"h-5 w-5 text-gray-400"})]}),(0,a.jsx)("div",{className:"space-y-3",children:i.topVisitors.slice(0,8).map((e,s)=>(0,a.jsxs)("div",{className:"flex items-center justify-between p-3 bg-gray-50 rounded-lg",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,a.jsx)("div",{className:"w-8 h-8 rounded-full flex items-center justify-center text-sm font-bold ".concat(0===s?"bg-yellow-100 text-yellow-800":1===s?"bg-gray-100 text-gray-800":2===s?"bg-orange-100 text-orange-800":"bg-blue-100 text-blue-800"),children:s+1}),(0,a.jsxs)("div",{children:[(0,a.jsx)("div",{className:"text-sm font-medium text-gray-900",children:e.name}),(0,a.jsx)("div",{className:"text-xs text-gray-500",children:e.type})]})]}),(0,a.jsx)("div",{className:"text-right",children:(0,a.jsxs)("div",{className:"text-sm font-bold text-gray-900",children:[e.visits," visits"]})})]},e.id))})]})]}),(0,a.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[(0,a.jsxs)("div",{className:"bg-white rounded-lg shadow p-6",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[(0,a.jsx)("h2",{className:"text-xl font-semibold text-gray-900",children:"\uD83D\uDD50 Peak Hours Analysis"}),(0,a.jsx)(A.Z,{className:"h-5 w-5 text-gray-400"})]}),(0,a.jsx)("div",{className:"space-y-3",children:N().map((e,s)=>{var t;return(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,a.jsx)("div",{className:"w-6 h-6 rounded-full flex items-center justify-center text-xs font-bold ".concat(0===s?"bg-red-100 text-red-800":1===s?"bg-orange-100 text-orange-800":"bg-blue-100 text-blue-800"),children:s+1}),(0,a.jsx)("span",{className:"text-sm font-medium text-gray-700",children:e.timeSlot})]}),(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsx)("div",{className:"w-20 bg-gray-200 rounded-full h-2",children:(0,a.jsx)("div",{className:"bg-blue-600 h-2 rounded-full",style:{width:"".concat(e.count/(null===(t=N()[0])||void 0===t?void 0:t.count)*100,"%")}})}),(0,a.jsx)("span",{className:"text-sm font-bold text-gray-900 w-8",children:e.count})]})]},e.hour)})})]}),(0,a.jsxs)("div",{className:"bg-white rounded-lg shadow p-6",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[(0,a.jsx)("h2",{className:"text-xl font-semibold text-gray-900",children:"\uD83D\uDC65 Visitor Type Breakdown"}),(0,a.jsx)(eI.Z,{className:"h-5 w-5 text-gray-400"})]}),(0,a.jsx)("div",{className:"space-y-4",children:i.typeBreakdown.map(e=>{let s=Math.round(e.count/i.summary.totalVisits*100);return(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("span",{className:"text-sm font-medium text-gray-700",children:[e.type,"s"]}),(0,a.jsxs)("span",{className:"text-sm font-bold text-gray-900",children:[e.count," (",s,"%)"]})]}),(0,a.jsx)("div",{className:"w-full bg-gray-200 rounded-full h-3",children:(0,a.jsx)("div",{className:"h-3 rounded-full transition-all duration-500 ".concat("Member"===e.type?"bg-blue-600":"bg-green-600"),style:{width:"".concat(s,"%")}})})]},e.type)})}),0===i.typeBreakdown.length&&(0,a.jsxs)("div",{className:"text-center py-8",children:[(0,a.jsx)(eI.Z,{className:"h-12 w-12 text-gray-300 mx-auto mb-4"}),(0,a.jsx)("p",{className:"text-gray-500",children:"No visitor data available for this period"})]})]})]}),(0,a.jsxs)("div",{className:"bg-white rounded-lg shadow p-6",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[(0,a.jsx)("h2",{className:"text-xl font-semibold text-gray-900",children:"\uD83D\uDCC4 Export Reports"}),(0,a.jsx)(Q.Z,{className:"h-5 w-5 text-gray-400"})]}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[(0,a.jsxs)("button",{onClick:()=>y("pdf"),className:"flex items-center justify-center space-x-2 px-4 py-3 bg-red-600 text-white rounded-lg hover:bg-red-700 transition-colors",children:[(0,a.jsx)(Q.Z,{className:"h-4 w-4"}),(0,a.jsx)("span",{children:"Export PDF Report"})]}),(0,a.jsxs)("button",{onClick:()=>y("excel"),className:"flex items-center justify-center space-x-2 px-4 py-3 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors",children:[(0,a.jsx)(Q.Z,{className:"h-4 w-4"}),(0,a.jsx)("span",{children:"Export Excel Data"})]}),(0,a.jsxs)("button",{onClick:()=>{let e=new Blob([JSON.stringify(i,null,2)],{type:"application/json"}),s=URL.createObjectURL(e),t=document.createElement("a");t.href=s,t.download="attendance-data-".concat(new Date().toISOString().split("T")[0],".json"),t.click(),URL.revokeObjectURL(s),ej.ZP.success("JSON data downloaded!")},className:"flex items-center justify-center space-x-2 px-4 py-3 bg-gray-600 text-white rounded-lg hover:bg-gray-700 transition-colors",children:[(0,a.jsx)(Q.Z,{className:"h-4 w-4"}),(0,a.jsx)("span",{children:"Export JSON Data"})]})]})]}),(0,a.jsxs)("div",{className:"bg-white rounded-lg shadow p-6",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[(0,a.jsx)("h2",{className:"text-xl font-semibold text-gray-900",children:"\uD83D\uDCA1 Insights & Recommendations"}),(0,a.jsx)(q.Z,{className:"h-5 w-5 text-gray-400"})]}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsx)("h3",{className:"text-lg font-semibold text-gray-800",children:"\uD83D\uDCCA Key Insights"}),(0,a.jsxs)("div",{className:"space-y-3",children:[(0,a.jsxs)("div",{className:"flex items-start space-x-2",children:[(0,a.jsx)("div",{className:"w-2 h-2 bg-blue-600 rounded-full mt-2"}),(0,a.jsxs)("p",{className:"text-sm text-gray-700",children:[(0,a.jsx)("span",{className:"font-semibold",children:"Busiest time:"})," ",(null===(e=N()[0])||void 0===e?void 0:e.timeSlot)||"No data","(",(null===(s=N()[0])||void 0===s?void 0:s.count)||0," visits)"]})]}),(0,a.jsxs)("div",{className:"flex items-start space-x-2",children:[(0,a.jsx)("div",{className:"w-2 h-2 bg-green-600 rounded-full mt-2"}),(0,a.jsxs)("p",{className:"text-sm text-gray-700",children:[(0,a.jsx)("span",{className:"font-semibold",children:"Completion rate:"})," ",Math.round(i.summary.completedVisits/i.summary.totalVisits*100),"% of visitors properly sign out"]})]}),(0,a.jsxs)("div",{className:"flex items-start space-x-2",children:[(0,a.jsx)("div",{className:"w-2 h-2 bg-purple-600 rounded-full mt-2"}),(0,a.jsxs)("p",{className:"text-sm text-gray-700",children:[(0,a.jsx)("span",{className:"font-semibold",children:"Average stay:"})," ",j(i.summary.averageDuration)," per visit"]})]})]})]}),(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsx)("h3",{className:"text-lg font-semibold text-gray-800",children:"\uD83C\uDFAF Recommendations"}),(0,a.jsxs)("div",{className:"space-y-3",children:[i.summary.completedVisits/i.summary.totalVisits<.8&&(0,a.jsx)("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-3",children:(0,a.jsxs)("p",{className:"text-sm text-yellow-800",children:[(0,a.jsx)("span",{className:"font-semibold",children:"⚠️ Low sign-out rate:"})," Consider reminding visitors to sign out when leaving."]})}),N().length>0&&(0,a.jsx)("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-3",children:(0,a.jsxs)("p",{className:"text-sm text-blue-800",children:[(0,a.jsx)("span",{className:"font-semibold",children:"\uD83D\uDCCA Peak hours:"})," Consider having more staff during ",null===(t=N()[0])||void 0===t?void 0:t.timeSlot," for better service."]})}),(0,a.jsx)("div",{className:"bg-green-50 border border-green-200 rounded-lg p-3",children:(0,a.jsxs)("p",{className:"text-sm text-green-800",children:[(0,a.jsx)("span",{className:"font-semibold",children:"✅ Good attendance:"})," ",i.summary.totalVisits," total visits show healthy library usage."]})})]})]})]})]})]}):(0,a.jsxs)("div",{className:"text-center py-12",children:[(0,a.jsx)(M.Z,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),(0,a.jsx)("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No data available"}),(0,a.jsx)("p",{className:"text-gray-600",children:"Try selecting a different time period or check if there are attendance records."})]})]})},eE=t(6967);let eT=e=>{let{title:s,user:t,onSubmit:l,onClose:n}=e,[i,d]=(0,r.useState)(!1);return(0,a.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:(0,a.jsxs)("div",{className:"bg-white rounded-lg p-6 w-full max-w-md",children:[(0,a.jsx)("h2",{className:"text-xl font-semibold mb-4",children:s}),(0,a.jsxs)("form",{onSubmit:e=>{var s,t,a,r;e.preventDefault();let n=new FormData(e.target),i={name:(null===(s=n.get("name"))||void 0===s?void 0:s.toString())||"",email:(null===(t=n.get("email"))||void 0===t?void 0:t.toString())||"",role:(null===(a=n.get("role"))||void 0===a?void 0:a.toString())||"LIBRARIAN"},c=null===(r=n.get("password"))||void 0===r?void 0:r.toString();c&&(i.password=c),l(i)},children:[(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsx)("input",{name:"name",defaultValue:(null==t?void 0:t.name)||"",placeholder:"Full Name",required:!0,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-600"}),(0,a.jsx)("input",{name:"email",type:"email",defaultValue:(null==t?void 0:t.email)||"",placeholder:"Email Address",required:!0,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-600"}),(0,a.jsxs)("select",{name:"role",defaultValue:(null==t?void 0:t.role)||"LIBRARIAN",required:!0,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-600",children:[(0,a.jsx)("option",{value:"ADMIN",children:"Admin"}),(0,a.jsx)("option",{value:"LIBRARIAN",children:"Librarian"})]}),(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsx)("input",{name:"password",type:i?"text":"password",placeholder:t?"New Password (leave blank to keep current)":"Password",required:!t,className:"w-full px-3 py-2 pr-10 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-600"}),(0,a.jsx)("div",{className:"absolute inset-y-0 right-0 pr-3 flex items-center",children:(0,a.jsx)("button",{type:"button",onClick:()=>d(!i),className:"text-gray-400 hover:text-gray-600 focus:outline-none",children:i?(0,a.jsx)(c.Z,{className:"h-5 w-5"}):(0,a.jsx)(o.Z,{className:"h-5 w-5"})})})]})]}),(0,a.jsxs)("div",{className:"flex justify-end space-x-3 mt-6",children:[(0,a.jsx)("button",{type:"button",onClick:n,className:"px-4 py-2 text-gray-600 hover:text-gray-800",children:"Cancel"}),(0,a.jsx)("button",{type:"submit",className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700",children:t?"Update User":"Create User"})]})]})]})})};var eB=()=>{let{hasPermission:e}=(0,l.a)(),[s,t]=(0,r.useState)([]),[n,i]=(0,r.useState)(!1),[c,o]=(0,r.useState)(""),[d,x]=(0,r.useState)("all"),[m,u]=(0,r.useState)(!1),[h,g]=(0,r.useState)(null);if(!e("all"))return(0,a.jsx)("div",{className:"flex items-center justify-center min-h-screen",children:(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)(f.Z,{className:"h-12 w-12 text-red-500 mx-auto mb-4"}),(0,a.jsx)("h2",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Access Denied"}),(0,a.jsx)("p",{className:"text-gray-600",children:"You need admin privileges to access user management."})]})});(0,r.useEffect)(()=>{p()},[d]);let p=async()=>{try{i(!0);let e=localStorage.getItem("token"),s=await fetch("/api/users?role=".concat(d),{headers:{Authorization:"Bearer ".concat(e)}});if(s.ok){let e=await s.json();t(e.users||[])}else ej.ZP.error("Failed to fetch users")}catch(e){console.error("Error fetching users:",e),ej.ZP.error("Failed to fetch users")}finally{i(!1)}},b=async e=>{try{let a=localStorage.getItem("token"),r=await fetch("/api/users",{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(a)},body:JSON.stringify(e)});if(r.ok){let e=await r.json();t([e,...s]),u(!1),ej.ZP.success("User created successfully!")}else{let e=await r.json();ej.ZP.error(e.error||"Failed to create user")}}catch(e){console.error("Error creating user:",e),ej.ZP.error("Failed to create user")}},y=async e=>{if(h)try{let a=localStorage.getItem("token"),r=await fetch("/api/users/".concat(h.id),{method:"PUT",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(a)},body:JSON.stringify(e)});if(r.ok){let e=await r.json();t(s.map(s=>s.id===e.id?e:s)),g(null),ej.ZP.success("User updated successfully!")}else{let e=await r.json();ej.ZP.error(e.error||"Failed to update user")}}catch(e){console.error("Error updating user:",e),ej.ZP.error("Failed to update user")}},j=async e=>{if(confirm("Are you sure you want to delete this user? This action cannot be undone."))try{let a=localStorage.getItem("token"),r=await fetch("/api/users/".concat(e),{method:"DELETE",headers:{Authorization:"Bearer ".concat(a)}});if(r.ok)t(s.filter(s=>s.id!==e)),ej.ZP.success("User deleted successfully!");else{let e=await r.json();ej.ZP.error(e.error||"Failed to delete user")}}catch(e){console.error("Error deleting user:",e),ej.ZP.error("Failed to delete user")}},N=s.filter(e=>e.name.toLowerCase().includes(c.toLowerCase())||e.email.toLowerCase().includes(c.toLowerCase())),v=e=>{switch(e){case"ADMIN":return(0,a.jsx)(C.Z,{className:"h-4 w-4 text-red-500"});case"LIBRARIAN":return(0,a.jsx)(eE.Z,{className:"h-4 w-4 text-blue-500"});case"MEMBER":return(0,a.jsx)(P.Z,{className:"h-4 w-4 text-green-500"});default:return(0,a.jsx)(P.Z,{className:"h-4 w-4 text-gray-500"})}},w=e=>{switch(e){case"ADMIN":return"bg-red-100 text-red-800";case"LIBRARIAN":return"bg-blue-100 text-blue-800";case"MEMBER":return"bg-green-100 text-green-800";default:return"bg-gray-100 text-gray-800"}};return(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h1",{className:"text-3xl font-bold text-gray-900",children:"User Management"}),(0,a.jsx)("p",{className:"text-gray-600 mt-1",children:"Manage admin and librarian accounts"})]}),(0,a.jsxs)("button",{onClick:()=>u(!0),className:"flex items-center space-x-2 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700",children:[(0,a.jsx)(z.Z,{className:"h-4 w-4"}),(0,a.jsx)("span",{children:"Add User"})]})]}),(0,a.jsxs)("div",{className:"flex flex-col sm:flex-row gap-4",children:[(0,a.jsxs)("div",{className:"flex-1 relative",children:[(0,a.jsx)(D.Z,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 h-4 w-4"}),(0,a.jsx)("input",{type:"text",placeholder:"Search users...",value:c,onChange:e=>o(e.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-600"})]}),(0,a.jsx)("select",{value:d,onChange:e=>x(e.target.value),className:"px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-600",children:["all","ADMIN","LIBRARIAN","MEMBER"].map(e=>(0,a.jsx)("option",{value:e,children:"all"===e?"All Roles":e.charAt(0)+e.slice(1).toLowerCase()},e))})]}),n?(0,a.jsxs)("div",{className:"text-center py-12",children:[(0,a.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto"}),(0,a.jsx)("p",{className:"text-gray-600 mt-4",children:"Loading users..."})]}):(0,a.jsx)("div",{className:"bg-white rounded-lg shadow overflow-hidden",children:(0,a.jsxs)("table",{className:"min-w-full divide-y divide-gray-200",children:[(0,a.jsx)("thead",{className:"bg-gray-50",children:(0,a.jsxs)("tr",{children:[(0,a.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"User"}),(0,a.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Role"}),(0,a.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Created"}),(0,a.jsx)("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),(0,a.jsx)("tbody",{className:"bg-white divide-y divide-gray-200",children:N.map(e=>(0,a.jsxs)("tr",{className:"hover:bg-gray-50",children:[(0,a.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsx)("div",{className:"flex-shrink-0 h-10 w-10",children:(0,a.jsx)("div",{className:"h-10 w-10 rounded-full bg-gray-300 flex items-center justify-center",children:(0,a.jsx)(S.Z,{className:"h-5 w-5 text-gray-600"})})}),(0,a.jsxs)("div",{className:"ml-4",children:[(0,a.jsx)("div",{className:"text-sm font-medium text-gray-900",children:e.name}),(0,a.jsx)("div",{className:"text-sm text-gray-500",children:e.email})]})]})}),(0,a.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[v(e.role),(0,a.jsx)("span",{className:"inline-flex px-2 py-1 text-xs font-semibold rounded-full ".concat(w(e.role)),children:e.role})]})}),(0,a.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:new Date(e.createdAt).toLocaleDateString()}),(0,a.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium",children:(0,a.jsxs)("div",{className:"flex items-center justify-end space-x-2",children:[(0,a.jsx)("button",{onClick:()=>g(e),className:"text-blue-600 hover:text-blue-900",children:(0,a.jsx)(X.Z,{className:"h-4 w-4"})}),e.id!==(null==e?void 0:e.id)&&(0,a.jsx)("button",{onClick:()=>j(e.id),className:"text-red-600 hover:text-red-900",children:(0,a.jsx)(ee.Z,{className:"h-4 w-4"})})]})})]},e.id))})]})}),0===N.length&&!n&&(0,a.jsxs)("div",{className:"text-center py-12",children:[(0,a.jsx)(S.Z,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),(0,a.jsx)("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No users found"}),(0,a.jsx)("p",{className:"text-gray-600",children:"Try adjusting your search or filter criteria"})]}),m&&(0,a.jsx)(eT,{title:"Add New User",onSubmit:b,onClose:()=>u(!1)}),h&&(0,a.jsx)(eT,{title:"Edit User",user:h,onSubmit:y,onClose:()=>g(null)})]})},eL=()=>{let{state:e}=(0,U.y)(),{books:s,members:t,borrowings:l,attendance:n}=e,[i,c]=(0,r.useState)("30days"),d=s.length,x=t.length,m=l.filter(e=>"BORROWED"===e.status).length,u=l.filter(e=>new Date(e.dueDate)<new Date&&"BORROWED"===e.status).length,h=new Date(new Date().getTime()-2592e6),g=l.filter(e=>new Date(e.borrowDate)>=h).length,p=n.filter(e=>new Date(e.checkInTime)>=h).length,b=s.reduce((e,s)=>(e[s.category]=(e[s.category]||0)+1,e),{}),y=[{title:"Library Overview",icon:B.Z,stats:[{label:"Total Books",value:d,color:"text-blue-600"},{label:"Total Members",value:x,color:"text-green-600"},{label:"Active Loans",value:m,color:"text-yellow-600"},{label:"Overdue Books",value:u,color:"text-red-600"}]},{title:"Activity (Last 30 Days)",icon:q.Z,stats:[{label:"New Borrowings",value:g,color:"text-blue-600"},{label:"Library Visits",value:p,color:"text-green-600"},{label:"Available Books",value:d-m,color:"text-purple-600"},{label:"Return Rate",value:"94%",color:"text-orange-600"}]}];return(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)("div",{className:"flex justify-between items-center",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h1",{className:"text-3xl font-bold text-gray-900",children:"Reports & Analytics"}),(0,a.jsx)("p",{className:"text-gray-600 mt-2",children:"Library performance and usage statistics"})]}),(0,a.jsxs)("div",{className:"flex space-x-3",children:[(0,a.jsxs)("select",{value:i,onChange:e=>c(e.target.value),className:"px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-600",children:[(0,a.jsx)("option",{value:"7days",children:"Last 7 days"}),(0,a.jsx)("option",{value:"30days",children:"Last 30 days"}),(0,a.jsx)("option",{value:"90days",children:"Last 90 days"}),(0,a.jsx)("option",{value:"1year",children:"Last year"})]}),(0,a.jsxs)("button",{className:"bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 flex items-center space-x-2",children:[(0,a.jsx)(Q.Z,{className:"h-5 w-5"}),(0,a.jsx)("span",{children:"Export"})]})]})]}),(0,a.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:y.map((e,s)=>(0,a.jsxs)("div",{className:"bg-white p-6 rounded-lg shadow-sm border border-gray-200",children:[(0,a.jsxs)("div",{className:"flex items-center mb-4",children:[(0,a.jsx)("div",{className:"p-2 bg-blue-100 rounded-lg",children:(0,a.jsx)(e.icon,{className:"h-6 w-6 text-blue-600"})}),(0,a.jsx)("h3",{className:"text-lg font-semibold text-gray-900 ml-3",children:e.title})]}),(0,a.jsx)("div",{className:"space-y-3",children:e.stats.map((e,s)=>(0,a.jsxs)("div",{className:"flex justify-between items-center",children:[(0,a.jsx)("span",{className:"text-sm text-gray-600",children:e.label}),(0,a.jsx)("span",{className:"text-lg font-bold ".concat(e.color),children:e.value})]},s))})]},s))}),(0,a.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[(0,a.jsxs)("div",{className:"bg-white p-6 rounded-lg shadow-sm border border-gray-200",children:[(0,a.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Books by Category"}),(0,a.jsx)("div",{className:"space-y-3",children:Object.entries(b).map(e=>{let[s,t]=e,r=t/d*100;return(0,a.jsxs)("div",{className:"space-y-1",children:[(0,a.jsxs)("div",{className:"flex justify-between text-sm",children:[(0,a.jsx)("span",{className:"text-gray-600 capitalize",children:s}),(0,a.jsxs)("span",{className:"font-medium text-gray-900",children:[t," books"]})]}),(0,a.jsx)("div",{className:"w-full bg-gray-200 rounded-full h-2",children:(0,a.jsx)("div",{className:"bg-blue-600 h-2 rounded-full",style:{width:"".concat(r,"%")}})})]},s)})})]}),(0,a.jsxs)("div",{className:"bg-white p-6 rounded-lg shadow-sm border border-gray-200",children:[(0,a.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Recent Activity"}),(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between p-3 bg-blue-50 rounded-lg",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,a.jsx)("div",{className:"p-2 bg-blue-100 rounded-lg",children:(0,a.jsx)(B.Z,{className:"h-4 w-4 text-blue-600"})}),(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-sm font-medium text-gray-900",children:"New Book Added"}),(0,a.jsx)("p",{className:"text-xs text-gray-500",children:'"The Great Gatsby" by F. Scott Fitzgerald'})]})]}),(0,a.jsx)("span",{className:"text-xs text-gray-500",children:"2 hours ago"})]}),(0,a.jsxs)("div",{className:"flex items-center justify-between p-3 bg-green-50 rounded-lg",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,a.jsx)("div",{className:"p-2 bg-green-100 rounded-lg",children:(0,a.jsx)(S.Z,{className:"h-4 w-4 text-green-600"})}),(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-sm font-medium text-gray-900",children:"New Member Registered"}),(0,a.jsx)("p",{className:"text-xs text-gray-500",children:"John Doe joined the library"})]})]}),(0,a.jsx)("span",{className:"text-xs text-gray-500",children:"4 hours ago"})]}),(0,a.jsxs)("div",{className:"flex items-center justify-between p-3 bg-yellow-50 rounded-lg",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,a.jsx)("div",{className:"p-2 bg-yellow-100 rounded-lg",children:(0,a.jsx)(q.Z,{className:"h-4 w-4 text-yellow-600"})}),(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-sm font-medium text-gray-900",children:"Book Returned"}),(0,a.jsx)("p",{className:"text-xs text-gray-500",children:'"1984" by George Orwell'})]})]}),(0,a.jsx)("span",{className:"text-xs text-gray-500",children:"6 hours ago"})]})]})]})]}),(0,a.jsxs)("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200",children:[(0,a.jsx)("div",{className:"px-6 py-4 border-b border-gray-200",children:(0,a.jsxs)("div",{className:"flex justify-between items-center",children:[(0,a.jsx)("h3",{className:"text-lg font-semibold text-gray-900",children:"Detailed Reports"}),(0,a.jsxs)("div",{className:"flex space-x-2",children:[(0,a.jsx)("button",{className:"p-2 text-gray-400 hover:text-gray-600",children:(0,a.jsx)(eb.Z,{className:"h-4 w-4"})}),(0,a.jsx)("button",{className:"p-2 text-gray-400 hover:text-gray-600",children:(0,a.jsx)(o.Z,{className:"h-4 w-4"})})]})]})}),(0,a.jsx)("div",{className:"overflow-x-auto",children:(0,a.jsxs)("table",{className:"min-w-full divide-y divide-gray-200",children:[(0,a.jsx)("thead",{className:"bg-gray-50",children:(0,a.jsxs)("tr",{children:[(0,a.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Report Type"}),(0,a.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Period"}),(0,a.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Generated"}),(0,a.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),(0,a.jsxs)("tbody",{className:"bg-white divide-y divide-gray-200",children:[(0,a.jsxs)("tr",{children:[(0,a.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900",children:"Borrowing Report"}),(0,a.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:"Last 30 days"}),(0,a.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:new Date().toLocaleDateString()}),(0,a.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium",children:(0,a.jsx)("button",{className:"text-blue-600 hover:text-blue-900",children:"View"})})]}),(0,a.jsxs)("tr",{children:[(0,a.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900",children:"Member Activity"}),(0,a.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:"Last 30 days"}),(0,a.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:new Date().toLocaleDateString()}),(0,a.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium",children:(0,a.jsx)("button",{className:"text-blue-600 hover:text-blue-900",children:"View"})})]}),(0,a.jsxs)("tr",{children:[(0,a.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900",children:"Overdue Books"}),(0,a.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:"Current"}),(0,a.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:new Date().toLocaleDateString()}),(0,a.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium",children:(0,a.jsx)("button",{className:"text-blue-600 hover:text-blue-900",children:"View"})})]})]})]})})]})]})},eR=t(2543),eP=t(6339),eM=()=>{let[e,s]=(0,r.useState)("general"),[t,l]=(0,r.useState)({libraryName:"Robert Aboagye Mensah Community Library",maxBorrowDays:14,maxBooksPerMember:5,overdueFinePerDay:.5,notifications:{email:!0,sms:!1,overdue:!0,reservations:!0},theme:"light",language:"en"}),i=[{id:"general",label:"General",icon:g.Z},{id:"borrowing",label:"Borrowing Rules",icon:n.Z},{id:"notifications",label:"Notifications",icon:h.Z},{id:"security",label:"Security",icon:C.Z},{id:"backup",label:"Backup & Export",icon:et.Z},{id:"appearance",label:"Appearance",icon:eR.Z}],c=(e,s)=>{if(e.includes(".")){let[t,a]=e.split(".");l(e=>({...e,[t]:{...e[t],[a]:s}}))}else l(t=>({...t,[e]:s}))},o=()=>(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Library Name"}),(0,a.jsx)("input",{type:"text",value:t.libraryName,onChange:e=>c("libraryName",e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-600"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Library Address"}),(0,a.jsx)("textarea",{rows:3,placeholder:"Enter library address...",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-600"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Contact Information"}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,a.jsx)("input",{type:"email",placeholder:"Email address",className:"px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-600"}),(0,a.jsx)("input",{type:"tel",placeholder:"Phone number",className:"px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-600"})]})]})]}),d=()=>(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Maximum Borrow Days"}),(0,a.jsx)("input",{type:"number",value:t.maxBorrowDays,onChange:e=>c("maxBorrowDays",parseInt(e.target.value)),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-600"}),(0,a.jsx)("p",{className:"text-sm text-gray-500 mt-1",children:"Number of days a book can be borrowed"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Maximum Books Per Member"}),(0,a.jsx)("input",{type:"number",value:t.maxBooksPerMember,onChange:e=>c("maxBooksPerMember",parseInt(e.target.value)),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-600"}),(0,a.jsx)("p",{className:"text-sm text-gray-500 mt-1",children:"Maximum number of books a member can borrow at once"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Overdue Fine Per Day ($)"}),(0,a.jsx)("input",{type:"number",step:"0.01",value:t.overdueFinePerDay,onChange:e=>c("overdueFinePerDay",parseFloat(e.target.value)),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-600"}),(0,a.jsx)("p",{className:"text-sm text-gray-500 mt-1",children:"Fine amount charged per day for overdue books"})]})]}),x=()=>(0,a.jsx)("div",{className:"space-y-6",children:(0,a.jsxs)("div",{children:[(0,a.jsx)("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Notification Preferences"}),(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-sm font-medium text-gray-900",children:"Email Notifications"}),(0,a.jsx)("p",{className:"text-sm text-gray-500",children:"Receive notifications via email"})]}),(0,a.jsxs)("label",{className:"relative inline-flex items-center cursor-pointer",children:[(0,a.jsx)("input",{type:"checkbox",checked:t.notifications.email,onChange:e=>c("notifications.email",e.target.checked),className:"sr-only peer"}),(0,a.jsx)("div",{className:"w-11 h-6 bg-gray-200 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-blue-300 rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-blue-600"})]})]}),(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-sm font-medium text-gray-900",children:"SMS Notifications"}),(0,a.jsx)("p",{className:"text-sm text-gray-500",children:"Receive notifications via SMS"})]}),(0,a.jsxs)("label",{className:"relative inline-flex items-center cursor-pointer",children:[(0,a.jsx)("input",{type:"checkbox",checked:t.notifications.sms,onChange:e=>c("notifications.sms",e.target.checked),className:"sr-only peer"}),(0,a.jsx)("div",{className:"w-11 h-6 bg-gray-200 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-blue-300 rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-blue-600"})]})]}),(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-sm font-medium text-gray-900",children:"Overdue Alerts"}),(0,a.jsx)("p",{className:"text-sm text-gray-500",children:"Get notified about overdue books"})]}),(0,a.jsxs)("label",{className:"relative inline-flex items-center cursor-pointer",children:[(0,a.jsx)("input",{type:"checkbox",checked:t.notifications.overdue,onChange:e=>c("notifications.overdue",e.target.checked),className:"sr-only peer"}),(0,a.jsx)("div",{className:"w-11 h-6 bg-gray-200 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-blue-300 rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-blue-600"})]})]})]})]})});return(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)("div",{className:"flex justify-between items-center",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h1",{className:"text-3xl font-bold text-gray-900",children:"Settings"}),(0,a.jsx)("p",{className:"text-gray-600 mt-2",children:"Manage your library system preferences"})]}),(0,a.jsxs)("button",{onClick:()=>{console.log("Settings saved:",t)},className:"bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 flex items-center space-x-2",children:[(0,a.jsx)(eP.Z,{className:"h-5 w-5"}),(0,a.jsx)("span",{children:"Save Changes"})]})]}),(0,a.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-4 gap-6",children:[(0,a.jsx)("div",{className:"lg:col-span-1",children:(0,a.jsx)("nav",{className:"space-y-1",children:i.map(t=>{let r=t.icon;return(0,a.jsxs)("button",{onClick:()=>s(t.id),className:"w-full flex items-center space-x-3 px-3 py-2 text-left rounded-lg transition-colors ".concat(e===t.id?"bg-blue-100 text-blue-700":"text-gray-700 hover:bg-gray-100"),children:[(0,a.jsx)(r,{className:"h-5 w-5"}),(0,a.jsx)("span",{className:"font-medium",children:t.label})]},t.id)})})}),(0,a.jsx)("div",{className:"lg:col-span-3",children:(0,a.jsx)("div",{className:"bg-white p-6 rounded-lg shadow-sm border border-gray-200",children:(()=>{switch(e){case"general":default:return o();case"borrowing":return d();case"notifications":return x();case"security":return(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsx)("h3",{className:"text-lg font-medium text-gray-900",children:"Security Settings"}),(0,a.jsx)("p",{className:"text-gray-600",children:"Security settings will be available in a future update."})]});case"backup":return(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsx)("h3",{className:"text-lg font-medium text-gray-900",children:"Backup & Export"}),(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsx)("button",{className:"bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700",children:"Export Library Data"}),(0,a.jsx)("button",{className:"bg-green-600 text-white px-4 py-2 rounded-lg hover:bg-green-700",children:"Create Backup"})]})]});case"appearance":return(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsx)("h3",{className:"text-lg font-medium text-gray-900",children:"Appearance"}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Theme"}),(0,a.jsxs)("select",{value:t.theme,onChange:e=>c("theme",e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-600",children:[(0,a.jsx)("option",{value:"light",children:"Light"}),(0,a.jsx)("option",{value:"dark",children:"Dark"}),(0,a.jsx)("option",{value:"auto",children:"Auto"})]})]})]})}})()})})]})]})};function eV(){let[e,s]=(0,r.useState)("dashboard"),{state:t}=(0,l.a)();return(0,a.jsxs)(x,{children:[(0,a.jsx)(O,{}),(0,a.jsxs)("div",{className:"min-h-screen bg-gray-50",children:[(0,a.jsx)(E,{onNavigate:(e,t)=>{s(e),t&&(sessionStorage.setItem("highlightPersonId",t),setTimeout(()=>{let e=document.getElementById("person-".concat(t));e&&(e.scrollIntoView({behavior:"smooth",block:"center"}),e.classList.add("bg-yellow-100","border-yellow-300","border-2"),setTimeout(()=>{e.classList.remove("bg-yellow-100","border-yellow-300","border-2")},3e3))},500))}}),(0,a.jsxs)("div",{className:"flex",children:[(0,a.jsx)(F,{activePage:e,setActivePage:s}),(0,a.jsx)("main",{className:"flex-1 p-6",children:(()=>{switch(e){case"dashboard":default:return(0,a.jsx)(W,{});case"catalog":return(0,a.jsx)(eh,{});case"members":return(0,a.jsx)(ep,{});case"visitors":return(0,a.jsx)(ev,{});case"borrowing":return(0,a.jsx)(ew,{});case"attendance":return(0,a.jsx)(eC,{});case"tracking":return(0,a.jsx)(eZ,{});case"users":return(0,a.jsx)(eB,{});case"reports":return(0,a.jsx)(eL,{});case"settings":return(0,a.jsx)(eM,{})}})()})]})]})]})}}},function(e){e.O(0,[64,969,997,971,117,744],function(){return e(e.s=350)}),_N_E=e.O()}]);